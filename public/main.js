'use strict';

// window.app = angular.module('portfolio', ['ui.router', 'ngAnimate']);
window.app = angular.module('portfolio', ['ui.router']);

app.config(function ($urlRouterProvider, $locationProvider, $urlMatcherFactoryProvider) {

	// this makes the '/stores/' route correctly redirect to '/stores'
	$urlRouterProvider.rule(function ($injector, $location) {

		var re = /(.+)(\/+)(\?.*)?$/;
		var path = $location.url();

		if (re.test(path)) {
			return path.replace(re, '$1$3');
		}

		return false;
	});
	// This turns off hashbang urls (/#about) and changes it to something normal (/about)
	$locationProvider.html5Mode(true);
	$urlRouterProvider.when('/auth/:provider', function () {
		window.location.reload();
	});
	// If we go to a URL that ui-router doesn't have registered, go to the "/" url.
	$urlRouterProvider.otherwise('/');
});

app.controller('aboutCtrl', function ($scope) {
	var theWindow = $(window);
	var force = d3.layout.force();
	var stopped = true;

	// angular.element(document).ready(function(){
	$scope.skills = [{ name: "JavaScript", level: 3 }, { name: "MongoDB", level: 3 }, { name: "Express.js", level: 3 }, { name: "Angular.js", level: 3 }, { name: "Node.js", level: 3 }, { name: "Mongoose.js", level: 3 }, { name: "Git", level: 3 }, { name: "CSS3", level: 3 }, { name: "HTML5", level: 3 }, { name: "Responsive Design", level: 2 }, { name: "Gulp", level: 2 }, { name: "Mocha & Chai", level: 2 }, { name: "jQuery", level: 2 }, { name: "Bootstrap", level: 2 }, { name: "Web-Audio", level: 2 }, { name: "Chrome Extensions", level: 1 }, { name: "SQL", level: 1 }, { name: "WebSockets", level: 1 }, { name: "MIDI", level: 1 }, { name: "Java", level: 1 }, { name: "C++", level: 1 }];

	$scope.colors = ['#7FFFD4', '#E0FFFF', '#33CCFF', '#C688E8', '#FF807D', '#FF8EB2'];

	$scope.skills.map(function (e, i) {
		e.color = $scope.colors[i % 6];
	});

	function initializeSkillsCloud() {
		var skillsCloud = $("#skills-cloud");
		var width = skillsCloud.width();
		var height = skillsCloud.height();
		var svg = d3.select("#skills-cloud").append("svg");

		//create nodes
		var nodes = d3.range($scope.skills.length).map(function (i) {
			return {
				radius: $scope.skills[i].level * 18 + 14,
				label: $scope.skills[i].name,
				skillLevel: $scope.skills[i].level,
				bgColor: $scope.skills[i].color
			};
		});

		var root = nodes[0];
		root.radius = 0;
		root.fixed = true;

		var groups = svg.selectAll("g").data(nodes.slice(1)).enter().append("g");

		var circles = groups.append('circle').data(nodes.slice(1)).attr("r", function (d) {
			return d.radius;
		}).style("fill", function (d, i) {
			return d.bgColor;
		});

		var label = groups.append("text").text(function (d) {
			return d.label;
		}).attr({
			"alignment-baseline": "middle",
			"text-anchor": "middle"
		});

		force.gravity(0.05).charge(function (d, i) {
			return i ? 0 : -3000;
		}).nodes(nodes);

		if (navigator.userAgent.split("Chrome").length < 2) {
			force.size([width - 100, height + 600]); //safari
		} else {
				force.size([width - 200, height - 300]); //chrome
			}

		force.start();
		stopped = false;

		force.on("tick", function (e) {
			var q = d3.geom.quadtree(nodes),
			    i = 0,
			    n = nodes.length;

			while (++i < n) q.visit(collide(nodes[i]));

			//move circles
			svg.selectAll("circle").attr("cx", function (d) {
				return d.x;
			}).attr("cy", function (d) {
				return d.y;
			});

			//move labels
			svg.selectAll("text").attr("x", function (d) {
				return d.x;
			}).attr("y", function (d) {
				return d.y;
			});
		});

		svg.on("mousemove", function () {
			var p1 = d3.mouse(this);
			root.px = p1[0];
			root.py = p1[1];
			force.resume();
		});

		//So they don't all start out in a straight line
		root.px = 1;
		root.py = 1;

		function collide(node) {
			var r = node.radius + 16,
			    nx1 = node.x - r,
			    nx2 = node.x + r,
			    ny1 = node.y - r,
			    ny2 = node.y + r;
			return function (quad, x1, y1, x2, y2) {
				if (quad.point && quad.point !== node) {
					var x = node.x - quad.point.x,
					    y = node.y - quad.point.y,
					    l = Math.sqrt(x * x + y * y),
					    r = node.radius + quad.point.radius;

					if (l < r) {
						l = (l - r) / l * 0.5;
						node.x -= x *= l;
						node.y -= y *= l;
						quad.point.x += x;
						quad.point.y += y;
					}
				}
				return x1 > nx2 || x2 < nx1 || y1 > ny2 || y2 < ny1;
			};
		}
	}
	// });

	var firefox;
	if (navigator.userAgent.split("Safari").length < 2 && navigator.userAgent.split("Chrome").length < 2) {
		firefox = true;
	}

	if (firefox) {
		$('#skills-cloud').css({ 'display': 'none' });
		$('#skills-mobile').css({ 'display': 'block', 'margin-top': '24px', 'margin-bottom': '44px', 'height': '700px' });

		setTimeout(function () {
			$('.skill-circle').css({ 'padding': '1px', 'padding-right': '32%', 'font-family': 'Oxygen', 'font-size': '19px', 'font-weight': '300', 'float': 'right' });
		}, 500);
	}

	if (theWindow.width() > 1074 && !firefox) {
		initializeSkillsCloud();
	}

	theWindow.resize(function () {
		if (theWindow.width() > 1074 && !firefox) {
			$('html,body').scrollTop(0);
			//start / restart mouseover listener if stopped
			if (stopped) {
				initializeSkillsCloud();
			}
		} else {
			force.stop();
		}
	});
});

app.controller('contactCtrl', function ($scope, $http) {
	$scope.formData = {};

	$scope.sendMail = function () {
		$scope.waiting = true;
		$scope.sent = false;
		$scope.success = false;
		$http.post('/api/contact', $scope.formData).then(function (successResponse) {
			$scope.waiting = false;
			$scope.sent = true;
			$scope.success = successResponse.data;
			$scope.formData = {};
		});
	};

	var resumeLabel = $('#resume');
	var overlay = $('#overlay');
	var resume = $('#resume-container');

	resumeLabel.click(function () {
		overlay.css({ 'opacity': '.7', 'z-index': '1' });
		resume.css({ 'display': 'block' });
	});
	overlay.click(function () {
		overlay.css({ 'opacity': '0', 'z-index': '-1' });
		resume.css({ 'display': 'none' });
	});

	// function explode() {
	//
	// 	$('#canvas').css({'display' : 'initial'});
	//
	// 	var requestId;
	//
	// 	var canvas = document.getElementById("canvas"),
	// 		context = canvas.getContext("2d"),
	// 		width = canvas.width = window.innerWidth,
	// 		height = canvas.height = window.innerHeight,
	// 		particle = [],
	// 		particleCount = 0,
	// 		gravity = 0.3,
	// 		colors = ['#7FFFD4','#E0FFFF','#33CCFF','#C688E8','#FF807D','#FF8EB2'];
	//
	// 	for( var i = 0; i < 50; i++){
	// 		particle.push({
	// 			x : width/2,
	// 			y : height/2,
	// 			boxW : randomRange(5,20),
	// 			boxH : randomRange(5,20),
	// 			size : randomRange(2,8),
	//
	// 			spikeran:randomRange(3,5),
	//
	// 			velX :randomRange(-8,8),
	// 			velY :randomRange(-50,-10),
	//
	// 			angle :convertToRadians(randomRange(0,360)),
	// 			color:colors[Math.floor(Math.random() * colors.length)],
	// 			anglespin:randomRange(-0.2,0.2),
	//
	// 			draw : draw
	// 		});
	// 	}
	//
	// 	var r1={
	// 		x:width/2-150,
	// 		y:height/2-150,
	// 		width:300,
	// 		height:300,
	// 		velX :0,
	// 		velY :-10,
	// 		alphatop:0
	// 	};
	//
	//
	// 	function drawScreen(){
	// 		var size = 50;
	// 		if (r1.alphatop < 1){
	// 			r1.alphatop += 0.01;
	// 		} else{
	// 			r1.alphatop = 1;
	// 		}
	// 		context.globalAlpha = r1.alphatop;
	//
	// 		if(r1.alphatop === 1){
	// 			r1.velY*= 0.999;
	// 			r1.velY += 0.3;
	// 			r1.x += r1.velX;
	// 			r1.y += r1.velY;
	// 		}
	//
	// 		if(r1.y + r1.height > height){
	// 			r1.anglespin = 0;
	// 			r1.y = height - r1.height;
	// 			r1.velY *= -0.8;
	// 			r1.velX *= 0.9;
	// 		}
	//
	// 		context.globalAlpha = 1;
	//
	// 		for( var i = 0; i < particle.length; i++){
	// 			particle[i].draw();
	// 		}
	// 	}
	//
	// 	function update(){
	// 		context.clearRect(0,0,width,height);
	// 		drawScreen();
	// 		requestId = requestAnimationFrame(update);
	// 	}
	//
	// 	update();
	//
	// 	setTimeout(function(){
	// 		window.cancelAnimationFrame(requestId);
	// 		requestId = undefined;
	// 	},5000);
	//
	// 	function randomRange(min, max){
	// 		return min + Math.random() * (max - min );
	// 	}
	//
	// 	function randomInt(min, max){
	// 		return Math.floor(min + Math.random()* (max - min + 1));
	// 	}
	//
	// 	function convertToRadians(degree) {
	// 		return degree*(Math.PI/180);
	// 	}
	//
	// 	function drawStar(cx, cy, spikes, outerRadius, innerRadius,color) {
	// 		var rot = Math.PI / 2 * 3;
	// 		var x = cx;
	// 		var y = cy;
	// 		var step = Math.PI / spikes;
	//
	// 		context.strokeSyle = "#000";
	// 		context.beginPath();
	// 		context.moveTo(cx, cy - outerRadius);
	// 		for (i = 0; i < spikes; i++) {
	// 			x = cx + Math.cos(rot) * outerRadius;
	// 			y = cy + Math.sin(rot) * outerRadius;
	// 			context.lineTo(x, y);
	// 			rot += step;
	//
	// 			x = cx + Math.cos(rot) * innerRadius;
	// 			y = cy + Math.sin(rot) * innerRadius;
	// 			context.lineTo(x, y);
	// 			rot += step;
	// 		}
	//
	// 		context.lineTo(cx, cy - outerRadius);
	// 		context.closePath();
	// 		context.fillStyle=color;
	// 		context.fill();
	// 	}
	//
	// 	function draw(){
	// 		context.save();
	// 		context.translate(this.x,this.y);
	// 		context.rotate(this.angle);
	// 		context.fillStyle=this.color;
	// 		context.beginPath();
	// 		// drawStar(0, 0, 5, this.boxW, this.boxH);
	// 		context.fillRect(this.boxW/2*-1,this.boxH/2*-1,this.boxW,this.boxH);
	// 		context.fill();
	// 		context.closePath();
	// 		context.restore();
	// 		this.angle += this.anglespin;
	// 		this.velY*= 0.999;
	// 		this.velY += 0.3;
	// 		this.x += this.velX;
	// 		this.y += this.velY;
	//
	// 		if(this.y < 0){
	// 			this.velY *= -0.2;
	// 			this.velX *= 0.9;
	// 		}
	// 		if (this.y > height){
	// 			this.anglespin = 0;
	// 			this.y = height;
	// 			this.velY *= -0.2;
	// 			this.velX *= 0.9;
	// 		}
	// 		if (this.x > width ||this.x< 0){
	// 			this.velX *= -0.5;
	// 		}
	// 	}
	// }
});

app.config(function ($stateProvider) {
	$stateProvider.state('home', {
		url: '/',
		templateUrl: '/js/templates/home.html',
		controller: 'homeCtrl'
	}).state('projects', {
		url: '/projects',
		templateUrl: '/js/templates/projects.html',
		controller: 'projectCtrl'
	}).state('about', {
		url: '/about',
		templateUrl: '/js/templates/about.html',
		controller: 'aboutCtrl'
	}).state('contact', {
		url: '/contact',
		templateUrl: '/js/templates/contact.html',
		controller: 'contactCtrl'
	});
});

app.controller('homeCtrl', function ($scope, $state) {
	$scope.$state = $state;
	var increment = 0;
	var carousel = $('#carousel');
	var current = '#fig-1';
	var prev;
	var theWindow = $(window);
	var interval;
	var bars = $('#static-bars > li');
	var header = $('.left-col');

	if (theWindow.width() > 768) {
		interval = setInterval(rotate, 1500);
	} else {
		var speed;
		bars.each(function (index) {
			speed = (index + 1) * 0.3;
			$(this).css({ 'animation': 'slideInLeft ' + speed + 's' });
		});
		header.removeClass("animated").removeClass('flipInX');
	}

	theWindow.resize(function () {
		clearInterval(interval);
		if (theWindow.width() > 768) {
			$('html,body').scrollTop(0);
			interval = setInterval(rotate, 1500);
		}
	});

	function rotate() {
		increment++;
		carousel.css({ '-webkit-transform': 'rotateX(' + increment * -60 + 'deg)' });
		carousel.attr('data-state', increment % 6 + 1);
		prev = current;
		current = '#fig-' + (increment % 6 + 1);
	}
});

app.controller('projectCtrl', function ($scope) {
	var theWindow = $(window);

	var skewMode = false;
	var curPage;
	function initializeSkew() {
		skewMode = true;
		$(document).ready(function () {

			var numOfPages = $(".skw-page").length;
			var animTime = 1000;
			var scrolling = false;
			var pgPrefix = ".skw-page-";
			// var progPrefix = "#p";

			curPage = parseInt(window.location.hash.split("#p")[1]) + 1 || 1;

			for (var i = 1; i <= numOfPages; i++) {
				if (i < curPage) {
					$(pgPrefix + i).addClass("active").addClass("inactive");
				} else if (i === curPage) {
					$(pgPrefix + i).addClass("active").removeClass("inactive");
				} else {
					$(pgPrefix + i).removeClass("active").removeClass("inactive");
				}
			}

			function pagination() {
				scrolling = true;

				$(pgPrefix + curPage).removeClass("inactive").addClass("active");
				// $(progPrefix + curPage).addClass("current");
				setTimeout(function () {
					scrolling = false;
				}, animTime);
			}

			function navigateUp() {
				if (curPage === 1) return;
				curPage--;
				$(pgPrefix + (curPage + 1)).removeClass("active");
				// $(progPrefix + (curPage + 1)).removeClass("current");
				pagination();
			}

			function navigateDown() {
				if (curPage === numOfPages) return;
				curPage++;
				$(pgPrefix + (curPage - 1)).addClass("inactive");
				// $(progPrefix + (curPage -1)).removeClass("current");
				pagination();
			}

			$(document).off(); //reset event listeners

			$(document).on("mousewheel DOMMouseScroll", function (e) {
				if (scrolling) return;
				if (e.originalEvent.wheelDelta > 0 || e.originalEvent.detail < 0) {
					navigateUp();
				} else {
					navigateDown();
				}
			});

			$(document).on("keydown", function (e) {
				if (scrolling) return;
				if (e.which === 38) {
					navigateUp();
				} else if (e.which === 40) {
					navigateDown();
				}
			});
		});
	}

	if (theWindow.width() > 768) {
		console.log('INITIALIZING SKEW');
		initializeSkew();
	}

	theWindow.resize(function () {
		if (theWindow.width() > 768) {
			// $('html,body').scrollTop(0);
			//start / restart mouseover listener if stopped
			if (!skewMode) {
				initializeSkew();
			}
		}
	});
});

app.directive('projectsMobile', function () {
	return {
		restrict: 'E',
		templateUrl: '/js/directives/projects-mobile.html'
	};
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsImFib3V0LmpzIiwiY29udGFjdC5qcyIsImhvbWUuanMiLCJwcm9qZWN0LmpzIiwiZGlyZWN0aXZlcy9wcm9qZWN0cy1tb2JpbGUuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0FBQ0EsTUFBQSxDQUFBLEdBQUEsR0FBQSxPQUFBLENBQUEsTUFBQSxDQUFBLFdBQUEsRUFBQSxDQUFBLFdBQUEsQ0FBQSxDQUFBLENBQUE7O0FBR0EsR0FBQSxDQUFBLE1BQUEsQ0FBQSxVQUFBLGtCQUFBLEVBQUEsaUJBQUEsRUFBQSwwQkFBQSxFQUFBOzs7QUFHQSxtQkFBQSxDQUFBLElBQUEsQ0FBQSxVQUFBLFNBQUEsRUFBQSxTQUFBLEVBQUE7O0FBRUEsTUFBQSxFQUFBLEdBQUEsbUJBQUEsQ0FBQTtBQUNBLE1BQUEsSUFBQSxHQUFBLFNBQUEsQ0FBQSxHQUFBLEVBQUEsQ0FBQTs7QUFFQSxNQUFBLEVBQUEsQ0FBQSxJQUFBLENBQUEsSUFBQSxDQUFBLEVBQUE7QUFDQSxVQUFBLElBQUEsQ0FBQSxPQUFBLENBQUEsRUFBQSxFQUFBLE1BQUEsQ0FBQSxDQUFBO0dBQ0E7O0FBRUEsU0FBQSxLQUFBLENBQUE7RUFDQSxDQUFBOztBQUFBLEFBRUEsa0JBQUEsQ0FBQSxTQUFBLENBQUEsSUFBQSxDQUFBLENBQUE7QUFDQSxtQkFBQSxDQUFBLElBQUEsQ0FBQSxpQkFBQSxFQUFBLFlBQUE7QUFDQSxRQUFBLENBQUEsUUFBQSxDQUFBLE1BQUEsRUFBQSxDQUFBO0VBQ0EsQ0FBQTs7QUFBQSxBQUVBLG1CQUFBLENBQUEsU0FBQSxDQUFBLEdBQUEsQ0FBQSxDQUFBO0NBQ0EsQ0FBQSxDQUFBOztBQ3pCQSxHQUFBLENBQUEsVUFBQSxDQUFBLFdBQUEsRUFBQSxVQUFBLE1BQUEsRUFBQTtBQUNBLEtBQUEsU0FBQSxHQUFBLENBQUEsQ0FBQSxNQUFBLENBQUEsQ0FBQTtBQUNBLEtBQUEsS0FBQSxHQUFBLEVBQUEsQ0FBQSxNQUFBLENBQUEsS0FBQSxFQUFBLENBQUE7QUFDQSxLQUFBLE9BQUEsR0FBQSxJQUFBOzs7QUFBQSxBQUdBLE9BQUEsQ0FBQSxNQUFBLEdBQUEsQ0FDQSxFQUFBLElBQUEsRUFBQSxZQUFBLEVBQUEsS0FBQSxFQUFBLENBQUEsRUFBQSxFQUNBLEVBQUEsSUFBQSxFQUFBLFNBQUEsRUFBQSxLQUFBLEVBQUEsQ0FBQSxFQUFBLEVBQ0EsRUFBQSxJQUFBLEVBQUEsWUFBQSxFQUFBLEtBQUEsRUFBQSxDQUFBLEVBQUEsRUFDQSxFQUFBLElBQUEsRUFBQSxZQUFBLEVBQUEsS0FBQSxFQUFBLENBQUEsRUFBQSxFQUNBLEVBQUEsSUFBQSxFQUFBLFNBQUEsRUFBQSxLQUFBLEVBQUEsQ0FBQSxFQUFBLEVBQ0EsRUFBQSxJQUFBLEVBQUEsYUFBQSxFQUFBLEtBQUEsRUFBQSxDQUFBLEVBQUEsRUFDQSxFQUFBLElBQUEsRUFBQSxLQUFBLEVBQUEsS0FBQSxFQUFBLENBQUEsRUFBQSxFQUNBLEVBQUEsSUFBQSxFQUFBLE1BQUEsRUFBQSxLQUFBLEVBQUEsQ0FBQSxFQUFBLEVBQ0EsRUFBQSxJQUFBLEVBQUEsT0FBQSxFQUFBLEtBQUEsRUFBQSxDQUFBLEVBQUEsRUFDQSxFQUFBLElBQUEsRUFBQSxtQkFBQSxFQUFBLEtBQUEsRUFBQSxDQUFBLEVBQUEsRUFDQSxFQUFBLElBQUEsRUFBQSxNQUFBLEVBQUEsS0FBQSxFQUFBLENBQUEsRUFBQSxFQUNBLEVBQUEsSUFBQSxFQUFBLGNBQUEsRUFBQSxLQUFBLEVBQUEsQ0FBQSxFQUFBLEVBQ0EsRUFBQSxJQUFBLEVBQUEsUUFBQSxFQUFBLEtBQUEsRUFBQSxDQUFBLEVBQUEsRUFDQSxFQUFBLElBQUEsRUFBQSxXQUFBLEVBQUEsS0FBQSxFQUFBLENBQUEsRUFBQSxFQUNBLEVBQUEsSUFBQSxFQUFBLFdBQUEsRUFBQSxLQUFBLEVBQUEsQ0FBQSxFQUFBLEVBQ0EsRUFBQSxJQUFBLEVBQUEsbUJBQUEsRUFBQSxLQUFBLEVBQUEsQ0FBQSxFQUFBLEVBQ0EsRUFBQSxJQUFBLEVBQUEsS0FBQSxFQUFBLEtBQUEsRUFBQSxDQUFBLEVBQUEsRUFDQSxFQUFBLElBQUEsRUFBQSxZQUFBLEVBQUEsS0FBQSxFQUFBLENBQUEsRUFBQSxFQUNBLEVBQUEsSUFBQSxFQUFBLE1BQUEsRUFBQSxLQUFBLEVBQUEsQ0FBQSxFQUFBLEVBQ0EsRUFBQSxJQUFBLEVBQUEsTUFBQSxFQUFBLEtBQUEsRUFBQSxDQUFBLEVBQUEsRUFDQSxFQUFBLElBQUEsRUFBQSxLQUFBLEVBQUEsS0FBQSxFQUFBLENBQUEsRUFBQSxDQUNBLENBQUE7O0FBRUEsT0FBQSxDQUFBLE1BQUEsR0FBQSxDQUNBLFNBQUEsRUFDQSxTQUFBLEVBQ0EsU0FBQSxFQUNBLFNBQUEsRUFDQSxTQUFBLEVBQ0EsU0FBQSxDQUNBLENBQUE7O0FBRUEsT0FBQSxDQUFBLE1BQUEsQ0FBQSxHQUFBLENBQUEsVUFBQSxDQUFBLEVBQUEsQ0FBQSxFQUFBO0FBQ0EsR0FBQSxDQUFBLEtBQUEsR0FBQSxNQUFBLENBQUEsTUFBQSxDQUFBLENBQUEsR0FBQSxDQUFBLENBQUEsQ0FBQTtFQUNBLENBQUEsQ0FBQTs7QUFFQSxVQUFBLHFCQUFBLEdBQUE7QUFDQSxNQUFBLFdBQUEsR0FBQSxDQUFBLENBQUEsZUFBQSxDQUFBLENBQUE7QUFDQSxNQUFBLEtBQUEsR0FBQSxXQUFBLENBQUEsS0FBQSxFQUFBLENBQUE7QUFDQSxNQUFBLE1BQUEsR0FBQSxXQUFBLENBQUEsTUFBQSxFQUFBLENBQUE7QUFDQSxNQUFBLEdBQUEsR0FBQSxFQUFBLENBQUEsTUFBQSxDQUFBLGVBQUEsQ0FBQSxDQUFBLE1BQUEsQ0FBQSxLQUFBLENBQUE7OztBQUFBLEFBSUEsTUFBQSxLQUFBLEdBQUEsRUFBQSxDQUFBLEtBQUEsQ0FBQSxNQUFBLENBQUEsTUFBQSxDQUFBLE1BQUEsQ0FBQSxDQUFBLEdBQUEsQ0FBQSxVQUFBLENBQUEsRUFBQTtBQUNBLFVBQUE7QUFDQSxVQUFBLEVBQUEsTUFBQSxDQUFBLE1BQUEsQ0FBQSxDQUFBLENBQUEsQ0FBQSxLQUFBLEdBQUEsRUFBQSxHQUFBLEVBQUE7QUFDQSxTQUFBLEVBQUEsTUFBQSxDQUFBLE1BQUEsQ0FBQSxDQUFBLENBQUEsQ0FBQSxJQUFBO0FBQ0EsY0FBQSxFQUFBLE1BQUEsQ0FBQSxNQUFBLENBQUEsQ0FBQSxDQUFBLENBQUEsS0FBQTtBQUNBLFdBQUEsRUFBQSxNQUFBLENBQUEsTUFBQSxDQUFBLENBQUEsQ0FBQSxDQUFBLEtBQUE7SUFDQSxDQUFBO0dBQ0EsQ0FBQSxDQUFBOztBQUVBLE1BQUEsSUFBQSxHQUFBLEtBQUEsQ0FBQSxDQUFBLENBQUEsQ0FBQTtBQUNBLE1BQUEsQ0FBQSxNQUFBLEdBQUEsQ0FBQSxDQUFBO0FBQ0EsTUFBQSxDQUFBLEtBQUEsR0FBQSxJQUFBLENBQUE7O0FBRUEsTUFBQSxNQUFBLEdBQUEsR0FBQSxDQUFBLFNBQUEsQ0FBQSxHQUFBLENBQUEsQ0FDQSxJQUFBLENBQUEsS0FBQSxDQUFBLEtBQUEsQ0FBQSxDQUFBLENBQUEsQ0FBQSxDQUNBLEtBQUEsRUFBQSxDQUNBLE1BQUEsQ0FBQSxHQUFBLENBQUEsQ0FBQTs7QUFFQSxNQUFBLE9BQUEsR0FBQSxNQUFBLENBQUEsTUFBQSxDQUFBLFFBQUEsQ0FBQSxDQUNBLElBQUEsQ0FBQSxLQUFBLENBQUEsS0FBQSxDQUFBLENBQUEsQ0FBQSxDQUFBLENBQ0EsSUFBQSxDQUFBLEdBQUEsRUFBQSxVQUFBLENBQUEsRUFBQTtBQUFBLFVBQUEsQ0FBQSxDQUFBLE1BQUEsQ0FBQTtHQUFBLENBQUEsQ0FDQSxLQUFBLENBQUEsTUFBQSxFQUFBLFVBQUEsQ0FBQSxFQUFBLENBQUEsRUFBQTtBQUFBLFVBQUEsQ0FBQSxDQUFBLE9BQUEsQ0FBQTtHQUFBLENBQUEsQ0FBQTs7QUFFQSxNQUFBLEtBQUEsR0FBQSxNQUFBLENBQUEsTUFBQSxDQUFBLE1BQUEsQ0FBQSxDQUNBLElBQUEsQ0FBQSxVQUFBLENBQUEsRUFBQTtBQUFBLFVBQUEsQ0FBQSxDQUFBLEtBQUEsQ0FBQTtHQUFBLENBQUEsQ0FDQSxJQUFBLENBQUE7QUFDQSx1QkFBQSxFQUFBLFFBQUE7QUFDQSxnQkFBQSxFQUFBLFFBQUE7R0FDQSxDQUFBLENBQUE7O0FBR0EsT0FBQSxDQUFBLE9BQUEsQ0FBQSxJQUFBLENBQUEsQ0FDQSxNQUFBLENBQUEsVUFBQSxDQUFBLEVBQUEsQ0FBQSxFQUFBO0FBQUEsVUFBQSxDQUFBLEdBQUEsQ0FBQSxHQUFBLENBQUEsSUFBQSxDQUFBO0dBQUEsQ0FBQSxDQUNBLEtBQUEsQ0FBQSxLQUFBLENBQUEsQ0FBQTs7QUFHQSxNQUFBLFNBQUEsQ0FBQSxTQUFBLENBQUEsS0FBQSxDQUFBLFFBQUEsQ0FBQSxDQUFBLE1BQUEsR0FBQSxDQUFBLEVBQUE7QUFDQSxRQUFBLENBQUEsSUFBQSxDQUFBLENBQUEsS0FBQSxHQUFBLEdBQUEsRUFBQSxNQUFBLEdBQUEsR0FBQSxDQUFBLENBQUE7QUFBQSxHQUNBLE1BQUE7QUFDQSxTQUFBLENBQUEsSUFBQSxDQUFBLENBQUEsS0FBQSxHQUFBLEdBQUEsRUFBQSxNQUFBLEdBQUEsR0FBQSxDQUFBLENBQUE7QUFBQSxJQUNBOztBQUdBLE9BQUEsQ0FBQSxLQUFBLEVBQUEsQ0FBQTtBQUNBLFNBQUEsR0FBQSxLQUFBLENBQUE7O0FBRUEsT0FBQSxDQUFBLEVBQUEsQ0FBQSxNQUFBLEVBQUEsVUFBQSxDQUFBLEVBQUE7QUFDQSxPQUFBLENBQUEsR0FBQSxFQUFBLENBQUEsSUFBQSxDQUFBLFFBQUEsQ0FBQSxLQUFBLENBQUE7T0FDQSxDQUFBLEdBQUEsQ0FBQTtPQUNBLENBQUEsR0FBQSxLQUFBLENBQUEsTUFBQSxDQUFBOztBQUVBLFVBQUEsRUFBQSxDQUFBLEdBQUEsQ0FBQSxFQUFBLENBQUEsQ0FBQSxLQUFBLENBQUEsT0FBQSxDQUFBLEtBQUEsQ0FBQSxDQUFBLENBQUEsQ0FBQSxDQUFBLENBQUE7OztBQUFBLEFBR0EsTUFBQSxDQUFBLFNBQUEsQ0FBQSxRQUFBLENBQUEsQ0FDQSxJQUFBLENBQUEsSUFBQSxFQUFBLFVBQUEsQ0FBQSxFQUFBO0FBQUEsV0FBQSxDQUFBLENBQUEsQ0FBQSxDQUFBO0lBQUEsQ0FBQSxDQUNBLElBQUEsQ0FBQSxJQUFBLEVBQUEsVUFBQSxDQUFBLEVBQUE7QUFBQSxXQUFBLENBQUEsQ0FBQSxDQUFBLENBQUE7SUFBQSxDQUFBOzs7QUFBQSxBQUdBLE1BQUEsQ0FBQSxTQUFBLENBQUEsTUFBQSxDQUFBLENBQ0EsSUFBQSxDQUFBLEdBQUEsRUFBQSxVQUFBLENBQUEsRUFBQTtBQUFBLFdBQUEsQ0FBQSxDQUFBLENBQUEsQ0FBQTtJQUFBLENBQUEsQ0FDQSxJQUFBLENBQUEsR0FBQSxFQUFBLFVBQUEsQ0FBQSxFQUFBO0FBQUEsV0FBQSxDQUFBLENBQUEsQ0FBQSxDQUFBO0lBQUEsQ0FBQSxDQUFBO0dBQ0EsQ0FBQSxDQUFBOztBQUVBLEtBQUEsQ0FBQSxFQUFBLENBQUEsV0FBQSxFQUFBLFlBQUE7QUFDQSxPQUFBLEVBQUEsR0FBQSxFQUFBLENBQUEsS0FBQSxDQUFBLElBQUEsQ0FBQSxDQUFBO0FBQ0EsT0FBQSxDQUFBLEVBQUEsR0FBQSxFQUFBLENBQUEsQ0FBQSxDQUFBLENBQUE7QUFDQSxPQUFBLENBQUEsRUFBQSxHQUFBLEVBQUEsQ0FBQSxDQUFBLENBQUEsQ0FBQTtBQUNBLFFBQUEsQ0FBQSxNQUFBLEVBQUEsQ0FBQTtHQUNBLENBQUE7OztBQUFBLEFBR0EsTUFBQSxDQUFBLEVBQUEsR0FBQSxDQUFBLENBQUE7QUFDQSxNQUFBLENBQUEsRUFBQSxHQUFBLENBQUEsQ0FBQTs7QUFHQSxXQUFBLE9BQUEsQ0FBQSxJQUFBLEVBQUE7QUFDQSxPQUFBLENBQUEsR0FBQSxJQUFBLENBQUEsTUFBQSxHQUFBLEVBQUE7T0FDQSxHQUFBLEdBQUEsSUFBQSxDQUFBLENBQUEsR0FBQSxDQUFBO09BQ0EsR0FBQSxHQUFBLElBQUEsQ0FBQSxDQUFBLEdBQUEsQ0FBQTtPQUNBLEdBQUEsR0FBQSxJQUFBLENBQUEsQ0FBQSxHQUFBLENBQUE7T0FDQSxHQUFBLEdBQUEsSUFBQSxDQUFBLENBQUEsR0FBQSxDQUFBLENBQUE7QUFDQSxVQUFBLFVBQUEsSUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQTtBQUNBLFFBQUEsSUFBQSxDQUFBLEtBQUEsSUFBQSxJQUFBLENBQUEsS0FBQSxLQUFBLElBQUEsRUFBQTtBQUNBLFNBQUEsQ0FBQSxHQUFBLElBQUEsQ0FBQSxDQUFBLEdBQUEsSUFBQSxDQUFBLEtBQUEsQ0FBQSxDQUFBO1NBQ0EsQ0FBQSxHQUFBLElBQUEsQ0FBQSxDQUFBLEdBQUEsSUFBQSxDQUFBLEtBQUEsQ0FBQSxDQUFBO1NBQ0EsQ0FBQSxHQUFBLElBQUEsQ0FBQSxJQUFBLENBQUEsQ0FBQSxHQUFBLENBQUEsR0FBQSxDQUFBLEdBQUEsQ0FBQSxDQUFBO1NBQ0EsQ0FBQSxHQUFBLElBQUEsQ0FBQSxNQUFBLEdBQUEsSUFBQSxDQUFBLEtBQUEsQ0FBQSxNQUFBLENBQUE7O0FBRUEsU0FBQSxDQUFBLEdBQUEsQ0FBQSxFQUFBO0FBQ0EsT0FBQSxHQUFBLENBQUEsQ0FBQSxHQUFBLENBQUEsQ0FBQSxHQUFBLENBQUEsR0FBQSxHQUFBLENBQUE7QUFDQSxVQUFBLENBQUEsQ0FBQSxJQUFBLENBQUEsSUFBQSxDQUFBLENBQUE7QUFDQSxVQUFBLENBQUEsQ0FBQSxJQUFBLENBQUEsSUFBQSxDQUFBLENBQUE7QUFDQSxVQUFBLENBQUEsS0FBQSxDQUFBLENBQUEsSUFBQSxDQUFBLENBQUE7QUFDQSxVQUFBLENBQUEsS0FBQSxDQUFBLENBQUEsSUFBQSxDQUFBLENBQUE7TUFDQTtLQUNBO0FBQ0EsV0FBQSxFQUFBLEdBQUEsR0FBQSxJQUFBLEVBQUEsR0FBQSxHQUFBLElBQUEsRUFBQSxHQUFBLEdBQUEsSUFBQSxFQUFBLEdBQUEsR0FBQSxDQUFBO0lBQ0EsQ0FBQTtHQUNBO0VBQ0E7OztBQUFBLEFBR0EsS0FBQSxPQUFBLENBQUE7QUFDQSxLQUFBLFNBQUEsQ0FBQSxTQUFBLENBQUEsS0FBQSxDQUFBLFFBQUEsQ0FBQSxDQUFBLE1BQUEsR0FBQSxDQUFBLElBQUEsU0FBQSxDQUFBLFNBQUEsQ0FBQSxLQUFBLENBQUEsUUFBQSxDQUFBLENBQUEsTUFBQSxHQUFBLENBQUEsRUFBQTtBQUNBLFNBQUEsR0FBQSxJQUFBLENBQUE7RUFDQTs7QUFFQSxLQUFBLE9BQUEsRUFBQTtBQUNBLEdBQUEsQ0FBQSxlQUFBLENBQUEsQ0FBQSxHQUFBLENBQUEsRUFBQSxTQUFBLEVBQUEsTUFBQSxFQUFBLENBQUEsQ0FBQTtBQUNBLEdBQUEsQ0FBQSxnQkFBQSxDQUFBLENBQUEsR0FBQSxDQUFBLEVBQUEsU0FBQSxFQUFBLE9BQUEsRUFBQSxZQUFBLEVBQUEsTUFBQSxFQUFBLGVBQUEsRUFBQSxNQUFBLEVBQUEsUUFBQSxFQUFBLE9BQUEsRUFBQSxDQUFBLENBQUE7O0FBRUEsWUFBQSxDQUFBLFlBQUE7QUFDQSxJQUFBLENBQUEsZUFBQSxDQUFBLENBQUEsR0FBQSxDQUFBLEVBQUEsU0FBQSxFQUFBLEtBQUEsRUFBQSxlQUFBLEVBQUEsS0FBQSxFQUFBLGFBQUEsRUFBQSxRQUFBLEVBQUEsV0FBQSxFQUFBLE1BQUEsRUFBQSxhQUFBLEVBQUEsS0FBQSxFQUFBLE9BQUEsRUFBQSxPQUFBLEVBQUEsQ0FBQSxDQUFBO0dBQ0EsRUFBQSxHQUFBLENBQUEsQ0FBQTtFQUNBOztBQUVBLEtBQUEsU0FBQSxDQUFBLEtBQUEsRUFBQSxHQUFBLElBQUEsSUFBQSxDQUFBLE9BQUEsRUFBQTtBQUNBLHVCQUFBLEVBQUEsQ0FBQTtFQUNBOztBQUVBLFVBQUEsQ0FBQSxNQUFBLENBQUEsWUFBQTtBQUNBLE1BQUEsU0FBQSxDQUFBLEtBQUEsRUFBQSxHQUFBLElBQUEsSUFBQSxDQUFBLE9BQUEsRUFBQTtBQUNBLElBQUEsQ0FBQSxXQUFBLENBQUEsQ0FBQSxTQUFBLENBQUEsQ0FBQSxDQUFBOztBQUFBLEFBRUEsT0FBQSxPQUFBLEVBQUE7QUFDQSx5QkFBQSxFQUFBLENBQUE7SUFDQTtHQUNBLE1BQUE7QUFDQSxRQUFBLENBQUEsSUFBQSxFQUFBLENBQUE7R0FDQTtFQUNBLENBQUEsQ0FBQTtDQUNBLENBQUEsQ0FBQTs7QUN2TEEsR0FBQSxDQUFBLFVBQUEsQ0FBQSxhQUFBLEVBQUEsVUFBQSxNQUFBLEVBQUEsS0FBQSxFQUFBO0FBQ0EsT0FBQSxDQUFBLFFBQUEsR0FBQSxFQUFBLENBQUE7O0FBRUEsT0FBQSxDQUFBLFFBQUEsR0FBQSxZQUFBO0FBQ0EsUUFBQSxDQUFBLE9BQUEsR0FBQSxJQUFBLENBQUE7QUFDQSxRQUFBLENBQUEsSUFBQSxHQUFBLEtBQUEsQ0FBQTtBQUNBLFFBQUEsQ0FBQSxPQUFBLEdBQUEsS0FBQSxDQUFBO0FBQ0EsT0FBQSxDQUFBLElBQUEsQ0FBQSxjQUFBLEVBQUEsTUFBQSxDQUFBLFFBQUEsQ0FBQSxDQUNBLElBQUEsQ0FBQSxVQUFBLGVBQUEsRUFBQTtBQUNBLFNBQUEsQ0FBQSxPQUFBLEdBQUEsS0FBQSxDQUFBO0FBQ0EsU0FBQSxDQUFBLElBQUEsR0FBQSxJQUFBLENBQUE7QUFDQSxTQUFBLENBQUEsT0FBQSxHQUFBLGVBQUEsQ0FBQSxJQUFBLENBQUE7QUFDQSxTQUFBLENBQUEsUUFBQSxHQUFBLEVBQUEsQ0FBQTtHQUNBLENBQUEsQ0FBQTtFQUNBLENBQUE7O0FBRUEsS0FBQSxXQUFBLEdBQUEsQ0FBQSxDQUFBLFNBQUEsQ0FBQSxDQUFBO0FBQ0EsS0FBQSxPQUFBLEdBQUEsQ0FBQSxDQUFBLFVBQUEsQ0FBQSxDQUFBO0FBQ0EsS0FBQSxNQUFBLEdBQUEsQ0FBQSxDQUFBLG1CQUFBLENBQUEsQ0FBQTs7QUFFQSxZQUFBLENBQUEsS0FBQSxDQUFBLFlBQUE7QUFDQSxTQUFBLENBQUEsR0FBQSxDQUFBLEVBQUEsU0FBQSxFQUFBLElBQUEsRUFBQSxTQUFBLEVBQUEsR0FBQSxFQUFBLENBQUEsQ0FBQTtBQUNBLFFBQUEsQ0FBQSxHQUFBLENBQUEsRUFBQSxTQUFBLEVBQUEsT0FBQSxFQUFBLENBQUEsQ0FBQTtFQUVBLENBQUEsQ0FBQTtBQUNBLFFBQUEsQ0FBQSxLQUFBLENBQUEsWUFBQTtBQUNBLFNBQUEsQ0FBQSxHQUFBLENBQUEsRUFBQSxTQUFBLEVBQUEsR0FBQSxFQUFBLFNBQUEsRUFBQSxJQUFBLEVBQUEsQ0FBQSxDQUFBO0FBQ0EsUUFBQSxDQUFBLEdBQUEsQ0FBQSxFQUFBLFNBQUEsRUFBQSxNQUFBLEVBQUEsQ0FBQSxDQUFBO0VBQ0EsQ0FBQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLENBbUtBLENBQUEsQ0FBQTs7QUMvTEEsR0FBQSxDQUFBLE1BQUEsQ0FBQSxVQUFBLGNBQUEsRUFBQTtBQUNBLGVBQUEsQ0FDQSxLQUFBLENBQUEsTUFBQSxFQUFBO0FBQ0EsS0FBQSxFQUFBLEdBQUE7QUFDQSxhQUFBLEVBQUEseUJBQUE7QUFDQSxZQUFBLEVBQUEsVUFBQTtFQUNBLENBQUEsQ0FDQSxLQUFBLENBQUEsVUFBQSxFQUFBO0FBQ0EsS0FBQSxFQUFBLFdBQUE7QUFDQSxhQUFBLEVBQUEsNkJBQUE7QUFDQSxZQUFBLEVBQUEsYUFBQTtFQUNBLENBQUEsQ0FDQSxLQUFBLENBQUEsT0FBQSxFQUFBO0FBQ0EsS0FBQSxFQUFBLFFBQUE7QUFDQSxhQUFBLEVBQUEsMEJBQUE7QUFDQSxZQUFBLEVBQUEsV0FBQTtFQUNBLENBQUEsQ0FDQSxLQUFBLENBQUEsU0FBQSxFQUFBO0FBQ0EsS0FBQSxFQUFBLFVBQUE7QUFDQSxhQUFBLEVBQUEsNEJBQUE7QUFDQSxZQUFBLEVBQUEsYUFBQTtFQUNBLENBQUEsQ0FBQTtDQUNBLENBQUEsQ0FBQTs7QUFFQSxHQUFBLENBQUEsVUFBQSxDQUFBLFVBQUEsRUFBQSxVQUFBLE1BQUEsRUFBQSxNQUFBLEVBQUE7QUFDQSxPQUFBLENBQUEsTUFBQSxHQUFBLE1BQUEsQ0FBQTtBQUNBLEtBQUEsU0FBQSxHQUFBLENBQUEsQ0FBQTtBQUNBLEtBQUEsUUFBQSxHQUFBLENBQUEsQ0FBQSxXQUFBLENBQUEsQ0FBQTtBQUNBLEtBQUEsT0FBQSxHQUFBLFFBQUEsQ0FBQTtBQUNBLEtBQUEsSUFBQSxDQUFBO0FBQ0EsS0FBQSxTQUFBLEdBQUEsQ0FBQSxDQUFBLE1BQUEsQ0FBQSxDQUFBO0FBQ0EsS0FBQSxRQUFBLENBQUE7QUFDQSxLQUFBLElBQUEsR0FBQSxDQUFBLENBQUEsbUJBQUEsQ0FBQSxDQUFBO0FBQ0EsS0FBQSxNQUFBLEdBQUEsQ0FBQSxDQUFBLFdBQUEsQ0FBQSxDQUFBOztBQUVBLEtBQUEsU0FBQSxDQUFBLEtBQUEsRUFBQSxHQUFBLEdBQUEsRUFBQTtBQUNBLFVBQUEsR0FBQSxXQUFBLENBQUEsTUFBQSxFQUFBLElBQUEsQ0FBQSxDQUFBO0VBQ0EsTUFBQTtBQUNBLE1BQUEsS0FBQSxDQUFBO0FBQ0EsTUFBQSxDQUFBLElBQUEsQ0FBQSxVQUFBLEtBQUEsRUFBQTtBQUNBLFFBQUEsR0FBQSxDQUFBLEtBQUEsR0FBQSxDQUFBLENBQUEsR0FBQSxHQUFBLENBQUE7QUFDQSxJQUFBLENBQUEsSUFBQSxDQUFBLENBQUEsR0FBQSxDQUFBLEVBQUEsV0FBQSxFQUFBLGNBQUEsR0FBQSxLQUFBLEdBQUEsR0FBQSxFQUFBLENBQUEsQ0FBQTtHQUNBLENBQUEsQ0FBQTtBQUNBLFFBQUEsQ0FBQSxXQUFBLENBQUEsVUFBQSxDQUFBLENBQUEsV0FBQSxDQUFBLFNBQUEsQ0FBQSxDQUFBO0VBQ0E7O0FBRUEsVUFBQSxDQUFBLE1BQUEsQ0FBQSxZQUFBO0FBQ0EsZUFBQSxDQUFBLFFBQUEsQ0FBQSxDQUFBO0FBQ0EsTUFBQSxTQUFBLENBQUEsS0FBQSxFQUFBLEdBQUEsR0FBQSxFQUFBO0FBQ0EsSUFBQSxDQUFBLFdBQUEsQ0FBQSxDQUFBLFNBQUEsQ0FBQSxDQUFBLENBQUEsQ0FBQTtBQUNBLFdBQUEsR0FBQSxXQUFBLENBQUEsTUFBQSxFQUFBLElBQUEsQ0FBQSxDQUFBO0dBQ0E7RUFDQSxDQUFBLENBQUE7O0FBRUEsVUFBQSxNQUFBLEdBQUE7QUFDQSxXQUFBLEVBQUEsQ0FBQTtBQUNBLFVBQUEsQ0FBQSxHQUFBLENBQUEsRUFBQSxtQkFBQSxFQUFBLFVBQUEsR0FBQSxTQUFBLEdBQUEsQ0FBQSxFQUFBLEdBQUEsTUFBQSxFQUFBLENBQUEsQ0FBQTtBQUNBLFVBQUEsQ0FBQSxJQUFBLENBQUEsWUFBQSxFQUFBLFNBQUEsR0FBQSxDQUFBLEdBQUEsQ0FBQSxDQUFBLENBQUE7QUFDQSxNQUFBLEdBQUEsT0FBQSxDQUFBO0FBQ0EsU0FBQSxHQUFBLE9BQUEsSUFBQSxTQUFBLEdBQUEsQ0FBQSxHQUFBLENBQUEsQ0FBQSxDQUFBO0VBQ0E7Q0FDQSxDQUFBLENBQUE7O0FDN0RBLEdBQUEsQ0FBQSxVQUFBLENBQUEsYUFBQSxFQUFBLFVBQUEsTUFBQSxFQUFBO0FBQ0EsS0FBQSxTQUFBLEdBQUEsQ0FBQSxDQUFBLE1BQUEsQ0FBQSxDQUFBOztBQUdBLEtBQUEsUUFBQSxHQUFBLEtBQUEsQ0FBQTtBQUNBLEtBQUEsT0FBQSxDQUFBO0FBQ0EsVUFBQSxjQUFBLEdBQUE7QUFDQSxVQUFBLEdBQUEsSUFBQSxDQUFBO0FBQ0EsR0FBQSxDQUFBLFFBQUEsQ0FBQSxDQUFBLEtBQUEsQ0FBQSxZQUFBOztBQUVBLE9BQUEsVUFBQSxHQUFBLENBQUEsQ0FBQSxXQUFBLENBQUEsQ0FBQSxNQUFBLENBQUE7QUFDQSxPQUFBLFFBQUEsR0FBQSxJQUFBLENBQUE7QUFDQSxPQUFBLFNBQUEsR0FBQSxLQUFBLENBQUE7QUFDQSxPQUFBLFFBQUEsR0FBQSxZQUFBOzs7QUFBQSxBQUdBLFVBQUEsR0FBQSxRQUFBLENBQUEsTUFBQSxDQUFBLFFBQUEsQ0FBQSxJQUFBLENBQUEsS0FBQSxDQUFBLElBQUEsQ0FBQSxDQUFBLENBQUEsQ0FBQSxDQUFBLEdBQUEsQ0FBQSxJQUFBLENBQUEsQ0FBQTs7QUFFQSxRQUFBLElBQUEsQ0FBQSxHQUFBLENBQUEsRUFBQSxDQUFBLElBQUEsVUFBQSxFQUFBLENBQUEsRUFBQSxFQUFBO0FBQ0EsUUFBQSxDQUFBLEdBQUEsT0FBQSxFQUFBO0FBQ0EsTUFBQSxDQUFBLFFBQUEsR0FBQSxDQUFBLENBQUEsQ0FBQSxRQUFBLENBQUEsUUFBQSxDQUFBLENBQUEsUUFBQSxDQUFBLFVBQUEsQ0FBQSxDQUFBO0tBQ0EsTUFBQSxJQUFBLENBQUEsS0FBQSxPQUFBLEVBQUE7QUFDQSxNQUFBLENBQUEsUUFBQSxHQUFBLENBQUEsQ0FBQSxDQUFBLFFBQUEsQ0FBQSxRQUFBLENBQUEsQ0FBQSxXQUFBLENBQUEsVUFBQSxDQUFBLENBQUE7S0FDQSxNQUFBO0FBQ0EsTUFBQSxDQUFBLFFBQUEsR0FBQSxDQUFBLENBQUEsQ0FBQSxXQUFBLENBQUEsUUFBQSxDQUFBLENBQUEsV0FBQSxDQUFBLFVBQUEsQ0FBQSxDQUFBO0tBQ0E7SUFDQTs7QUFFQSxZQUFBLFVBQUEsR0FBQTtBQUNBLGFBQUEsR0FBQSxJQUFBLENBQUE7O0FBRUEsS0FBQSxDQUFBLFFBQUEsR0FBQSxPQUFBLENBQUEsQ0FBQSxXQUFBLENBQUEsVUFBQSxDQUFBLENBQUEsUUFBQSxDQUFBLFFBQUEsQ0FBQTs7QUFBQSxBQUVBLGNBQUEsQ0FBQSxZQUFBO0FBQ0EsY0FBQSxHQUFBLEtBQUEsQ0FBQTtLQUNBLEVBQUEsUUFBQSxDQUFBLENBQUE7SUFDQTs7QUFFQSxZQUFBLFVBQUEsR0FBQTtBQUNBLFFBQUEsT0FBQSxLQUFBLENBQUEsRUFBQSxPQUFBO0FBQ0EsV0FBQSxFQUFBLENBQUE7QUFDQSxLQUFBLENBQUEsUUFBQSxJQUFBLE9BQUEsR0FBQSxDQUFBLENBQUEsQ0FBQSxDQUFBLFdBQUEsQ0FBQSxRQUFBLENBQUE7O0FBQUEsQUFFQSxjQUFBLEVBQUEsQ0FBQTtJQUNBOztBQUVBLFlBQUEsWUFBQSxHQUFBO0FBQ0EsUUFBQSxPQUFBLEtBQUEsVUFBQSxFQUFBLE9BQUE7QUFDQSxXQUFBLEVBQUEsQ0FBQTtBQUNBLEtBQUEsQ0FBQSxRQUFBLElBQUEsT0FBQSxHQUFBLENBQUEsQ0FBQSxDQUFBLENBQUEsUUFBQSxDQUFBLFVBQUEsQ0FBQTs7QUFBQSxBQUVBLGNBQUEsRUFBQSxDQUFBO0lBQ0E7O0FBRUEsSUFBQSxDQUFBLFFBQUEsQ0FBQSxDQUFBLEdBQUEsRUFBQTs7QUFBQSxBQUVBLElBQUEsQ0FBQSxRQUFBLENBQUEsQ0FBQSxFQUFBLENBQUEsMkJBQUEsRUFBQSxVQUFBLENBQUEsRUFBQTtBQUNBLFFBQUEsU0FBQSxFQUFBLE9BQUE7QUFDQSxRQUFBLENBQUEsQ0FBQSxhQUFBLENBQUEsVUFBQSxHQUFBLENBQUEsSUFBQSxDQUFBLENBQUEsYUFBQSxDQUFBLE1BQUEsR0FBQSxDQUFBLEVBQUE7QUFDQSxlQUFBLEVBQUEsQ0FBQTtLQUNBLE1BQUE7QUFDQSxpQkFBQSxFQUFBLENBQUE7S0FDQTtJQUNBLENBQUEsQ0FBQTs7QUFFQSxJQUFBLENBQUEsUUFBQSxDQUFBLENBQUEsRUFBQSxDQUFBLFNBQUEsRUFBQSxVQUFBLENBQUEsRUFBQTtBQUNBLFFBQUEsU0FBQSxFQUFBLE9BQUE7QUFDQSxRQUFBLENBQUEsQ0FBQSxLQUFBLEtBQUEsRUFBQSxFQUFBO0FBQ0EsZUFBQSxFQUFBLENBQUE7S0FDQSxNQUFBLElBQUEsQ0FBQSxDQUFBLEtBQUEsS0FBQSxFQUFBLEVBQUE7QUFDQSxpQkFBQSxFQUFBLENBQUE7S0FDQTtJQUNBLENBQUEsQ0FBQTtHQUNBLENBQUEsQ0FBQTtFQUNBOztBQUVBLEtBQUEsU0FBQSxDQUFBLEtBQUEsRUFBQSxHQUFBLEdBQUEsRUFBQTtBQUNBLFNBQUEsQ0FBQSxHQUFBLENBQUEsbUJBQUEsQ0FBQSxDQUFBO0FBQ0EsZ0JBQUEsRUFBQSxDQUFBO0VBQ0E7O0FBRUEsVUFBQSxDQUFBLE1BQUEsQ0FBQSxZQUFBO0FBQ0EsTUFBQSxTQUFBLENBQUEsS0FBQSxFQUFBLEdBQUEsR0FBQSxFQUFBOzs7QUFHQSxPQUFBLENBQUEsUUFBQSxFQUFBO0FBQ0Esa0JBQUEsRUFBQSxDQUFBO0lBQ0E7R0FDQTtFQUNBLENBQUEsQ0FBQTtDQUNBLENBQUEsQ0FBQTs7QUMxRkEsR0FBQSxDQUFBLFNBQUEsQ0FBQSxnQkFBQSxFQUFBLFlBQUE7QUFDQSxRQUFBO0FBQ0EsVUFBQSxFQUFBLEdBQUE7QUFDQSxhQUFBLEVBQUEscUNBQUE7RUFDQSxDQUFBO0NBQ0EsQ0FBQSxDQUFBIiwiZmlsZSI6Im1haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyB3aW5kb3cuYXBwID0gYW5ndWxhci5tb2R1bGUoJ3BvcnRmb2xpbycsIFsndWkucm91dGVyJywgJ25nQW5pbWF0ZSddKTtcbndpbmRvdy5hcHAgPSBhbmd1bGFyLm1vZHVsZSgncG9ydGZvbGlvJywgWyd1aS5yb3V0ZXInXSk7XG5cblxuYXBwLmNvbmZpZyhmdW5jdGlvbiAoJHVybFJvdXRlclByb3ZpZGVyLCAkbG9jYXRpb25Qcm92aWRlciwgJHVybE1hdGNoZXJGYWN0b3J5UHJvdmlkZXIpIHtcblxuXHQvLyB0aGlzIG1ha2VzIHRoZSAnL3N0b3Jlcy8nIHJvdXRlIGNvcnJlY3RseSByZWRpcmVjdCB0byAnL3N0b3Jlcydcblx0JHVybFJvdXRlclByb3ZpZGVyLnJ1bGUoZnVuY3Rpb24gKCRpbmplY3RvciwgJGxvY2F0aW9uKSB7XG5cblx0XHR2YXIgcmUgPSAvKC4rKShcXC8rKShcXD8uKik/JC87XG5cdFx0dmFyIHBhdGggPSAkbG9jYXRpb24udXJsKCk7XG5cblx0XHRpZihyZS50ZXN0KHBhdGgpKSB7XG5cdFx0XHRyZXR1cm4gcGF0aC5yZXBsYWNlKHJlLCAnJDEkMycpO1xuXHRcdH1cblxuXHRcdHJldHVybiBmYWxzZTtcblx0fSk7XG5cdC8vIFRoaXMgdHVybnMgb2ZmIGhhc2hiYW5nIHVybHMgKC8jYWJvdXQpIGFuZCBjaGFuZ2VzIGl0IHRvIHNvbWV0aGluZyBub3JtYWwgKC9hYm91dClcblx0JGxvY2F0aW9uUHJvdmlkZXIuaHRtbDVNb2RlKHRydWUpO1xuXHQkdXJsUm91dGVyUHJvdmlkZXIud2hlbignL2F1dGgvOnByb3ZpZGVyJywgZnVuY3Rpb24gKCkge1xuXHRcdHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTtcblx0fSk7XG5cdC8vIElmIHdlIGdvIHRvIGEgVVJMIHRoYXQgdWktcm91dGVyIGRvZXNuJ3QgaGF2ZSByZWdpc3RlcmVkLCBnbyB0byB0aGUgXCIvXCIgdXJsLlxuXHQkdXJsUm91dGVyUHJvdmlkZXIub3RoZXJ3aXNlKCcvJyk7XG59KTtcbiIsImFwcC5jb250cm9sbGVyKCdhYm91dEN0cmwnLCBmdW5jdGlvbigkc2NvcGUpe1xuXHR2YXIgdGhlV2luZG93ID0gJCh3aW5kb3cpO1xuXHR2YXIgZm9yY2UgPSBkMy5sYXlvdXQuZm9yY2UoKTtcblx0dmFyIHN0b3BwZWQgPSB0cnVlO1xuXG5cdC8vIGFuZ3VsYXIuZWxlbWVudChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKXtcblx0JHNjb3BlLnNraWxscyA9IFtcblx0XHR7bmFtZTogXCJKYXZhU2NyaXB0XCIsIGxldmVsOiAzfSxcblx0XHR7bmFtZTogXCJNb25nb0RCXCIsIGxldmVsOiAzfSxcblx0XHR7bmFtZTogXCJFeHByZXNzLmpzXCIsIGxldmVsOiAzfSxcblx0XHR7bmFtZTogXCJBbmd1bGFyLmpzXCIsIGxldmVsOiAzfSxcblx0XHR7bmFtZTogXCJOb2RlLmpzXCIsIGxldmVsOiAzfSxcblx0XHR7bmFtZTogXCJNb25nb29zZS5qc1wiLCBsZXZlbDogM30sXG5cdFx0e25hbWU6IFwiR2l0XCIsIGxldmVsOiAzfSxcblx0XHR7bmFtZTogXCJDU1MzXCIsIGxldmVsOiAzfSxcblx0XHR7bmFtZTogXCJIVE1MNVwiLCBsZXZlbDogM30sXG5cdFx0e25hbWU6IFwiUmVzcG9uc2l2ZSBEZXNpZ25cIiwgbGV2ZWw6IDJ9LFxuXHRcdHtuYW1lOiBcIkd1bHBcIiwgbGV2ZWw6IDJ9LFxuXHRcdHtuYW1lOiBcIk1vY2hhICYgQ2hhaVwiLCBsZXZlbDogMn0sXG5cdFx0e25hbWU6IFwialF1ZXJ5XCIsIGxldmVsOiAyfSxcblx0XHR7bmFtZTogXCJCb290c3RyYXBcIiwgbGV2ZWw6IDJ9LFxuXHRcdHtuYW1lOiBcIldlYi1BdWRpb1wiLCBsZXZlbDogMn0sXG5cdFx0e25hbWU6IFwiQ2hyb21lIEV4dGVuc2lvbnNcIiwgbGV2ZWw6IDF9LFxuXHRcdHtuYW1lOiBcIlNRTFwiLCBsZXZlbDogMX0sXG5cdFx0e25hbWU6IFwiV2ViU29ja2V0c1wiLCBsZXZlbDogMX0sXG5cdFx0e25hbWU6IFwiTUlESVwiLCBsZXZlbDogMX0sXG5cdFx0e25hbWU6IFwiSmF2YVwiLCBsZXZlbDogMX0sXG5cdFx0e25hbWU6IFwiQysrXCIsIGxldmVsOiAxfSxcblx0XTtcblxuXHQkc2NvcGUuY29sb3JzID0gW1xuXHRcdCcjN0ZGRkQ0Jyxcblx0XHQnI0UwRkZGRicsXG5cdFx0JyMzM0NDRkYnLFxuXHRcdCcjQzY4OEU4Jyxcblx0XHQnI0ZGODA3RCcsXG5cdFx0JyNGRjhFQjInXG5cdF07XG5cblx0JHNjb3BlLnNraWxscy5tYXAoZnVuY3Rpb24oZSxpKXtcblx0XHRlLmNvbG9yID0gJHNjb3BlLmNvbG9yc1tpJTZdO1xuXHR9KTtcblxuZnVuY3Rpb24gaW5pdGlhbGl6ZVNraWxsc0Nsb3VkKCl7XG5cdHZhciBza2lsbHNDbG91ZCA9ICQoXCIjc2tpbGxzLWNsb3VkXCIpO1xuXHR2YXIgd2lkdGggPSBza2lsbHNDbG91ZC53aWR0aCgpO1xuXHR2YXIgaGVpZ2h0ID0gc2tpbGxzQ2xvdWQuaGVpZ2h0KCk7XG5cdHZhciBzdmcgPSBkMy5zZWxlY3QoXCIjc2tpbGxzLWNsb3VkXCIpLmFwcGVuZChcInN2Z1wiKTtcblxuXG5cdC8vY3JlYXRlIG5vZGVzXG5cdHZhciBub2RlcyA9IGQzLnJhbmdlKCRzY29wZS5za2lsbHMubGVuZ3RoKS5tYXAoZnVuY3Rpb24oaSkge1xuXHRcdHJldHVybiB7XG5cdFx0XHRyYWRpdXM6ICRzY29wZS5za2lsbHNbaV0ubGV2ZWwqMTggKzE0LFxuXHRcdFx0bGFiZWw6ICRzY29wZS5za2lsbHNbaV0ubmFtZSxcblx0XHRcdHNraWxsTGV2ZWw6ICRzY29wZS5za2lsbHNbaV0ubGV2ZWwsXG5cdFx0XHRiZ0NvbG9yOiAkc2NvcGUuc2tpbGxzW2ldLmNvbG9yXG5cdFx0fTtcblx0fSk7XG5cblx0dmFyXHRyb290ID0gbm9kZXNbMF07XG5cdFx0cm9vdC5yYWRpdXMgPSAwO1xuXHRcdHJvb3QuZml4ZWQgPSB0cnVlO1xuXG5cdHZhciBncm91cHMgPSBzdmcuc2VsZWN0QWxsKFwiZ1wiKVxuXHRcdC5kYXRhKG5vZGVzLnNsaWNlKDEpKVxuXHRcdC5lbnRlcigpXG5cdFx0LmFwcGVuZChcImdcIik7XG5cblx0dmFyIGNpcmNsZXMgPSBncm91cHMuYXBwZW5kKCdjaXJjbGUnKVxuXHRcdC5kYXRhKG5vZGVzLnNsaWNlKDEpKVxuXHRcdC5hdHRyKFwiclwiLCBmdW5jdGlvbihkKSB7IHJldHVybiBkLnJhZGl1czsgfSlcblx0XHQuc3R5bGUoXCJmaWxsXCIsIGZ1bmN0aW9uKGQsIGkpIHsgcmV0dXJuIGQuYmdDb2xvcjsgfSk7XG5cblx0dmFyIGxhYmVsID0gZ3JvdXBzLmFwcGVuZChcInRleHRcIilcblx0XHQudGV4dChmdW5jdGlvbihkKXsgcmV0dXJuIGQubGFiZWw7IH0pXG5cdFx0LmF0dHIoe1xuXHRcdFx0XCJhbGlnbm1lbnQtYmFzZWxpbmVcIjogXCJtaWRkbGVcIixcblx0XHRcdFwidGV4dC1hbmNob3JcIjogXCJtaWRkbGVcIixcblx0XHR9KTtcblxuXG5cdGZvcmNlLmdyYXZpdHkoMC4wNSlcblx0LmNoYXJnZShmdW5jdGlvbihkLCBpKSB7IHJldHVybiBpID8gMCA6IC0zMDAwOyB9KVxuXHQubm9kZXMobm9kZXMpO1xuXG5cblx0aWYgKG5hdmlnYXRvci51c2VyQWdlbnQuc3BsaXQoXCJDaHJvbWVcIikubGVuZ3RoIDwgMikge1xuXHRcdGZvcmNlLnNpemUoW3dpZHRoLTEwMCwgaGVpZ2h0KzYwMF0pOyAvL3NhZmFyaVxuXHR9IGVsc2Uge1xuXHRcdGZvcmNlLnNpemUoW3dpZHRoLTIwMCwgaGVpZ2h0LTMwMF0pOyAvL2Nocm9tZVxuXHR9XG5cblxuXHRmb3JjZS5zdGFydCgpO1xuXHRzdG9wcGVkID0gZmFsc2U7XG5cblx0Zm9yY2Uub24oXCJ0aWNrXCIsIGZ1bmN0aW9uKGUpIHtcblx0XHR2YXIgcSA9IGQzLmdlb20ucXVhZHRyZWUobm9kZXMpLFxuXHRcdFx0aSA9IDAsXG5cdFx0XHRuID0gbm9kZXMubGVuZ3RoO1xuXG5cdFx0d2hpbGUgKCsraSA8IG4pIHEudmlzaXQoY29sbGlkZShub2Rlc1tpXSkpO1xuXG5cdFx0Ly9tb3ZlIGNpcmNsZXNcblx0XHRzdmcuc2VsZWN0QWxsKFwiY2lyY2xlXCIpXG5cdFx0XHQuYXR0cihcImN4XCIsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGQueDsgfSlcblx0XHRcdC5hdHRyKFwiY3lcIiwgZnVuY3Rpb24oZCkgeyByZXR1cm4gZC55OyB9KTtcblxuXHRcdC8vbW92ZSBsYWJlbHNcblx0XHRzdmcuc2VsZWN0QWxsKFwidGV4dFwiKVxuXHRcdFx0LmF0dHIoXCJ4XCIsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGQueDsgfSlcblx0XHRcdC5hdHRyKFwieVwiLCBmdW5jdGlvbihkKSB7IHJldHVybiBkLnk7IH0pO1xuXHR9KTtcblxuXHRzdmcub24oXCJtb3VzZW1vdmVcIiwgZnVuY3Rpb24oKSB7XG5cdFx0dmFyIHAxID0gZDMubW91c2UodGhpcyk7XG5cdFx0cm9vdC5weCA9IHAxWzBdO1xuXHRcdHJvb3QucHkgPSBwMVsxXTtcblx0XHRmb3JjZS5yZXN1bWUoKTtcblx0fSk7XG5cbi8vU28gdGhleSBkb24ndCBhbGwgc3RhcnQgb3V0IGluIGEgc3RyYWlnaHQgbGluZVxuXHRyb290LnB4ID0gMTtcblx0cm9vdC5weSA9IDE7XG5cblxuXHRmdW5jdGlvbiBjb2xsaWRlKG5vZGUpIHtcblx0XHR2YXIgciA9IG5vZGUucmFkaXVzICsgMTYsXG5cdFx0XHRueDEgPSBub2RlLnggLSByLFxuXHRcdFx0bngyID0gbm9kZS54ICsgcixcblx0XHRcdG55MSA9IG5vZGUueSAtIHIsXG5cdFx0XHRueTIgPSBub2RlLnkgKyByO1xuXHRcdHJldHVybiBmdW5jdGlvbihxdWFkLCB4MSwgeTEsIHgyLCB5Mikge1xuXHRcdFx0aWYgKHF1YWQucG9pbnQgJiYgKHF1YWQucG9pbnQgIT09IG5vZGUpKSB7XG5cdFx0XHRcdHZhciB4ID0gbm9kZS54IC0gcXVhZC5wb2ludC54LFxuXHRcdFx0XHRcdHkgPSBub2RlLnkgLSBxdWFkLnBvaW50LnksXG5cdFx0XHRcdFx0bCA9IE1hdGguc3FydCh4ICogeCArIHkgKiB5KSxcblx0XHRcdFx0XHRyID0gbm9kZS5yYWRpdXMgKyBxdWFkLnBvaW50LnJhZGl1cztcblxuXHRcdFx0XHRpZiAobCA8IHIpIHtcblx0XHRcdFx0XHRsID0gKGwgLSByKSAvIGwgKiAwLjU7XG5cdFx0XHRcdFx0bm9kZS54IC09IHggKj0gbDtcblx0XHRcdFx0XHRub2RlLnkgLT0geSAqPSBsO1xuXHRcdFx0XHRcdHF1YWQucG9pbnQueCArPSB4O1xuXHRcdFx0XHRcdHF1YWQucG9pbnQueSArPSB5O1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4geDEgPiBueDIgfHwgeDIgPCBueDEgfHwgeTEgPiBueTIgfHwgeTIgPCBueTE7XG5cdFx0fTtcblx0fVxufVxuXHQvLyB9KTtcblxuXHR2YXIgZmlyZWZveDtcblx0aWYgKG5hdmlnYXRvci51c2VyQWdlbnQuc3BsaXQoXCJTYWZhcmlcIikubGVuZ3RoIDwgMiAmJiBuYXZpZ2F0b3IudXNlckFnZW50LnNwbGl0KFwiQ2hyb21lXCIpLmxlbmd0aCA8IDIpe1xuXHRcdGZpcmVmb3ggPSB0cnVlO1xuXHR9XG5cblx0aWYgKGZpcmVmb3gpe1xuXHRcdCQoJyNza2lsbHMtY2xvdWQnKS5jc3MoeydkaXNwbGF5Jzonbm9uZSd9KTtcblx0XHQkKCcjc2tpbGxzLW1vYmlsZScpLmNzcyh7J2Rpc3BsYXknOiAnYmxvY2snLCAnbWFyZ2luLXRvcCc6ICcyNHB4JyAsJ21hcmdpbi1ib3R0b20nOiAnNDRweCcsJ2hlaWdodCc6ICc3MDBweCd9KTtcblxuXHRcdHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcblx0XHRcdCQoJy5za2lsbC1jaXJjbGUnKS5jc3MoeydwYWRkaW5nJzogJzFweCcsJ3BhZGRpbmctcmlnaHQnOiAnMzIlJywgJ2ZvbnQtZmFtaWx5JzogJ094eWdlbicsICdmb250LXNpemUnOiAnMTlweCcsICdmb250LXdlaWdodCc6JzMwMCcsICdmbG9hdCc6J3JpZ2h0J30pO1xuXHRcdH0sNTAwKTtcblx0fVxuXG5cdGlmICh0aGVXaW5kb3cud2lkdGgoKSA+IDEwNzQgJiYgIWZpcmVmb3gpIHtcblx0XHRpbml0aWFsaXplU2tpbGxzQ2xvdWQoKTtcblx0fVxuXG5cdHRoZVdpbmRvdy5yZXNpemUoZnVuY3Rpb24oKSB7XG5cdFx0aWYgKHRoZVdpbmRvdy53aWR0aCgpID4gMTA3NCAmJiAhZmlyZWZveCkge1xuXHRcdFx0JCgnaHRtbCxib2R5Jykuc2Nyb2xsVG9wKDApO1xuXHRcdFx0Ly9zdGFydCAvIHJlc3RhcnQgbW91c2VvdmVyIGxpc3RlbmVyIGlmIHN0b3BwZWRcblx0XHRcdGlmIChzdG9wcGVkKSB7XG5cdFx0XHRcdGluaXRpYWxpemVTa2lsbHNDbG91ZCgpO1xuXHRcdFx0fVxuXHRcdH0gZWxzZSB7XG5cdFx0XHRmb3JjZS5zdG9wKCk7XG5cdFx0fVxuXHR9KTtcbn0pO1xuIiwiYXBwLmNvbnRyb2xsZXIoJ2NvbnRhY3RDdHJsJywgZnVuY3Rpb24oJHNjb3BlLCAkaHR0cCl7XG5cdCRzY29wZS5mb3JtRGF0YSA9IHt9O1xuXG5cdCRzY29wZS5zZW5kTWFpbCA9IGZ1bmN0aW9uKCl7XG5cdFx0JHNjb3BlLndhaXRpbmcgPSB0cnVlO1xuXHRcdCRzY29wZS5zZW50ID0gZmFsc2U7XG5cdFx0JHNjb3BlLnN1Y2Nlc3MgPSBmYWxzZTtcblx0XHQkaHR0cC5wb3N0KCcvYXBpL2NvbnRhY3QnLCAkc2NvcGUuZm9ybURhdGEpXG5cdFx0LnRoZW4oZnVuY3Rpb24oc3VjY2Vzc1Jlc3BvbnNlKXtcblx0XHRcdCRzY29wZS53YWl0aW5nID0gZmFsc2U7XG5cdFx0XHQkc2NvcGUuc2VudCA9IHRydWU7XG5cdFx0XHQkc2NvcGUuc3VjY2VzcyA9IHN1Y2Nlc3NSZXNwb25zZS5kYXRhO1xuXHRcdFx0JHNjb3BlLmZvcm1EYXRhID0ge307XG5cdFx0fSk7XG5cdH07XG5cblx0dmFyIHJlc3VtZUxhYmVsID0gJCgnI3Jlc3VtZScpO1xuXHR2YXIgb3ZlcmxheSA9ICQoJyNvdmVybGF5Jyk7XG5cdHZhciByZXN1bWUgPSAkKCcjcmVzdW1lLWNvbnRhaW5lcicpO1xuXG5cdHJlc3VtZUxhYmVsLmNsaWNrKGZ1bmN0aW9uKCl7XG5cdFx0b3ZlcmxheS5jc3MoeydvcGFjaXR5JzogJy43JywgJ3otaW5kZXgnOiAnMSd9KTtcblx0XHRyZXN1bWUuY3NzKHsnZGlzcGxheSc6ICdibG9jayd9KTtcblxuXHR9KTtcblx0b3ZlcmxheS5jbGljayhmdW5jdGlvbigpe1xuXHRcdG92ZXJsYXkuY3NzKHsnb3BhY2l0eSc6ICcwJywgJ3otaW5kZXgnOiAnLTEnfSk7XG5cdFx0cmVzdW1lLmNzcyh7J2Rpc3BsYXknOiAnbm9uZSd9KTtcblx0fSk7XG5cblx0Ly8gZnVuY3Rpb24gZXhwbG9kZSgpIHtcblx0Ly9cblx0Ly8gXHQkKCcjY2FudmFzJykuY3NzKHsnZGlzcGxheScgOiAnaW5pdGlhbCd9KTtcblx0Ly9cblx0Ly8gXHR2YXIgcmVxdWVzdElkO1xuXHQvL1xuXHQvLyBcdHZhciBjYW52YXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNhbnZhc1wiKSxcblx0Ly8gXHRcdGNvbnRleHQgPSBjYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpLFxuXHQvLyBcdFx0d2lkdGggPSBjYW52YXMud2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aCxcblx0Ly8gXHRcdGhlaWdodCA9IGNhbnZhcy5oZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQsXG5cdC8vIFx0XHRwYXJ0aWNsZSA9IFtdLFxuXHQvLyBcdFx0cGFydGljbGVDb3VudCA9IDAsXG5cdC8vIFx0XHRncmF2aXR5ID0gMC4zLFxuXHQvLyBcdFx0Y29sb3JzID0gWycjN0ZGRkQ0JywnI0UwRkZGRicsJyMzM0NDRkYnLCcjQzY4OEU4JywnI0ZGODA3RCcsJyNGRjhFQjInXTtcblx0Ly9cblx0Ly8gXHRmb3IoIHZhciBpID0gMDsgaSA8IDUwOyBpKyspe1xuXHQvLyBcdFx0cGFydGljbGUucHVzaCh7XG5cdC8vIFx0XHRcdHggOiB3aWR0aC8yLFxuXHQvLyBcdFx0XHR5IDogaGVpZ2h0LzIsXG5cdC8vIFx0XHRcdGJveFcgOiByYW5kb21SYW5nZSg1LDIwKSxcblx0Ly8gXHRcdFx0Ym94SCA6IHJhbmRvbVJhbmdlKDUsMjApLFxuXHQvLyBcdFx0XHRzaXplIDogcmFuZG9tUmFuZ2UoMiw4KSxcblx0Ly9cblx0Ly8gXHRcdFx0c3Bpa2VyYW46cmFuZG9tUmFuZ2UoMyw1KSxcblx0Ly9cblx0Ly8gXHRcdFx0dmVsWCA6cmFuZG9tUmFuZ2UoLTgsOCksXG5cdC8vIFx0XHRcdHZlbFkgOnJhbmRvbVJhbmdlKC01MCwtMTApLFxuXHQvL1xuXHQvLyBcdFx0XHRhbmdsZSA6Y29udmVydFRvUmFkaWFucyhyYW5kb21SYW5nZSgwLDM2MCkpLFxuXHQvLyBcdFx0XHRjb2xvcjpjb2xvcnNbTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogY29sb3JzLmxlbmd0aCldLFxuXHQvLyBcdFx0XHRhbmdsZXNwaW46cmFuZG9tUmFuZ2UoLTAuMiwwLjIpLFxuXHQvL1xuXHQvLyBcdFx0XHRkcmF3IDogZHJhd1xuXHQvLyBcdFx0fSk7XG5cdC8vIFx0fVxuXHQvL1xuXHQvLyBcdHZhciByMT17XG5cdC8vIFx0XHR4OndpZHRoLzItMTUwLFxuXHQvLyBcdFx0eTpoZWlnaHQvMi0xNTAsXG5cdC8vIFx0XHR3aWR0aDozMDAsXG5cdC8vIFx0XHRoZWlnaHQ6MzAwLFxuXHQvLyBcdFx0dmVsWCA6MCxcblx0Ly8gXHRcdHZlbFkgOi0xMCxcblx0Ly8gXHRcdGFscGhhdG9wOjBcblx0Ly8gXHR9O1xuXHQvL1xuXHQvL1xuXHQvLyBcdGZ1bmN0aW9uIGRyYXdTY3JlZW4oKXtcblx0Ly8gXHRcdHZhciBzaXplID0gNTA7XG5cdC8vIFx0XHRpZiAocjEuYWxwaGF0b3AgPCAxKXtcblx0Ly8gXHRcdFx0cjEuYWxwaGF0b3AgKz0gMC4wMTtcblx0Ly8gXHRcdH0gZWxzZXtcblx0Ly8gXHRcdFx0cjEuYWxwaGF0b3AgPSAxO1xuXHQvLyBcdFx0fVxuXHQvLyBcdFx0Y29udGV4dC5nbG9iYWxBbHBoYSA9IHIxLmFscGhhdG9wO1xuXHQvL1xuXHQvLyBcdFx0aWYocjEuYWxwaGF0b3AgPT09IDEpe1xuXHQvLyBcdFx0XHRyMS52ZWxZKj0gMC45OTk7XG5cdC8vIFx0XHRcdHIxLnZlbFkgKz0gMC4zO1xuXHQvLyBcdFx0XHRyMS54ICs9IHIxLnZlbFg7XG5cdC8vIFx0XHRcdHIxLnkgKz0gcjEudmVsWTtcblx0Ly8gXHRcdH1cblx0Ly9cblx0Ly8gXHRcdGlmKHIxLnkgKyByMS5oZWlnaHQgPiBoZWlnaHQpe1xuXHQvLyBcdFx0XHRyMS5hbmdsZXNwaW4gPSAwO1xuXHQvLyBcdFx0XHRyMS55ID0gaGVpZ2h0IC0gcjEuaGVpZ2h0O1xuXHQvLyBcdFx0XHRyMS52ZWxZICo9IC0wLjg7XG5cdC8vIFx0XHRcdHIxLnZlbFggKj0gMC45O1xuXHQvLyBcdFx0fVxuXHQvL1xuXHQvLyBcdFx0Y29udGV4dC5nbG9iYWxBbHBoYSA9IDE7XG5cdC8vXG5cdC8vIFx0XHRmb3IoIHZhciBpID0gMDsgaSA8IHBhcnRpY2xlLmxlbmd0aDsgaSsrKXtcblx0Ly8gXHRcdFx0cGFydGljbGVbaV0uZHJhdygpO1xuXHQvLyBcdFx0fVxuXHQvLyBcdH1cblx0Ly9cblx0Ly8gXHRmdW5jdGlvbiB1cGRhdGUoKXtcblx0Ly8gXHRcdGNvbnRleHQuY2xlYXJSZWN0KDAsMCx3aWR0aCxoZWlnaHQpO1xuXHQvLyBcdFx0ZHJhd1NjcmVlbigpO1xuXHQvLyBcdFx0cmVxdWVzdElkID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHVwZGF0ZSk7XG5cdC8vIFx0fVxuXHQvL1xuXHQvLyBcdHVwZGF0ZSgpO1xuXHQvL1xuXHQvLyBcdHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcblx0Ly8gXHRcdHdpbmRvdy5jYW5jZWxBbmltYXRpb25GcmFtZShyZXF1ZXN0SWQpO1xuXHQvLyBcdFx0cmVxdWVzdElkID0gdW5kZWZpbmVkO1xuXHQvLyBcdH0sNTAwMCk7XG5cdC8vXG5cdC8vIFx0ZnVuY3Rpb24gcmFuZG9tUmFuZ2UobWluLCBtYXgpe1xuXHQvLyBcdFx0cmV0dXJuIG1pbiArIE1hdGgucmFuZG9tKCkgKiAobWF4IC0gbWluICk7XG5cdC8vIFx0fVxuXHQvL1xuXHQvLyBcdGZ1bmN0aW9uIHJhbmRvbUludChtaW4sIG1heCl7XG5cdC8vIFx0XHRyZXR1cm4gTWF0aC5mbG9vcihtaW4gKyBNYXRoLnJhbmRvbSgpKiAobWF4IC0gbWluICsgMSkpO1xuXHQvLyBcdH1cblx0Ly9cblx0Ly8gXHRmdW5jdGlvbiBjb252ZXJ0VG9SYWRpYW5zKGRlZ3JlZSkge1xuXHQvLyBcdFx0cmV0dXJuIGRlZ3JlZSooTWF0aC5QSS8xODApO1xuXHQvLyBcdH1cblx0Ly9cblx0Ly8gXHRmdW5jdGlvbiBkcmF3U3RhcihjeCwgY3ksIHNwaWtlcywgb3V0ZXJSYWRpdXMsIGlubmVyUmFkaXVzLGNvbG9yKSB7XG5cdC8vIFx0XHR2YXIgcm90ID0gTWF0aC5QSSAvIDIgKiAzO1xuXHQvLyBcdFx0dmFyIHggPSBjeDtcblx0Ly8gXHRcdHZhciB5ID0gY3k7XG5cdC8vIFx0XHR2YXIgc3RlcCA9IE1hdGguUEkgLyBzcGlrZXM7XG5cdC8vXG5cdC8vIFx0XHRjb250ZXh0LnN0cm9rZVN5bGUgPSBcIiMwMDBcIjtcblx0Ly8gXHRcdGNvbnRleHQuYmVnaW5QYXRoKCk7XG5cdC8vIFx0XHRjb250ZXh0Lm1vdmVUbyhjeCwgY3kgLSBvdXRlclJhZGl1cyk7XG5cdC8vIFx0XHRmb3IgKGkgPSAwOyBpIDwgc3Bpa2VzOyBpKyspIHtcblx0Ly8gXHRcdFx0eCA9IGN4ICsgTWF0aC5jb3Mocm90KSAqIG91dGVyUmFkaXVzO1xuXHQvLyBcdFx0XHR5ID0gY3kgKyBNYXRoLnNpbihyb3QpICogb3V0ZXJSYWRpdXM7XG5cdC8vIFx0XHRcdGNvbnRleHQubGluZVRvKHgsIHkpO1xuXHQvLyBcdFx0XHRyb3QgKz0gc3RlcDtcblx0Ly9cblx0Ly8gXHRcdFx0eCA9IGN4ICsgTWF0aC5jb3Mocm90KSAqIGlubmVyUmFkaXVzO1xuXHQvLyBcdFx0XHR5ID0gY3kgKyBNYXRoLnNpbihyb3QpICogaW5uZXJSYWRpdXM7XG5cdC8vIFx0XHRcdGNvbnRleHQubGluZVRvKHgsIHkpO1xuXHQvLyBcdFx0XHRyb3QgKz0gc3RlcDtcblx0Ly8gXHRcdH1cblx0Ly9cblx0Ly8gXHRcdGNvbnRleHQubGluZVRvKGN4LCBjeSAtIG91dGVyUmFkaXVzKTtcblx0Ly8gXHRcdGNvbnRleHQuY2xvc2VQYXRoKCk7XG5cdC8vIFx0XHRjb250ZXh0LmZpbGxTdHlsZT1jb2xvcjtcblx0Ly8gXHRcdGNvbnRleHQuZmlsbCgpO1xuXHQvLyBcdH1cblx0Ly9cblx0Ly8gXHRmdW5jdGlvbiBkcmF3KCl7XG5cdC8vIFx0XHRjb250ZXh0LnNhdmUoKTtcblx0Ly8gXHRcdGNvbnRleHQudHJhbnNsYXRlKHRoaXMueCx0aGlzLnkpO1xuXHQvLyBcdFx0Y29udGV4dC5yb3RhdGUodGhpcy5hbmdsZSk7XG5cdC8vIFx0XHRjb250ZXh0LmZpbGxTdHlsZT10aGlzLmNvbG9yO1xuXHQvLyBcdFx0Y29udGV4dC5iZWdpblBhdGgoKTtcblx0Ly8gXHRcdC8vIGRyYXdTdGFyKDAsIDAsIDUsIHRoaXMuYm94VywgdGhpcy5ib3hIKTtcblx0Ly8gXHRcdGNvbnRleHQuZmlsbFJlY3QodGhpcy5ib3hXLzIqLTEsdGhpcy5ib3hILzIqLTEsdGhpcy5ib3hXLHRoaXMuYm94SCk7XG5cdC8vIFx0XHRjb250ZXh0LmZpbGwoKTtcblx0Ly8gXHRcdGNvbnRleHQuY2xvc2VQYXRoKCk7XG5cdC8vIFx0XHRjb250ZXh0LnJlc3RvcmUoKTtcblx0Ly8gXHRcdHRoaXMuYW5nbGUgKz0gdGhpcy5hbmdsZXNwaW47XG5cdC8vIFx0XHR0aGlzLnZlbFkqPSAwLjk5OTtcblx0Ly8gXHRcdHRoaXMudmVsWSArPSAwLjM7XG5cdC8vIFx0XHR0aGlzLnggKz0gdGhpcy52ZWxYO1xuXHQvLyBcdFx0dGhpcy55ICs9IHRoaXMudmVsWTtcblx0Ly9cblx0Ly8gXHRcdGlmKHRoaXMueSA8IDApe1xuXHQvLyBcdFx0XHR0aGlzLnZlbFkgKj0gLTAuMjtcblx0Ly8gXHRcdFx0dGhpcy52ZWxYICo9IDAuOTtcblx0Ly8gXHRcdH1cblx0Ly8gXHRcdGlmICh0aGlzLnkgPiBoZWlnaHQpe1xuXHQvLyBcdFx0XHR0aGlzLmFuZ2xlc3BpbiA9IDA7XG5cdC8vIFx0XHRcdHRoaXMueSA9IGhlaWdodDtcblx0Ly8gXHRcdFx0dGhpcy52ZWxZICo9IC0wLjI7XG5cdC8vIFx0XHRcdHRoaXMudmVsWCAqPSAwLjk7XG5cdC8vIFx0XHR9XG5cdC8vIFx0XHRpZiAodGhpcy54ID4gd2lkdGggfHx0aGlzLng8IDApe1xuXHQvLyBcdFx0XHR0aGlzLnZlbFggKj0gLTAuNTtcblx0Ly8gXHRcdH1cblx0Ly8gXHR9XG5cdC8vIH1cbn0pO1xuIiwiYXBwLmNvbmZpZyhmdW5jdGlvbigkc3RhdGVQcm92aWRlcil7XG5cdCRzdGF0ZVByb3ZpZGVyXG5cdC5zdGF0ZSgnaG9tZScsIHtcblx0XHR1cmw6ICcvJyxcblx0XHR0ZW1wbGF0ZVVybDogJy9qcy90ZW1wbGF0ZXMvaG9tZS5odG1sJyxcblx0XHRjb250cm9sbGVyOiAnaG9tZUN0cmwnXG5cdH0pXG5cdC5zdGF0ZSgncHJvamVjdHMnLCB7XG5cdFx0dXJsOiAnL3Byb2plY3RzJyxcblx0XHR0ZW1wbGF0ZVVybDogJy9qcy90ZW1wbGF0ZXMvcHJvamVjdHMuaHRtbCcsXG5cdFx0Y29udHJvbGxlcjogJ3Byb2plY3RDdHJsJ1xuXHR9KVxuXHQuc3RhdGUoJ2Fib3V0Jywge1xuXHRcdHVybDogJy9hYm91dCcsXG5cdFx0dGVtcGxhdGVVcmw6ICcvanMvdGVtcGxhdGVzL2Fib3V0Lmh0bWwnLFxuXHRcdGNvbnRyb2xsZXI6ICdhYm91dEN0cmwnXG5cdH0pXG5cdC5zdGF0ZSgnY29udGFjdCcsIHtcblx0XHR1cmw6ICcvY29udGFjdCcsXG5cdFx0dGVtcGxhdGVVcmw6ICcvanMvdGVtcGxhdGVzL2NvbnRhY3QuaHRtbCcsXG5cdFx0Y29udHJvbGxlcjogJ2NvbnRhY3RDdHJsJ1xuXHR9KTtcbn0pO1xuXG5hcHAuY29udHJvbGxlcignaG9tZUN0cmwnLCBmdW5jdGlvbigkc2NvcGUsICRzdGF0ZSl7XG5cdFx0JHNjb3BlLiRzdGF0ZSA9ICRzdGF0ZTtcblx0XHR2YXIgaW5jcmVtZW50ID0gMDtcblx0XHR2YXIgY2Fyb3VzZWwgPSAkKCcjY2Fyb3VzZWwnKTtcblx0XHR2YXIgY3VycmVudCA9ICcjZmlnLTEnO1xuXHRcdHZhciBwcmV2O1xuXHRcdHZhciB0aGVXaW5kb3cgPSAkKHdpbmRvdyk7XG5cdFx0dmFyIGludGVydmFsO1xuXHRcdHZhciBiYXJzID0gJCgnI3N0YXRpYy1iYXJzID4gbGknKTtcblx0XHR2YXIgaGVhZGVyID0gJCgnLmxlZnQtY29sJyk7XG5cblx0XHRpZiAodGhlV2luZG93LndpZHRoKCkgPiA3NjgpIHtcblx0XHRcdGludGVydmFsID0gc2V0SW50ZXJ2YWwocm90YXRlLDE1MDApO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR2YXIgc3BlZWQ7XG5cdFx0XHRiYXJzLmVhY2goZnVuY3Rpb24oaW5kZXgpe1xuXHRcdFx0XHRzcGVlZCA9IChpbmRleCArIDEpICogMC4zO1xuXHRcdFx0XHQkKHRoaXMpLmNzcyh7J2FuaW1hdGlvbic6J3NsaWRlSW5MZWZ0ICcgKyBzcGVlZCArICdzJ30pO1xuXHRcdFx0fSk7XG5cdFx0XHRoZWFkZXIucmVtb3ZlQ2xhc3MoXCJhbmltYXRlZFwiKS5yZW1vdmVDbGFzcygnZmxpcEluWCcpO1xuXHRcdH1cblxuXHRcdHRoZVdpbmRvdy5yZXNpemUoZnVuY3Rpb24oKSB7XG5cdFx0XHRjbGVhckludGVydmFsKGludGVydmFsKTtcblx0XHRcdGlmICh0aGVXaW5kb3cud2lkdGgoKSA+IDc2OCkge1xuXHRcdFx0XHQkKCdodG1sLGJvZHknKS5zY3JvbGxUb3AoMCk7XG5cdFx0XHRcdGludGVydmFsID0gc2V0SW50ZXJ2YWwocm90YXRlLDE1MDApO1xuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdFx0ZnVuY3Rpb24gcm90YXRlKCl7XG5cdFx0XHRpbmNyZW1lbnQrKztcblx0XHRcdGNhcm91c2VsLmNzcyh7Jy13ZWJraXQtdHJhbnNmb3JtJzogJ3JvdGF0ZVgoJyArIChpbmNyZW1lbnQgKiAtNjApICsgJ2RlZyknfSk7XG5cdFx0XHRjYXJvdXNlbC5hdHRyKCdkYXRhLXN0YXRlJywoaW5jcmVtZW50ICUgNikgKyAxKTtcblx0XHRcdHByZXYgPSBjdXJyZW50O1xuXHRcdFx0Y3VycmVudCA9ICcjZmlnLScgKyAoKGluY3JlbWVudCAlIDYpICsgMSk7XG5cdFx0fVxufSk7XG4iLCJhcHAuY29udHJvbGxlcigncHJvamVjdEN0cmwnLCBmdW5jdGlvbigkc2NvcGUpe1xuXHR2YXIgdGhlV2luZG93ID0gJCh3aW5kb3cpO1xuXG5cblx0dmFyIHNrZXdNb2RlID0gZmFsc2U7XG5cdHZhciBjdXJQYWdlO1xuXHRmdW5jdGlvbiBpbml0aWFsaXplU2tldygpe1xuXHRcdHNrZXdNb2RlID0gdHJ1ZTtcblx0XHQkKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpIHtcblxuXHRcdFx0dmFyIG51bU9mUGFnZXMgPSAkKFwiLnNrdy1wYWdlXCIpLmxlbmd0aDtcblx0XHRcdHZhciBhbmltVGltZSA9IDEwMDA7XG5cdFx0XHR2YXIgc2Nyb2xsaW5nID0gZmFsc2U7XG5cdFx0XHR2YXIgcGdQcmVmaXggPSBcIi5za3ctcGFnZS1cIjtcblx0XHRcdC8vIHZhciBwcm9nUHJlZml4ID0gXCIjcFwiO1xuXG5cdFx0XHRjdXJQYWdlID0gcGFyc2VJbnQod2luZG93LmxvY2F0aW9uLmhhc2guc3BsaXQoXCIjcFwiKVsxXSkgKyAxIHx8IDE7XG5cblx0XHRcdGZvciAodmFyIGkgPSAxOyBpIDw9IG51bU9mUGFnZXM7IGkrKyl7XG5cdFx0XHRcdGlmIChpIDwgY3VyUGFnZSkge1xuXHRcdFx0XHRcdCQocGdQcmVmaXggKyBpKS5hZGRDbGFzcyhcImFjdGl2ZVwiKS5hZGRDbGFzcyhcImluYWN0aXZlXCIpO1xuXHRcdFx0XHR9IGVsc2UgaWYgKGkgPT09IGN1clBhZ2Upe1xuXHRcdFx0XHRcdCQocGdQcmVmaXggKyBpKS5hZGRDbGFzcyhcImFjdGl2ZVwiKS5yZW1vdmVDbGFzcyhcImluYWN0aXZlXCIpO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdCQocGdQcmVmaXggKyBpKS5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKS5yZW1vdmVDbGFzcyhcImluYWN0aXZlXCIpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdGZ1bmN0aW9uIHBhZ2luYXRpb24oKXtcblx0XHRcdFx0c2Nyb2xsaW5nID0gdHJ1ZTtcblxuXHRcdFx0XHQkKHBnUHJlZml4ICsgY3VyUGFnZSkucmVtb3ZlQ2xhc3MoXCJpbmFjdGl2ZVwiKS5hZGRDbGFzcyhcImFjdGl2ZVwiKTtcblx0XHRcdFx0Ly8gJChwcm9nUHJlZml4ICsgY3VyUGFnZSkuYWRkQ2xhc3MoXCJjdXJyZW50XCIpO1xuXHRcdFx0XHRzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdHNjcm9sbGluZyA9IGZhbHNlO1xuXHRcdFx0XHR9LCBhbmltVGltZSk7XG5cdFx0XHR9XG5cblx0XHRcdGZ1bmN0aW9uIG5hdmlnYXRlVXAoKSB7XG5cdFx0XHRcdGlmIChjdXJQYWdlID09PSAxKSByZXR1cm47XG5cdFx0XHRcdGN1clBhZ2UtLTtcblx0XHRcdFx0JChwZ1ByZWZpeCArIChjdXJQYWdlICsgMSkpLnJlbW92ZUNsYXNzKFwiYWN0aXZlXCIpO1xuXHRcdFx0XHQvLyAkKHByb2dQcmVmaXggKyAoY3VyUGFnZSArIDEpKS5yZW1vdmVDbGFzcyhcImN1cnJlbnRcIik7XG5cdFx0XHRcdHBhZ2luYXRpb24oKTtcblx0XHRcdH1cblxuXHRcdFx0ZnVuY3Rpb24gbmF2aWdhdGVEb3duKCkge1xuXHRcdFx0XHRpZiAoY3VyUGFnZSA9PT0gbnVtT2ZQYWdlcykgcmV0dXJuO1xuXHRcdFx0XHRjdXJQYWdlKys7XG5cdFx0XHRcdCQocGdQcmVmaXggKyAoY3VyUGFnZSAtIDEpKS5hZGRDbGFzcyhcImluYWN0aXZlXCIpO1xuXHRcdFx0XHQvLyAkKHByb2dQcmVmaXggKyAoY3VyUGFnZSAtMSkpLnJlbW92ZUNsYXNzKFwiY3VycmVudFwiKTtcblx0XHRcdFx0cGFnaW5hdGlvbigpO1xuXHRcdFx0fVxuXG5cdFx0XHQkKGRvY3VtZW50KS5vZmYoKTsgLy9yZXNldCBldmVudCBsaXN0ZW5lcnNcblxuXHRcdFx0JChkb2N1bWVudCkub24oXCJtb3VzZXdoZWVsIERPTU1vdXNlU2Nyb2xsXCIsIGZ1bmN0aW9uKGUpIHtcblx0XHRcdFx0aWYgKHNjcm9sbGluZykgcmV0dXJuO1xuXHRcdFx0XHRpZiAoZS5vcmlnaW5hbEV2ZW50LndoZWVsRGVsdGEgPiAwICB8fCBlLm9yaWdpbmFsRXZlbnQuZGV0YWlsIDwgMCkge1xuXHRcdFx0XHRcdG5hdmlnYXRlVXAoKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRuYXZpZ2F0ZURvd24oKTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cblx0XHRcdCQoZG9jdW1lbnQpLm9uKFwia2V5ZG93blwiLCBmdW5jdGlvbihlKSB7XG5cdFx0XHRcdGlmIChzY3JvbGxpbmcpIHJldHVybjtcblx0XHRcdFx0aWYgKGUud2hpY2ggPT09IDM4KSB7XG5cdFx0XHRcdFx0bmF2aWdhdGVVcCgpO1xuXHRcdFx0XHR9IGVsc2UgaWYgKGUud2hpY2ggPT09IDQwKSB7XG5cdFx0XHRcdFx0bmF2aWdhdGVEb3duKCk7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdH0pO1xuXHR9XG5cblx0aWYgKHRoZVdpbmRvdy53aWR0aCgpID4gNzY4KSB7XG5cdFx0Y29uc29sZS5sb2coJ0lOSVRJQUxJWklORyBTS0VXJyk7XG5cdFx0aW5pdGlhbGl6ZVNrZXcoKTtcblx0fVxuXG5cdHRoZVdpbmRvdy5yZXNpemUoZnVuY3Rpb24oKSB7XG5cdFx0aWYgKHRoZVdpbmRvdy53aWR0aCgpID4gNzY4KSB7XG5cdFx0XHQvLyAkKCdodG1sLGJvZHknKS5zY3JvbGxUb3AoMCk7XG5cdFx0XHQvL3N0YXJ0IC8gcmVzdGFydCBtb3VzZW92ZXIgbGlzdGVuZXIgaWYgc3RvcHBlZFxuXHRcdFx0aWYgKCFza2V3TW9kZSkge1xuXHRcdFx0XHRpbml0aWFsaXplU2tldygpO1xuXHRcdFx0fVxuXHRcdH1cblx0fSk7XG59KTtcbiIsImFwcC5kaXJlY3RpdmUoJ3Byb2plY3RzTW9iaWxlJywgZnVuY3Rpb24oKXtcblx0cmV0dXJuIHtcblx0XHRyZXN0cmljdDogJ0UnLFxuXHRcdHRlbXBsYXRlVXJsOiAnL2pzL2RpcmVjdGl2ZXMvcHJvamVjdHMtbW9iaWxlLmh0bWwnXG5cdH07XG59KTtcbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
