'use strict';

window.app = angular.module('portfolio', ['ui.router']);

app.config(function ($urlRouterProvider, $locationProvider, $urlMatcherFactoryProvider) {

	// this makes the '/stores/' route correctly redirect to '/stores'
	$urlRouterProvider.rule(function ($injector, $location) {

		var re = /(.+)(\/+)(\?.*)?$/;
		var path = $location.url();

		if (re.test(path)) {
			return path.replace(re, '$1$3');
		}

		return false;
	});
	// This turns off hashbang urls (/#about) and changes it to something normal (/about)
	$locationProvider.html5Mode(true);
	$urlRouterProvider.when('/auth/:provider', function () {
		window.location.reload();
	});
	// If we go to a URL that ui-router doesn't have registered, go to the "/" url.
	$urlRouterProvider.otherwise('/');
});

app.controller('aboutCtrl', function ($scope) {

	// angular.element(document).ready(function(){
	var skillsCloud = $("#skills-cloud");
	var width = skillsCloud.width();
	var height = skillsCloud.height();

	var svg = d3.select("#skills-cloud").append("svg");

	var skills = [{ name: "JavaScript", level: 3 }, { name: "MongoDB", level: 3 }, { name: "Express.js", level: 3 }, { name: "Angular.js", level: 3 }, { name: "Node.js", level: 3 }, { name: "Mongoose.js", level: 3 }, { name: "Git", level: 3 }, { name: "CSS3", level: 3 }, { name: "HTML5", level: 3 }, { name: "Resonsive Design", level: 2 }, { name: "Gulp", level: 2 }, { name: "Mocha & Chai", level: 2 }, { name: "jQuery", level: 2 }, { name: "Bootstrap", level: 2 }, { name: "Web-Audio", level: 2 }, { name: "Chrome Extensions", level: 1 }, { name: "SQL", level: 1 }, { name: "WebSockets", level: 1 }, { name: "MIDI", level: 1 }, { name: "Java", level: 1 }, { name: "C++", level: 1 }];

	//create nodes
	var nodes = d3.range(skills.length).map(function (i) {
		return {
			radius: skills[i].level * 15 + 20,
			label: skills[i].name,
			skillLevel: skills[i].level
		};
	});

	//initialize variables and root node
	var root = nodes[0],
	   
	// color = d3.scale.category10();
	colors = ['#7FFFD4', '#E0FFFF', '#33CCFF', '#C688E8', '#FF807D', '#FF8EB2'];
	root.radius = 0;
	root.fixed = true;

	// console.log("nodes: ",nodes);

	// console.log("nodes 0:", nodes[0]);

	var groups = svg.selectAll("g").data(nodes.slice(1)).enter().append("g");

	// groups.attr("transform", function(d, i) {
	// 	var x = 78 * i + 100;
	// 	var y = 44 * i + 93;
	// 	return "translate(" + [x,y] + ")";
	// });

	var circles = groups.append('circle')
	// var circles = svg.selectAll("circle")
	.data(nodes.slice(1))
	// .enter()
	//.append("circle")
	.attr("r", function (d) {
		return d.radius;
	}).style("fill", function (d, i) {
		return colors[i % 6];
	});
	// .innerHTML("")

	var label = groups.append("text")
	// var label = circles.append("text")
	.text(function (d) {
		return d.label;
	}).attr({
		"alignment-baseline": "middle",
		"text-anchor": "middle"
	});

	// console.log(svg.selectAll("circle")[0][0]);

	var force = d3.layout.force().gravity(0.05).charge(function (d, i) {
		return i ? 0 : -2000;
	}).nodes(nodes).size([width, height]);

	force.start();

	force.on("tick", function (e) {
		var q = d3.geom.quadtree(nodes),
		    i = 0,
		    n = nodes.length;

		while (++i < n) q.visit(collide(nodes[i]));

		svg.selectAll("circle").attr("cx", function (d) {
			return d.x;
		}).attr("cy", function (d) {
			return d.y;
		});

		svg.selectAll("text").attr("x", function (d) {
			return d.x;
		}).attr("y", function (d) {
			return d.y;
		});
	});

	svg.on("mousemove", function () {
		var p1 = d3.mouse(this);
		root.px = p1[0];
		root.py = p1[1];
		force.resume();
	});

	function collide(node) {
		var r = node.radius + 16,
		    nx1 = node.x - r,
		    nx2 = node.x + r,
		    ny1 = node.y - r,
		    ny2 = node.y + r;
		return function (quad, x1, y1, x2, y2) {
			if (quad.point && quad.point !== node) {
				var x = node.x - quad.point.x,
				    y = node.y - quad.point.y,
				    l = Math.sqrt(x * x + y * y),
				    r = node.radius + quad.point.radius;
				if (l < r) {
					l = (l - r) / l * 0.5;
					node.x -= x *= l;
					node.y -= y *= l;
					quad.point.x += x;
					quad.point.y += y;
				}
			}
			return x1 > nx2 || x2 < nx1 || y1 > ny2 || y2 < ny1;
		};
	}

	// });
});

app.controller('contactCtrl', function ($scope, $http) {
	$scope.formData = {};

	$scope.sendMail = function () {
		$scope.waiting = true;
		$scope.sent = false;
		$scope.success = false;
		$http.post('/api/contact', $scope.formData).then(function (successResponse) {
			console.log(successResponse);
			$scope.waiting = false;
			$scope.sent = true;
			$scope.success = successResponse.data;
			$scope.formData = {};
		});
	};

	var card = $('#card');
	var note = $('.note');
	var toggle = true;

	card.click(function () {
		if (toggle) {
			card.removeClass('hidden').removeClass('initial').addClass('visible');
			// note.css({'display': 'initial'});
			setTimeout(explode, 500);
			setTimeout(function () {
				$('#canvas').css({ 'display': 'none' });
			}, 5000);
		} else {
			card.removeClass('visible').addClass('hidden');
			// note.css({'display': 'none'});
		}
		toggle = !toggle;
	});

	function explode() {

		$('#canvas').css({ 'display': 'initial' });

		var requestId;

		var canvas = document.getElementById("canvas"),
		    context = canvas.getContext("2d"),
		    width = canvas.width = window.innerWidth,
		    height = canvas.height = window.innerHeight,
		    particle = [],
		    particleCount = 0,
		    gravity = 0.3,
		    colors =
		// [
		// 	'#f44336', '#e91e63', '#9c27b0', '#673ab7', '#3f51b5',
		// 	'#2196f3', '#03a9f4', '#00bcd4', '#009688', '#4CAF50',
		// 	'#8BC34A', '#CDDC39', '#FFEB3B', '#FFC107', '#FF9800',
		// 	'#FF5722', '#795548'
		// ];
		['#7FFFD4', '#E0FFFF', '#33CCFF', '#C688E8', '#FF807D', '#FF8EB2'];

		for (var i = 0; i < 50; i++) {
			particle.push({
				x: width / 7,
				y: height / 2,
				boxW: randomRange(5, 20),
				boxH: randomRange(5, 20),
				size: randomRange(2, 8),

				spikeran: randomRange(3, 5),

				velX: randomRange(-8, 8),
				velY: randomRange(-50, -10),

				angle: convertToRadians(randomRange(0, 360)),
				color: colors[Math.floor(Math.random() * colors.length)],
				anglespin: randomRange(-0.2, 0.2),

				draw: draw
			});
		}

		var r1 = {
			x: width / 2 - 150,
			y: height / 2 - 150,
			width: 300,
			height: 300,
			velX: 0,
			velY: -10,
			alphatop: 0
		};

		function drawScreen() {
			var size = 50;
			if (r1.alphatop < 1) {
				r1.alphatop += 0.01;
			} else {
				r1.alphatop = 1;
			}
			context.globalAlpha = r1.alphatop;

			if (r1.alphatop === 1) {
				r1.velY *= 0.999;
				r1.velY += 0.3;
				r1.x += r1.velX;
				r1.y += r1.velY;
			}

			if (r1.y + r1.height > height) {
				r1.anglespin = 0;
				r1.y = height - r1.height;
				r1.velY *= -0.8;
				r1.velX *= 0.9;
			}

			context.globalAlpha = 1;

			for (var i = 0; i < particle.length; i++) {
				particle[i].draw();
			}
		}

		function update() {
			context.clearRect(0, 0, width, height);
			drawScreen();
			requestId = requestAnimationFrame(update);
		}

		update();

		setTimeout(function () {
			window.cancelAnimationFrame(requestId);
			requestId = undefined;
		}, 5000);

		function randomRange(min, max) {
			return min + Math.random() * (max - min);
		}

		function randomInt(min, max) {
			return Math.floor(min + Math.random() * (max - min + 1));
		}

		function convertToRadians(degree) {
			return degree * (Math.PI / 180);
		}

		function drawStar(cx, cy, spikes, outerRadius, innerRadius, color) {
			var rot = Math.PI / 2 * 3;
			var x = cx;
			var y = cy;
			var step = Math.PI / spikes;

			context.strokeSyle = "#000";
			context.beginPath();
			context.moveTo(cx, cy - outerRadius);
			for (i = 0; i < spikes; i++) {
				x = cx + Math.cos(rot) * outerRadius;
				y = cy + Math.sin(rot) * outerRadius;
				context.lineTo(x, y);
				rot += step;

				x = cx + Math.cos(rot) * innerRadius;
				y = cy + Math.sin(rot) * innerRadius;
				context.lineTo(x, y);
				rot += step;
			}

			context.lineTo(cx, cy - outerRadius);
			context.closePath();
			context.fillStyle = color;
			context.fill();
		}

		function draw() {
			context.save();
			context.translate(this.x, this.y);
			context.rotate(this.angle);
			context.fillStyle = this.color;
			context.beginPath();
			// drawStar(0, 0, 5, this.boxW, this.boxH);
			context.fillRect(this.boxW / 2 * -1, this.boxH / 2 * -1, this.boxW, this.boxH);
			context.fill();
			context.closePath();
			context.restore();
			this.angle += this.anglespin;
			this.velY *= 0.999;
			this.velY += 0.3;
			this.x += this.velX;
			this.y += this.velY;

			if (this.y < 0) {
				this.velY *= -0.2;
				this.velX *= 0.9;
			}
			if (this.y > height) {
				this.anglespin = 0;
				this.y = height;
				this.velY *= -0.2;
				this.velX *= 0.9;
			}
			if (this.x > width || this.x < 0) {
				this.velX *= -0.5;
			}
		}
	}
});

app.config(function ($stateProvider) {
	$stateProvider.state('home', {
		url: '/',
		templateUrl: '/js/templates/home.html',
		controller: 'homeCtrl'
	}).state('projects', {
		url: '/projects',
		templateUrl: '/js/templates/projects.html',
		controller: 'projectCtrl'
	}).state('about', {
		url: '/about',
		templateUrl: '/js/templates/about.html',
		controller: 'aboutCtrl'
	}).state('contact', {
		url: '/contact',
		templateUrl: '/js/templates/contact.html',
		controller: 'contactCtrl'
	});
});

app.controller('homeCtrl', function () {
	var increment = 0;
	var carousel = $('#carousel');
	var current = '#fig-1';
	var prev;
	setInterval(function () {
		increment++;
		carousel.css({
			'-webkit-transform': 'rotateX(' + increment * -60 + 'deg)'
		});
		carousel.attr('data-state', increment % 6 + 1);

		prev = current;
		current = '#fig-' + (increment % 6 + 1);
	}, 1500);

	// var circle1 = $('#circle-1');
	// console.log('$circle-1', circle1);
	// var circle2 = $('#circle-2');
	// // var circle3 = $('#circle-3');
	//
	// circle1.click(function(){
	// 	circle1.addClass('spin-clockwise');
	// 	setTimeout(function(){
	// 		circle2.addClass('spin-counterclockwise');
	// 	},500);
	// });
});

app.controller('projectCtrl', function ($scope) {
	$(document).ready(function () {

		var curPage = 1;
		var numOfPages = $(".skw-page").length;
		var animTime = 1000;
		var scrolling = false;
		var pgPrefix = ".skw-page-";

		function pagination() {
			scrolling = true;

			$(pgPrefix + curPage).removeClass("inactive").addClass("active");
			$(pgPrefix + (curPage - 1)).addClass("inactive");
			$(pgPrefix + (curPage + 1)).removeClass("active");

			setTimeout(function () {
				scrolling = false;
			}, animTime);
		}

		function navigateUp() {
			if (curPage === 1) return;
			curPage--;
			pagination();
		}

		function navigateDown() {
			if (curPage === numOfPages) return;
			curPage++;
			pagination();
		}

		$(document).on("mousewheel DOMMouseScroll", function (e) {
			if (scrolling) return;
			if (e.originalEvent.wheelDelta > 0 || e.originalEvent.detail < 0) {
				navigateUp();
			} else {
				navigateDown();
			}
		});

		$(document).on("keydown", function (e) {
			if (scrolling) return;
			if (e.which === 38) {
				navigateUp();
			} else if (e.which === 40) {
				navigateDown();
			}
		});

		$('#down-arrow').click(function () {
			if (scrolling) return;
			navigateDown();
		});
	});
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsImFib3V0LmpzIiwiY29udGFjdC5qcyIsImhvbWUuanMiLCJwcm9qZWN0LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsTUFBQSxDQUFBLEdBQUEsR0FBQSxPQUFBLENBQUEsTUFBQSxDQUFBLFdBQUEsRUFBQSxDQUFBLFdBQUEsQ0FBQSxDQUFBLENBQUE7O0FBRUEsR0FBQSxDQUFBLE1BQUEsQ0FBQSxVQUFBLGtCQUFBLEVBQUEsaUJBQUEsRUFBQSwwQkFBQSxFQUFBOzs7QUFHQSxtQkFBQSxDQUFBLElBQUEsQ0FBQSxVQUFBLFNBQUEsRUFBQSxTQUFBLEVBQUE7O0FBRUEsTUFBQSxFQUFBLEdBQUEsbUJBQUEsQ0FBQTtBQUNBLE1BQUEsSUFBQSxHQUFBLFNBQUEsQ0FBQSxHQUFBLEVBQUEsQ0FBQTs7QUFFQSxNQUFBLEVBQUEsQ0FBQSxJQUFBLENBQUEsSUFBQSxDQUFBLEVBQUE7QUFDQSxVQUFBLElBQUEsQ0FBQSxPQUFBLENBQUEsRUFBQSxFQUFBLE1BQUEsQ0FBQSxDQUFBO0dBQ0E7O0FBRUEsU0FBQSxLQUFBLENBQUE7RUFDQSxDQUFBOztBQUFBLEFBRUEsa0JBQUEsQ0FBQSxTQUFBLENBQUEsSUFBQSxDQUFBLENBQUE7QUFDQSxtQkFBQSxDQUFBLElBQUEsQ0FBQSxpQkFBQSxFQUFBLFlBQUE7QUFDQSxRQUFBLENBQUEsUUFBQSxDQUFBLE1BQUEsRUFBQSxDQUFBO0VBQ0EsQ0FBQTs7QUFBQSxBQUVBLG1CQUFBLENBQUEsU0FBQSxDQUFBLEdBQUEsQ0FBQSxDQUFBO0NBQ0EsQ0FBQSxDQUFBOztBQ3ZCQSxHQUFBLENBQUEsVUFBQSxDQUFBLFdBQUEsRUFBQSxVQUFBLE1BQUEsRUFBQTs7O0FBR0EsS0FBQSxXQUFBLEdBQUEsQ0FBQSxDQUFBLGVBQUEsQ0FBQSxDQUFBO0FBQ0EsS0FBQSxLQUFBLEdBQUEsV0FBQSxDQUFBLEtBQUEsRUFBQSxDQUFBO0FBQ0EsS0FBQSxNQUFBLEdBQUEsV0FBQSxDQUFBLE1BQUEsRUFBQSxDQUFBOztBQUVBLEtBQUEsR0FBQSxHQUFBLEVBQUEsQ0FBQSxNQUFBLENBQUEsZUFBQSxDQUFBLENBQUEsTUFBQSxDQUFBLEtBQUEsQ0FBQSxDQUFBOztBQUVBLEtBQUEsTUFBQSxHQUFBLENBQ0EsRUFBQSxJQUFBLEVBQUEsWUFBQSxFQUFBLEtBQUEsRUFBQSxDQUFBLEVBQUEsRUFDQSxFQUFBLElBQUEsRUFBQSxTQUFBLEVBQUEsS0FBQSxFQUFBLENBQUEsRUFBQSxFQUNBLEVBQUEsSUFBQSxFQUFBLFlBQUEsRUFBQSxLQUFBLEVBQUEsQ0FBQSxFQUFBLEVBQ0EsRUFBQSxJQUFBLEVBQUEsWUFBQSxFQUFBLEtBQUEsRUFBQSxDQUFBLEVBQUEsRUFDQSxFQUFBLElBQUEsRUFBQSxTQUFBLEVBQUEsS0FBQSxFQUFBLENBQUEsRUFBQSxFQUNBLEVBQUEsSUFBQSxFQUFBLGFBQUEsRUFBQSxLQUFBLEVBQUEsQ0FBQSxFQUFBLEVBQ0EsRUFBQSxJQUFBLEVBQUEsS0FBQSxFQUFBLEtBQUEsRUFBQSxDQUFBLEVBQUEsRUFDQSxFQUFBLElBQUEsRUFBQSxNQUFBLEVBQUEsS0FBQSxFQUFBLENBQUEsRUFBQSxFQUNBLEVBQUEsSUFBQSxFQUFBLE9BQUEsRUFBQSxLQUFBLEVBQUEsQ0FBQSxFQUFBLEVBQ0EsRUFBQSxJQUFBLEVBQUEsa0JBQUEsRUFBQSxLQUFBLEVBQUEsQ0FBQSxFQUFBLEVBQ0EsRUFBQSxJQUFBLEVBQUEsTUFBQSxFQUFBLEtBQUEsRUFBQSxDQUFBLEVBQUEsRUFDQSxFQUFBLElBQUEsRUFBQSxjQUFBLEVBQUEsS0FBQSxFQUFBLENBQUEsRUFBQSxFQUNBLEVBQUEsSUFBQSxFQUFBLFFBQUEsRUFBQSxLQUFBLEVBQUEsQ0FBQSxFQUFBLEVBQ0EsRUFBQSxJQUFBLEVBQUEsV0FBQSxFQUFBLEtBQUEsRUFBQSxDQUFBLEVBQUEsRUFDQSxFQUFBLElBQUEsRUFBQSxXQUFBLEVBQUEsS0FBQSxFQUFBLENBQUEsRUFBQSxFQUNBLEVBQUEsSUFBQSxFQUFBLG1CQUFBLEVBQUEsS0FBQSxFQUFBLENBQUEsRUFBQSxFQUNBLEVBQUEsSUFBQSxFQUFBLEtBQUEsRUFBQSxLQUFBLEVBQUEsQ0FBQSxFQUFBLEVBQ0EsRUFBQSxJQUFBLEVBQUEsWUFBQSxFQUFBLEtBQUEsRUFBQSxDQUFBLEVBQUEsRUFDQSxFQUFBLElBQUEsRUFBQSxNQUFBLEVBQUEsS0FBQSxFQUFBLENBQUEsRUFBQSxFQUNBLEVBQUEsSUFBQSxFQUFBLE1BQUEsRUFBQSxLQUFBLEVBQUEsQ0FBQSxFQUFBLEVBQ0EsRUFBQSxJQUFBLEVBQUEsS0FBQSxFQUFBLEtBQUEsRUFBQSxDQUFBLEVBQUEsQ0FHQTs7O0FBQUEsQUFHQSxLQUFBLEtBQUEsR0FBQSxFQUFBLENBQUEsS0FBQSxDQUFBLE1BQUEsQ0FBQSxNQUFBLENBQUEsQ0FBQSxHQUFBLENBQUEsVUFBQSxDQUFBLEVBQUE7QUFDQSxTQUFBO0FBQ0EsU0FBQSxFQUFBLE1BQUEsQ0FBQSxDQUFBLENBQUEsQ0FBQSxLQUFBLEdBQUEsRUFBQSxHQUFBLEVBQUE7QUFDQSxRQUFBLEVBQUEsTUFBQSxDQUFBLENBQUEsQ0FBQSxDQUFBLElBQUE7QUFDQSxhQUFBLEVBQUEsTUFBQSxDQUFBLENBQUEsQ0FBQSxDQUFBLEtBQUE7R0FDQSxDQUFBO0VBQ0EsQ0FBQTs7O0FBQUEsQUFHQSxLQUFBLElBQUEsR0FBQSxLQUFBLENBQUEsQ0FBQSxDQUFBOzs7QUFFQSxPQUFBLEdBQUEsQ0FBQSxTQUFBLEVBQUEsU0FBQSxFQUFBLFNBQUEsRUFBQSxTQUFBLEVBQUEsU0FBQSxFQUFBLFNBQUEsQ0FBQSxDQUFBO0FBQ0EsS0FBQSxDQUFBLE1BQUEsR0FBQSxDQUFBLENBQUE7QUFDQSxLQUFBLENBQUEsS0FBQSxHQUFBLElBQUE7Ozs7OztBQUFBLEFBT0EsS0FBQSxNQUFBLEdBQUEsR0FBQSxDQUFBLFNBQUEsQ0FBQSxHQUFBLENBQUEsQ0FDQSxJQUFBLENBQUEsS0FBQSxDQUFBLEtBQUEsQ0FBQSxDQUFBLENBQUEsQ0FBQSxDQUNBLEtBQUEsRUFBQSxDQUNBLE1BQUEsQ0FBQSxHQUFBLENBQUE7Ozs7Ozs7O0FBQUEsQUFRQSxLQUFBLE9BQUEsR0FBQSxNQUFBLENBQUEsTUFBQSxDQUFBLFFBQUE7O0FBQUEsRUFFQSxJQUFBLENBQUEsS0FBQSxDQUFBLEtBQUEsQ0FBQSxDQUFBLENBQUE7OztBQUFBLEVBR0EsSUFBQSxDQUFBLEdBQUEsRUFBQSxVQUFBLENBQUEsRUFBQTtBQUFBLFNBQUEsQ0FBQSxDQUFBLE1BQUEsQ0FBQTtFQUFBLENBQUEsQ0FDQSxLQUFBLENBQUEsTUFBQSxFQUFBLFVBQUEsQ0FBQSxFQUFBLENBQUEsRUFBQTtBQUNBLFNBQUEsTUFBQSxDQUFBLENBQUEsR0FBQSxDQUFBLENBQUEsQ0FBQTtFQUNBLENBQUE7OztBQUFBLEFBR0EsS0FBQSxLQUFBLEdBQUEsTUFBQSxDQUFBLE1BQUEsQ0FBQSxNQUFBOztBQUFBLEVBRUEsSUFBQSxDQUFBLFVBQUEsQ0FBQSxFQUFBO0FBQ0EsU0FBQSxDQUFBLENBQUEsS0FBQSxDQUFBO0VBQ0EsQ0FBQSxDQUNBLElBQUEsQ0FBQTtBQUNBLHNCQUFBLEVBQUEsUUFBQTtBQUNBLGVBQUEsRUFBQSxRQUFBO0VBQ0EsQ0FBQTs7OztBQUFBLEFBSUEsS0FBQSxLQUFBLEdBQUEsRUFBQSxDQUFBLE1BQUEsQ0FBQSxLQUFBLEVBQUEsQ0FDQSxPQUFBLENBQUEsSUFBQSxDQUFBLENBQ0EsTUFBQSxDQUFBLFVBQUEsQ0FBQSxFQUFBLENBQUEsRUFBQTtBQUFBLFNBQUEsQ0FBQSxHQUFBLENBQUEsR0FBQSxDQUFBLElBQUEsQ0FBQTtFQUFBLENBQUEsQ0FDQSxLQUFBLENBQUEsS0FBQSxDQUFBLENBQ0EsSUFBQSxDQUFBLENBQUEsS0FBQSxFQUFBLE1BQUEsQ0FBQSxDQUFBLENBQUE7O0FBRUEsTUFBQSxDQUFBLEtBQUEsRUFBQSxDQUFBOztBQUVBLE1BQUEsQ0FBQSxFQUFBLENBQUEsTUFBQSxFQUFBLFVBQUEsQ0FBQSxFQUFBO0FBQ0EsTUFBQSxDQUFBLEdBQUEsRUFBQSxDQUFBLElBQUEsQ0FBQSxRQUFBLENBQUEsS0FBQSxDQUFBO01BQ0EsQ0FBQSxHQUFBLENBQUE7TUFDQSxDQUFBLEdBQUEsS0FBQSxDQUFBLE1BQUEsQ0FBQTs7QUFFQSxTQUFBLEVBQUEsQ0FBQSxHQUFBLENBQUEsRUFBQSxDQUFBLENBQUEsS0FBQSxDQUFBLE9BQUEsQ0FBQSxLQUFBLENBQUEsQ0FBQSxDQUFBLENBQUEsQ0FBQSxDQUFBOztBQUVBLEtBQUEsQ0FBQSxTQUFBLENBQUEsUUFBQSxDQUFBLENBQ0EsSUFBQSxDQUFBLElBQUEsRUFBQSxVQUFBLENBQUEsRUFBQTtBQUFBLFVBQUEsQ0FBQSxDQUFBLENBQUEsQ0FBQTtHQUFBLENBQUEsQ0FDQSxJQUFBLENBQUEsSUFBQSxFQUFBLFVBQUEsQ0FBQSxFQUFBO0FBQUEsVUFBQSxDQUFBLENBQUEsQ0FBQSxDQUFBO0dBQUEsQ0FBQSxDQUFBOztBQUVBLEtBQUEsQ0FBQSxTQUFBLENBQUEsTUFBQSxDQUFBLENBQ0EsSUFBQSxDQUFBLEdBQUEsRUFBQSxVQUFBLENBQUEsRUFBQTtBQUFBLFVBQUEsQ0FBQSxDQUFBLENBQUEsQ0FBQTtHQUFBLENBQUEsQ0FDQSxJQUFBLENBQUEsR0FBQSxFQUFBLFVBQUEsQ0FBQSxFQUFBO0FBQUEsVUFBQSxDQUFBLENBQUEsQ0FBQSxDQUFBO0dBQUEsQ0FBQSxDQUFBO0VBQ0EsQ0FBQSxDQUFBOztBQUVBLElBQUEsQ0FBQSxFQUFBLENBQUEsV0FBQSxFQUFBLFlBQUE7QUFDQSxNQUFBLEVBQUEsR0FBQSxFQUFBLENBQUEsS0FBQSxDQUFBLElBQUEsQ0FBQSxDQUFBO0FBQ0EsTUFBQSxDQUFBLEVBQUEsR0FBQSxFQUFBLENBQUEsQ0FBQSxDQUFBLENBQUE7QUFDQSxNQUFBLENBQUEsRUFBQSxHQUFBLEVBQUEsQ0FBQSxDQUFBLENBQUEsQ0FBQTtBQUNBLE9BQUEsQ0FBQSxNQUFBLEVBQUEsQ0FBQTtFQUNBLENBQUEsQ0FBQTs7QUFFQSxVQUFBLE9BQUEsQ0FBQSxJQUFBLEVBQUE7QUFDQSxNQUFBLENBQUEsR0FBQSxJQUFBLENBQUEsTUFBQSxHQUFBLEVBQUE7TUFDQSxHQUFBLEdBQUEsSUFBQSxDQUFBLENBQUEsR0FBQSxDQUFBO01BQ0EsR0FBQSxHQUFBLElBQUEsQ0FBQSxDQUFBLEdBQUEsQ0FBQTtNQUNBLEdBQUEsR0FBQSxJQUFBLENBQUEsQ0FBQSxHQUFBLENBQUE7TUFDQSxHQUFBLEdBQUEsSUFBQSxDQUFBLENBQUEsR0FBQSxDQUFBLENBQUE7QUFDQSxTQUFBLFVBQUEsSUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQTtBQUNBLE9BQUEsSUFBQSxDQUFBLEtBQUEsSUFBQSxJQUFBLENBQUEsS0FBQSxLQUFBLElBQUEsRUFBQTtBQUNBLFFBQUEsQ0FBQSxHQUFBLElBQUEsQ0FBQSxDQUFBLEdBQUEsSUFBQSxDQUFBLEtBQUEsQ0FBQSxDQUFBO1FBQ0EsQ0FBQSxHQUFBLElBQUEsQ0FBQSxDQUFBLEdBQUEsSUFBQSxDQUFBLEtBQUEsQ0FBQSxDQUFBO1FBQ0EsQ0FBQSxHQUFBLElBQUEsQ0FBQSxJQUFBLENBQUEsQ0FBQSxHQUFBLENBQUEsR0FBQSxDQUFBLEdBQUEsQ0FBQSxDQUFBO1FBQ0EsQ0FBQSxHQUFBLElBQUEsQ0FBQSxNQUFBLEdBQUEsSUFBQSxDQUFBLEtBQUEsQ0FBQSxNQUFBLENBQUE7QUFDQSxRQUFBLENBQUEsR0FBQSxDQUFBLEVBQUE7QUFDQSxNQUFBLEdBQUEsQ0FBQSxDQUFBLEdBQUEsQ0FBQSxDQUFBLEdBQUEsQ0FBQSxHQUFBLEdBQUEsQ0FBQTtBQUNBLFNBQUEsQ0FBQSxDQUFBLElBQUEsQ0FBQSxJQUFBLENBQUEsQ0FBQTtBQUNBLFNBQUEsQ0FBQSxDQUFBLElBQUEsQ0FBQSxJQUFBLENBQUEsQ0FBQTtBQUNBLFNBQUEsQ0FBQSxLQUFBLENBQUEsQ0FBQSxJQUFBLENBQUEsQ0FBQTtBQUNBLFNBQUEsQ0FBQSxLQUFBLENBQUEsQ0FBQSxJQUFBLENBQUEsQ0FBQTtLQUNBO0lBQ0E7QUFDQSxVQUFBLEVBQUEsR0FBQSxHQUFBLElBQUEsRUFBQSxHQUFBLEdBQUEsSUFBQSxFQUFBLEdBQUEsR0FBQSxJQUFBLEVBQUEsR0FBQSxHQUFBLENBQUE7R0FDQSxDQUFBO0VBQ0E7OztDQUlBLENBQUEsQ0FBQTtBQUpBO0FDL0lBLEdBQUEsQ0FBQSxVQUFBLENBQUEsYUFBQSxFQUFBLFVBQUEsTUFBQSxFQUFBLEtBQUEsRUFBQTtBQUNBLE9BQUEsQ0FBQSxRQUFBLEdBQUEsRUFBQSxDQUFBOztBQUVBLE9BQUEsQ0FBQSxRQUFBLEdBQUEsWUFBQTtBQUNBLFFBQUEsQ0FBQSxPQUFBLEdBQUEsSUFBQSxDQUFBO0FBQ0EsUUFBQSxDQUFBLElBQUEsR0FBQSxLQUFBLENBQUE7QUFDQSxRQUFBLENBQUEsT0FBQSxHQUFBLEtBQUEsQ0FBQTtBQUNBLE9BQUEsQ0FBQSxJQUFBLENBQUEsY0FBQSxFQUFBLE1BQUEsQ0FBQSxRQUFBLENBQUEsQ0FDQSxJQUFBLENBQUEsVUFBQSxlQUFBLEVBQUE7QUFDQSxVQUFBLENBQUEsR0FBQSxDQUFBLGVBQUEsQ0FBQSxDQUFBO0FBQ0EsU0FBQSxDQUFBLE9BQUEsR0FBQSxLQUFBLENBQUE7QUFDQSxTQUFBLENBQUEsSUFBQSxHQUFBLElBQUEsQ0FBQTtBQUNBLFNBQUEsQ0FBQSxPQUFBLEdBQUEsZUFBQSxDQUFBLElBQUEsQ0FBQTtBQUNBLFNBQUEsQ0FBQSxRQUFBLEdBQUEsRUFBQSxDQUFBO0dBQ0EsQ0FBQSxDQUFBO0VBQ0EsQ0FBQTs7QUFFQSxLQUFBLElBQUEsR0FBQSxDQUFBLENBQUEsT0FBQSxDQUFBLENBQUE7QUFDQSxLQUFBLElBQUEsR0FBQSxDQUFBLENBQUEsT0FBQSxDQUFBLENBQUE7QUFDQSxLQUFBLE1BQUEsR0FBQSxJQUFBLENBQUE7O0FBRUEsS0FBQSxDQUFBLEtBQUEsQ0FBQSxZQUFBO0FBQ0EsTUFBQSxNQUFBLEVBQUE7QUFDQSxPQUFBLENBQUEsV0FBQSxDQUFBLFFBQUEsQ0FBQSxDQUFBLFdBQUEsQ0FBQSxTQUFBLENBQUEsQ0FBQSxRQUFBLENBQUEsU0FBQSxDQUFBOztBQUFBLEFBRUEsYUFBQSxDQUFBLE9BQUEsRUFBQSxHQUFBLENBQUEsQ0FBQTtBQUNBLGFBQUEsQ0FBQSxZQUFBO0FBQ0EsS0FBQSxDQUFBLFNBQUEsQ0FBQSxDQUFBLEdBQUEsQ0FBQSxFQUFBLFNBQUEsRUFBQSxNQUFBLEVBQUEsQ0FBQSxDQUFBO0lBQ0EsRUFBQSxJQUFBLENBQUEsQ0FBQTtHQUNBLE1BQUE7QUFDQSxPQUFBLENBQUEsV0FBQSxDQUFBLFNBQUEsQ0FBQSxDQUFBLFFBQUEsQ0FBQSxRQUFBLENBQUE7O0FBQUEsR0FFQTtBQUNBLFFBQUEsR0FBQSxDQUFBLE1BQUEsQ0FBQTtFQUNBLENBQUEsQ0FBQTs7QUFHQSxVQUFBLE9BQUEsR0FBQTs7QUFFQSxHQUFBLENBQUEsU0FBQSxDQUFBLENBQUEsR0FBQSxDQUFBLEVBQUEsU0FBQSxFQUFBLFNBQUEsRUFBQSxDQUFBLENBQUE7O0FBRUEsTUFBQSxTQUFBLENBQUE7O0FBRUEsTUFBQSxNQUFBLEdBQUEsUUFBQSxDQUFBLGNBQUEsQ0FBQSxRQUFBLENBQUE7TUFDQSxPQUFBLEdBQUEsTUFBQSxDQUFBLFVBQUEsQ0FBQSxJQUFBLENBQUE7TUFDQSxLQUFBLEdBQUEsTUFBQSxDQUFBLEtBQUEsR0FBQSxNQUFBLENBQUEsVUFBQTtNQUNBLE1BQUEsR0FBQSxNQUFBLENBQUEsTUFBQSxHQUFBLE1BQUEsQ0FBQSxXQUFBO01BQ0EsUUFBQSxHQUFBLEVBQUE7TUFDQSxhQUFBLEdBQUEsQ0FBQTtNQUNBLE9BQUEsR0FBQSxHQUFBO01BQ0EsTUFBQTs7Ozs7OztBQU9BLEdBQUEsU0FBQSxFQUFBLFNBQUEsRUFBQSxTQUFBLEVBQUEsU0FBQSxFQUFBLFNBQUEsRUFBQSxTQUFBLENBQUEsQ0FBQTs7QUFFQSxPQUFBLElBQUEsQ0FBQSxHQUFBLENBQUEsRUFBQSxDQUFBLEdBQUEsRUFBQSxFQUFBLENBQUEsRUFBQSxFQUFBO0FBQ0EsV0FBQSxDQUFBLElBQUEsQ0FBQTtBQUNBLEtBQUEsRUFBQSxLQUFBLEdBQUEsQ0FBQTtBQUNBLEtBQUEsRUFBQSxNQUFBLEdBQUEsQ0FBQTtBQUNBLFFBQUEsRUFBQSxXQUFBLENBQUEsQ0FBQSxFQUFBLEVBQUEsQ0FBQTtBQUNBLFFBQUEsRUFBQSxXQUFBLENBQUEsQ0FBQSxFQUFBLEVBQUEsQ0FBQTtBQUNBLFFBQUEsRUFBQSxXQUFBLENBQUEsQ0FBQSxFQUFBLENBQUEsQ0FBQTs7QUFFQSxZQUFBLEVBQUEsV0FBQSxDQUFBLENBQUEsRUFBQSxDQUFBLENBQUE7O0FBRUEsUUFBQSxFQUFBLFdBQUEsQ0FBQSxDQUFBLENBQUEsRUFBQSxDQUFBLENBQUE7QUFDQSxRQUFBLEVBQUEsV0FBQSxDQUFBLENBQUEsRUFBQSxFQUFBLENBQUEsRUFBQSxDQUFBOztBQUVBLFNBQUEsRUFBQSxnQkFBQSxDQUFBLFdBQUEsQ0FBQSxDQUFBLEVBQUEsR0FBQSxDQUFBLENBQUE7QUFDQSxTQUFBLEVBQUEsTUFBQSxDQUFBLElBQUEsQ0FBQSxLQUFBLENBQUEsSUFBQSxDQUFBLE1BQUEsRUFBQSxHQUFBLE1BQUEsQ0FBQSxNQUFBLENBQUEsQ0FBQTtBQUNBLGFBQUEsRUFBQSxXQUFBLENBQUEsQ0FBQSxHQUFBLEVBQUEsR0FBQSxDQUFBOztBQUVBLFFBQUEsRUFBQSxJQUFBO0lBQ0EsQ0FBQSxDQUFBO0dBQ0E7O0FBRUEsTUFBQSxFQUFBLEdBQUE7QUFDQSxJQUFBLEVBQUEsS0FBQSxHQUFBLENBQUEsR0FBQSxHQUFBO0FBQ0EsSUFBQSxFQUFBLE1BQUEsR0FBQSxDQUFBLEdBQUEsR0FBQTtBQUNBLFFBQUEsRUFBQSxHQUFBO0FBQ0EsU0FBQSxFQUFBLEdBQUE7QUFDQSxPQUFBLEVBQUEsQ0FBQTtBQUNBLE9BQUEsRUFBQSxDQUFBLEVBQUE7QUFDQSxXQUFBLEVBQUEsQ0FBQTtHQUNBLENBQUE7O0FBR0EsV0FBQSxVQUFBLEdBQUE7QUFDQSxPQUFBLElBQUEsR0FBQSxFQUFBLENBQUE7QUFDQSxPQUFBLEVBQUEsQ0FBQSxRQUFBLEdBQUEsQ0FBQSxFQUFBO0FBQ0EsTUFBQSxDQUFBLFFBQUEsSUFBQSxJQUFBLENBQUE7SUFDQSxNQUFBO0FBQ0EsTUFBQSxDQUFBLFFBQUEsR0FBQSxDQUFBLENBQUE7SUFDQTtBQUNBLFVBQUEsQ0FBQSxXQUFBLEdBQUEsRUFBQSxDQUFBLFFBQUEsQ0FBQTs7QUFFQSxPQUFBLEVBQUEsQ0FBQSxRQUFBLEtBQUEsQ0FBQSxFQUFBO0FBQ0EsTUFBQSxDQUFBLElBQUEsSUFBQSxLQUFBLENBQUE7QUFDQSxNQUFBLENBQUEsSUFBQSxJQUFBLEdBQUEsQ0FBQTtBQUNBLE1BQUEsQ0FBQSxDQUFBLElBQUEsRUFBQSxDQUFBLElBQUEsQ0FBQTtBQUNBLE1BQUEsQ0FBQSxDQUFBLElBQUEsRUFBQSxDQUFBLElBQUEsQ0FBQTtJQUNBOztBQUVBLE9BQUEsRUFBQSxDQUFBLENBQUEsR0FBQSxFQUFBLENBQUEsTUFBQSxHQUFBLE1BQUEsRUFBQTtBQUNBLE1BQUEsQ0FBQSxTQUFBLEdBQUEsQ0FBQSxDQUFBO0FBQ0EsTUFBQSxDQUFBLENBQUEsR0FBQSxNQUFBLEdBQUEsRUFBQSxDQUFBLE1BQUEsQ0FBQTtBQUNBLE1BQUEsQ0FBQSxJQUFBLElBQUEsQ0FBQSxHQUFBLENBQUE7QUFDQSxNQUFBLENBQUEsSUFBQSxJQUFBLEdBQUEsQ0FBQTtJQUNBOztBQUVBLFVBQUEsQ0FBQSxXQUFBLEdBQUEsQ0FBQSxDQUFBOztBQUVBLFFBQUEsSUFBQSxDQUFBLEdBQUEsQ0FBQSxFQUFBLENBQUEsR0FBQSxRQUFBLENBQUEsTUFBQSxFQUFBLENBQUEsRUFBQSxFQUFBO0FBQ0EsWUFBQSxDQUFBLENBQUEsQ0FBQSxDQUFBLElBQUEsRUFBQSxDQUFBO0lBQ0E7R0FDQTs7QUFFQSxXQUFBLE1BQUEsR0FBQTtBQUNBLFVBQUEsQ0FBQSxTQUFBLENBQUEsQ0FBQSxFQUFBLENBQUEsRUFBQSxLQUFBLEVBQUEsTUFBQSxDQUFBLENBQUE7QUFDQSxhQUFBLEVBQUEsQ0FBQTtBQUNBLFlBQUEsR0FBQSxxQkFBQSxDQUFBLE1BQUEsQ0FBQSxDQUFBO0dBQ0E7O0FBRUEsUUFBQSxFQUFBLENBQUE7O0FBRUEsWUFBQSxDQUFBLFlBQUE7QUFDQSxTQUFBLENBQUEsb0JBQUEsQ0FBQSxTQUFBLENBQUEsQ0FBQTtBQUNBLFlBQUEsR0FBQSxTQUFBLENBQUE7R0FDQSxFQUFBLElBQUEsQ0FBQSxDQUFBOztBQUVBLFdBQUEsV0FBQSxDQUFBLEdBQUEsRUFBQSxHQUFBLEVBQUE7QUFDQSxVQUFBLEdBQUEsR0FBQSxJQUFBLENBQUEsTUFBQSxFQUFBLElBQUEsR0FBQSxHQUFBLEdBQUEsQ0FBQSxDQUFBO0dBQ0E7O0FBRUEsV0FBQSxTQUFBLENBQUEsR0FBQSxFQUFBLEdBQUEsRUFBQTtBQUNBLFVBQUEsSUFBQSxDQUFBLEtBQUEsQ0FBQSxHQUFBLEdBQUEsSUFBQSxDQUFBLE1BQUEsRUFBQSxJQUFBLEdBQUEsR0FBQSxHQUFBLEdBQUEsQ0FBQSxDQUFBLENBQUEsQ0FBQTtHQUNBOztBQUVBLFdBQUEsZ0JBQUEsQ0FBQSxNQUFBLEVBQUE7QUFDQSxVQUFBLE1BQUEsSUFBQSxJQUFBLENBQUEsRUFBQSxHQUFBLEdBQUEsQ0FBQSxDQUFBO0dBQ0E7O0FBRUEsV0FBQSxRQUFBLENBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxNQUFBLEVBQUEsV0FBQSxFQUFBLFdBQUEsRUFBQSxLQUFBLEVBQUE7QUFDQSxPQUFBLEdBQUEsR0FBQSxJQUFBLENBQUEsRUFBQSxHQUFBLENBQUEsR0FBQSxDQUFBLENBQUE7QUFDQSxPQUFBLENBQUEsR0FBQSxFQUFBLENBQUE7QUFDQSxPQUFBLENBQUEsR0FBQSxFQUFBLENBQUE7QUFDQSxPQUFBLElBQUEsR0FBQSxJQUFBLENBQUEsRUFBQSxHQUFBLE1BQUEsQ0FBQTs7QUFFQSxVQUFBLENBQUEsVUFBQSxHQUFBLE1BQUEsQ0FBQTtBQUNBLFVBQUEsQ0FBQSxTQUFBLEVBQUEsQ0FBQTtBQUNBLFVBQUEsQ0FBQSxNQUFBLENBQUEsRUFBQSxFQUFBLEVBQUEsR0FBQSxXQUFBLENBQUEsQ0FBQTtBQUNBLFFBQUEsQ0FBQSxHQUFBLENBQUEsRUFBQSxDQUFBLEdBQUEsTUFBQSxFQUFBLENBQUEsRUFBQSxFQUFBO0FBQ0EsS0FBQSxHQUFBLEVBQUEsR0FBQSxJQUFBLENBQUEsR0FBQSxDQUFBLEdBQUEsQ0FBQSxHQUFBLFdBQUEsQ0FBQTtBQUNBLEtBQUEsR0FBQSxFQUFBLEdBQUEsSUFBQSxDQUFBLEdBQUEsQ0FBQSxHQUFBLENBQUEsR0FBQSxXQUFBLENBQUE7QUFDQSxXQUFBLENBQUEsTUFBQSxDQUFBLENBQUEsRUFBQSxDQUFBLENBQUEsQ0FBQTtBQUNBLE9BQUEsSUFBQSxJQUFBLENBQUE7O0FBRUEsS0FBQSxHQUFBLEVBQUEsR0FBQSxJQUFBLENBQUEsR0FBQSxDQUFBLEdBQUEsQ0FBQSxHQUFBLFdBQUEsQ0FBQTtBQUNBLEtBQUEsR0FBQSxFQUFBLEdBQUEsSUFBQSxDQUFBLEdBQUEsQ0FBQSxHQUFBLENBQUEsR0FBQSxXQUFBLENBQUE7QUFDQSxXQUFBLENBQUEsTUFBQSxDQUFBLENBQUEsRUFBQSxDQUFBLENBQUEsQ0FBQTtBQUNBLE9BQUEsSUFBQSxJQUFBLENBQUE7SUFDQTs7QUFFQSxVQUFBLENBQUEsTUFBQSxDQUFBLEVBQUEsRUFBQSxFQUFBLEdBQUEsV0FBQSxDQUFBLENBQUE7QUFDQSxVQUFBLENBQUEsU0FBQSxFQUFBLENBQUE7QUFDQSxVQUFBLENBQUEsU0FBQSxHQUFBLEtBQUEsQ0FBQTtBQUNBLFVBQUEsQ0FBQSxJQUFBLEVBQUEsQ0FBQTtHQUNBOztBQUVBLFdBQUEsSUFBQSxHQUFBO0FBQ0EsVUFBQSxDQUFBLElBQUEsRUFBQSxDQUFBO0FBQ0EsVUFBQSxDQUFBLFNBQUEsQ0FBQSxJQUFBLENBQUEsQ0FBQSxFQUFBLElBQUEsQ0FBQSxDQUFBLENBQUEsQ0FBQTtBQUNBLFVBQUEsQ0FBQSxNQUFBLENBQUEsSUFBQSxDQUFBLEtBQUEsQ0FBQSxDQUFBO0FBQ0EsVUFBQSxDQUFBLFNBQUEsR0FBQSxJQUFBLENBQUEsS0FBQSxDQUFBO0FBQ0EsVUFBQSxDQUFBLFNBQUEsRUFBQTs7QUFBQSxBQUVBLFVBQUEsQ0FBQSxRQUFBLENBQUEsSUFBQSxDQUFBLElBQUEsR0FBQSxDQUFBLEdBQUEsQ0FBQSxDQUFBLEVBQUEsSUFBQSxDQUFBLElBQUEsR0FBQSxDQUFBLEdBQUEsQ0FBQSxDQUFBLEVBQUEsSUFBQSxDQUFBLElBQUEsRUFBQSxJQUFBLENBQUEsSUFBQSxDQUFBLENBQUE7QUFDQSxVQUFBLENBQUEsSUFBQSxFQUFBLENBQUE7QUFDQSxVQUFBLENBQUEsU0FBQSxFQUFBLENBQUE7QUFDQSxVQUFBLENBQUEsT0FBQSxFQUFBLENBQUE7QUFDQSxPQUFBLENBQUEsS0FBQSxJQUFBLElBQUEsQ0FBQSxTQUFBLENBQUE7QUFDQSxPQUFBLENBQUEsSUFBQSxJQUFBLEtBQUEsQ0FBQTtBQUNBLE9BQUEsQ0FBQSxJQUFBLElBQUEsR0FBQSxDQUFBO0FBQ0EsT0FBQSxDQUFBLENBQUEsSUFBQSxJQUFBLENBQUEsSUFBQSxDQUFBO0FBQ0EsT0FBQSxDQUFBLENBQUEsSUFBQSxJQUFBLENBQUEsSUFBQSxDQUFBOztBQUVBLE9BQUEsSUFBQSxDQUFBLENBQUEsR0FBQSxDQUFBLEVBQUE7QUFDQSxRQUFBLENBQUEsSUFBQSxJQUFBLENBQUEsR0FBQSxDQUFBO0FBQ0EsUUFBQSxDQUFBLElBQUEsSUFBQSxHQUFBLENBQUE7SUFDQTtBQUNBLE9BQUEsSUFBQSxDQUFBLENBQUEsR0FBQSxNQUFBLEVBQUE7QUFDQSxRQUFBLENBQUEsU0FBQSxHQUFBLENBQUEsQ0FBQTtBQUNBLFFBQUEsQ0FBQSxDQUFBLEdBQUEsTUFBQSxDQUFBO0FBQ0EsUUFBQSxDQUFBLElBQUEsSUFBQSxDQUFBLEdBQUEsQ0FBQTtBQUNBLFFBQUEsQ0FBQSxJQUFBLElBQUEsR0FBQSxDQUFBO0lBQ0E7QUFDQSxPQUFBLElBQUEsQ0FBQSxDQUFBLEdBQUEsS0FBQSxJQUFBLElBQUEsQ0FBQSxDQUFBLEdBQUEsQ0FBQSxFQUFBO0FBQ0EsUUFBQSxDQUFBLElBQUEsSUFBQSxDQUFBLEdBQUEsQ0FBQTtJQUNBO0dBRUE7RUFDQTtDQUVBLENBQUEsQ0FBQTs7QUMvTUEsR0FBQSxDQUFBLE1BQUEsQ0FBQSxVQUFBLGNBQUEsRUFBQTtBQUNBLGVBQUEsQ0FDQSxLQUFBLENBQUEsTUFBQSxFQUFBO0FBQ0EsS0FBQSxFQUFBLEdBQUE7QUFDQSxhQUFBLEVBQUEseUJBQUE7QUFDQSxZQUFBLEVBQUEsVUFBQTtFQUNBLENBQUEsQ0FDQSxLQUFBLENBQUEsVUFBQSxFQUFBO0FBQ0EsS0FBQSxFQUFBLFdBQUE7QUFDQSxhQUFBLEVBQUEsNkJBQUE7QUFDQSxZQUFBLEVBQUEsYUFBQTtFQUNBLENBQUEsQ0FDQSxLQUFBLENBQUEsT0FBQSxFQUFBO0FBQ0EsS0FBQSxFQUFBLFFBQUE7QUFDQSxhQUFBLEVBQUEsMEJBQUE7QUFDQSxZQUFBLEVBQUEsV0FBQTtFQUNBLENBQUEsQ0FDQSxLQUFBLENBQUEsU0FBQSxFQUFBO0FBQ0EsS0FBQSxFQUFBLFVBQUE7QUFDQSxhQUFBLEVBQUEsNEJBQUE7QUFDQSxZQUFBLEVBQUEsYUFBQTtFQUNBLENBQUEsQ0FBQTtDQUNBLENBQUEsQ0FBQTs7QUFFQSxHQUFBLENBQUEsVUFBQSxDQUFBLFVBQUEsRUFBQSxZQUFBO0FBQ0EsS0FBQSxTQUFBLEdBQUEsQ0FBQSxDQUFBO0FBQ0EsS0FBQSxRQUFBLEdBQUEsQ0FBQSxDQUFBLFdBQUEsQ0FBQSxDQUFBO0FBQ0EsS0FBQSxPQUFBLEdBQUEsUUFBQSxDQUFBO0FBQ0EsS0FBQSxJQUFBLENBQUE7QUFDQSxZQUFBLENBQUEsWUFBQTtBQUNBLFdBQUEsRUFBQSxDQUFBO0FBQ0EsVUFBQSxDQUFBLEdBQUEsQ0FBQTtBQUNBLHNCQUFBLEVBQUEsVUFBQSxHQUFBLFNBQUEsR0FBQSxDQUFBLEVBQUEsR0FBQSxNQUFBO0dBQ0EsQ0FBQSxDQUFBO0FBQ0EsVUFBQSxDQUFBLElBQUEsQ0FBQSxZQUFBLEVBQUEsU0FBQSxHQUFBLENBQUEsR0FBQSxDQUFBLENBQUEsQ0FBQTs7QUFFQSxNQUFBLEdBQUEsT0FBQSxDQUFBO0FBQ0EsU0FBQSxHQUFBLE9BQUEsSUFBQSxTQUFBLEdBQUEsQ0FBQSxHQUFBLENBQUEsQ0FBQSxDQUFBO0VBQ0EsRUFBQSxJQUFBLENBQUE7Ozs7Ozs7Ozs7Ozs7QUFBQSxDQWFBLENBQUEsQ0FBQTs7QUNuREEsR0FBQSxDQUFBLFVBQUEsQ0FBQSxhQUFBLEVBQUEsVUFBQSxNQUFBLEVBQUE7QUFDQSxFQUFBLENBQUEsUUFBQSxDQUFBLENBQUEsS0FBQSxDQUFBLFlBQUE7O0FBRUEsTUFBQSxPQUFBLEdBQUEsQ0FBQSxDQUFBO0FBQ0EsTUFBQSxVQUFBLEdBQUEsQ0FBQSxDQUFBLFdBQUEsQ0FBQSxDQUFBLE1BQUEsQ0FBQTtBQUNBLE1BQUEsUUFBQSxHQUFBLElBQUEsQ0FBQTtBQUNBLE1BQUEsU0FBQSxHQUFBLEtBQUEsQ0FBQTtBQUNBLE1BQUEsUUFBQSxHQUFBLFlBQUEsQ0FBQTs7QUFFQSxXQUFBLFVBQUEsR0FBQTtBQUNBLFlBQUEsR0FBQSxJQUFBLENBQUE7O0FBRUEsSUFBQSxDQUFBLFFBQUEsR0FBQSxPQUFBLENBQUEsQ0FBQSxXQUFBLENBQUEsVUFBQSxDQUFBLENBQUEsUUFBQSxDQUFBLFFBQUEsQ0FBQSxDQUFBO0FBQ0EsSUFBQSxDQUFBLFFBQUEsSUFBQSxPQUFBLEdBQUEsQ0FBQSxDQUFBLENBQUEsQ0FBQSxRQUFBLENBQUEsVUFBQSxDQUFBLENBQUE7QUFDQSxJQUFBLENBQUEsUUFBQSxJQUFBLE9BQUEsR0FBQSxDQUFBLENBQUEsQ0FBQSxDQUFBLFdBQUEsQ0FBQSxRQUFBLENBQUEsQ0FBQTs7QUFFQSxhQUFBLENBQUEsWUFBQTtBQUNBLGFBQUEsR0FBQSxLQUFBLENBQUE7SUFDQSxFQUFBLFFBQUEsQ0FBQSxDQUFBO0dBQ0E7O0FBRUEsV0FBQSxVQUFBLEdBQUE7QUFDQSxPQUFBLE9BQUEsS0FBQSxDQUFBLEVBQUEsT0FBQTtBQUNBLFVBQUEsRUFBQSxDQUFBO0FBQ0EsYUFBQSxFQUFBLENBQUE7R0FDQTs7QUFFQSxXQUFBLFlBQUEsR0FBQTtBQUNBLE9BQUEsT0FBQSxLQUFBLFVBQUEsRUFBQSxPQUFBO0FBQ0EsVUFBQSxFQUFBLENBQUE7QUFDQSxhQUFBLEVBQUEsQ0FBQTtHQUNBOztBQUVBLEdBQUEsQ0FBQSxRQUFBLENBQUEsQ0FBQSxFQUFBLENBQUEsMkJBQUEsRUFBQSxVQUFBLENBQUEsRUFBQTtBQUNBLE9BQUEsU0FBQSxFQUFBLE9BQUE7QUFDQSxPQUFBLENBQUEsQ0FBQSxhQUFBLENBQUEsVUFBQSxHQUFBLENBQUEsSUFBQSxDQUFBLENBQUEsYUFBQSxDQUFBLE1BQUEsR0FBQSxDQUFBLEVBQUE7QUFDQSxjQUFBLEVBQUEsQ0FBQTtJQUNBLE1BQUE7QUFDQSxnQkFBQSxFQUFBLENBQUE7SUFDQTtHQUNBLENBQUEsQ0FBQTs7QUFFQSxHQUFBLENBQUEsUUFBQSxDQUFBLENBQUEsRUFBQSxDQUFBLFNBQUEsRUFBQSxVQUFBLENBQUEsRUFBQTtBQUNBLE9BQUEsU0FBQSxFQUFBLE9BQUE7QUFDQSxPQUFBLENBQUEsQ0FBQSxLQUFBLEtBQUEsRUFBQSxFQUFBO0FBQ0EsY0FBQSxFQUFBLENBQUE7SUFDQSxNQUFBLElBQUEsQ0FBQSxDQUFBLEtBQUEsS0FBQSxFQUFBLEVBQUE7QUFDQSxnQkFBQSxFQUFBLENBQUE7SUFDQTtHQUNBLENBQUEsQ0FBQTs7QUFFQSxHQUFBLENBQUEsYUFBQSxDQUFBLENBQUEsS0FBQSxDQUFBLFlBQUE7QUFDQSxPQUFBLFNBQUEsRUFBQSxPQUFBO0FBQ0EsZUFBQSxFQUFBLENBQUE7R0FDQSxDQUFBLENBQUE7RUFFQSxDQUFBLENBQUE7Q0FDQSxDQUFBLENBQUEiLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIndpbmRvdy5hcHAgPSBhbmd1bGFyLm1vZHVsZSgncG9ydGZvbGlvJywgWyd1aS5yb3V0ZXInXSk7XG5cbmFwcC5jb25maWcoZnVuY3Rpb24gKCR1cmxSb3V0ZXJQcm92aWRlciwgJGxvY2F0aW9uUHJvdmlkZXIsICR1cmxNYXRjaGVyRmFjdG9yeVByb3ZpZGVyKSB7XG5cblx0Ly8gdGhpcyBtYWtlcyB0aGUgJy9zdG9yZXMvJyByb3V0ZSBjb3JyZWN0bHkgcmVkaXJlY3QgdG8gJy9zdG9yZXMnXG5cdCR1cmxSb3V0ZXJQcm92aWRlci5ydWxlKGZ1bmN0aW9uICgkaW5qZWN0b3IsICRsb2NhdGlvbikge1xuXG5cdFx0dmFyIHJlID0gLyguKykoXFwvKykoXFw/LiopPyQvO1xuXHRcdHZhciBwYXRoID0gJGxvY2F0aW9uLnVybCgpO1xuXG5cdFx0aWYocmUudGVzdChwYXRoKSkge1xuXHRcdFx0cmV0dXJuIHBhdGgucmVwbGFjZShyZSwgJyQxJDMnKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gZmFsc2U7XG5cdH0pO1xuXHQvLyBUaGlzIHR1cm5zIG9mZiBoYXNoYmFuZyB1cmxzICgvI2Fib3V0KSBhbmQgY2hhbmdlcyBpdCB0byBzb21ldGhpbmcgbm9ybWFsICgvYWJvdXQpXG5cdCRsb2NhdGlvblByb3ZpZGVyLmh0bWw1TW9kZSh0cnVlKTtcblx0JHVybFJvdXRlclByb3ZpZGVyLndoZW4oJy9hdXRoLzpwcm92aWRlcicsIGZ1bmN0aW9uICgpIHtcblx0XHR3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7XG5cdH0pO1xuXHQvLyBJZiB3ZSBnbyB0byBhIFVSTCB0aGF0IHVpLXJvdXRlciBkb2Vzbid0IGhhdmUgcmVnaXN0ZXJlZCwgZ28gdG8gdGhlIFwiL1wiIHVybC5cblx0JHVybFJvdXRlclByb3ZpZGVyLm90aGVyd2lzZSgnLycpO1xufSk7XG4iLCJhcHAuY29udHJvbGxlcignYWJvdXRDdHJsJywgZnVuY3Rpb24oJHNjb3BlKXtcblxuXHQvLyBhbmd1bGFyLmVsZW1lbnQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCl7XG5cdHZhciBza2lsbHNDbG91ZCA9ICQoXCIjc2tpbGxzLWNsb3VkXCIpO1xuXHR2YXIgd2lkdGggPSBza2lsbHNDbG91ZC53aWR0aCgpO1xuXHR2YXIgaGVpZ2h0ID0gc2tpbGxzQ2xvdWQuaGVpZ2h0KCk7XG5cblx0dmFyIHN2ZyA9IGQzLnNlbGVjdChcIiNza2lsbHMtY2xvdWRcIikuYXBwZW5kKFwic3ZnXCIpXG5cblx0dmFyIHNraWxscyA9IFtcblx0XHR7bmFtZTogXCJKYXZhU2NyaXB0XCIsIGxldmVsOiAzfSxcblx0XHR7bmFtZTogXCJNb25nb0RCXCIsIGxldmVsOiAzfSxcblx0XHR7bmFtZTogXCJFeHByZXNzLmpzXCIsIGxldmVsOiAzfSxcblx0XHR7bmFtZTogXCJBbmd1bGFyLmpzXCIsIGxldmVsOiAzfSxcblx0XHR7bmFtZTogXCJOb2RlLmpzXCIsIGxldmVsOiAzfSxcblx0XHR7bmFtZTogXCJNb25nb29zZS5qc1wiLCBsZXZlbDogM30sXG5cdFx0e25hbWU6IFwiR2l0XCIsIGxldmVsOiAzfSxcblx0XHR7bmFtZTogXCJDU1MzXCIsIGxldmVsOiAzfSxcblx0XHR7bmFtZTogXCJIVE1MNVwiLCBsZXZlbDogM30sXG5cdFx0e25hbWU6IFwiUmVzb25zaXZlIERlc2lnblwiLCBsZXZlbDogMn0sXG5cdFx0e25hbWU6IFwiR3VscFwiLCBsZXZlbDogMn0sXG5cdFx0e25hbWU6IFwiTW9jaGEgJiBDaGFpXCIsIGxldmVsOiAyfSxcblx0XHR7bmFtZTogXCJqUXVlcnlcIiwgbGV2ZWw6IDJ9LFxuXHRcdHtuYW1lOiBcIkJvb3RzdHJhcFwiLCBsZXZlbDogMn0sXG5cdFx0e25hbWU6IFwiV2ViLUF1ZGlvXCIsIGxldmVsOiAyfSxcblx0XHR7bmFtZTogXCJDaHJvbWUgRXh0ZW5zaW9uc1wiLCBsZXZlbDogMX0sXG5cdFx0e25hbWU6IFwiU1FMXCIsIGxldmVsOiAxfSxcblx0XHR7bmFtZTogXCJXZWJTb2NrZXRzXCIsIGxldmVsOiAxfSxcblx0XHR7bmFtZTogXCJNSURJXCIsIGxldmVsOiAxfSxcblx0XHR7bmFtZTogXCJKYXZhXCIsIGxldmVsOiAxfSxcblx0XHR7bmFtZTogXCJDKytcIiwgbGV2ZWw6IDF9LFxuXG5cblx0XTtcblxuXHQvL2NyZWF0ZSBub2Rlc1xuXHR2YXIgbm9kZXMgPSBkMy5yYW5nZShza2lsbHMubGVuZ3RoKS5tYXAoZnVuY3Rpb24oaSkge1xuXHRcdHJldHVybiB7XG5cdFx0XHRyYWRpdXM6IHNraWxsc1tpXS5sZXZlbCoxNSArMjAsXG5cdFx0XHRsYWJlbDogc2tpbGxzW2ldLm5hbWUsXG5cdFx0XHRza2lsbExldmVsOiBza2lsbHNbaV0ubGV2ZWxcblx0XHR9O1xuXHR9KTtcblxuXHQvL2luaXRpYWxpemUgdmFyaWFibGVzIGFuZCByb290IG5vZGVcblx0dmFyXHRyb290ID0gbm9kZXNbMF0sXG5cdFx0Ly8gY29sb3IgPSBkMy5zY2FsZS5jYXRlZ29yeTEwKCk7XG5cdFx0Y29sb3JzID0gWycjN0ZGRkQ0JywnI0UwRkZGRicsJyMzM0NDRkYnLCcjQzY4OEU4JywnI0ZGODA3RCcsJyNGRjhFQjInXTtcblx0XHRyb290LnJhZGl1cyA9IDA7XG5cdFx0cm9vdC5maXhlZCA9IHRydWU7XG5cblx0Ly8gY29uc29sZS5sb2coXCJub2RlczogXCIsbm9kZXMpO1xuXG5cblx0Ly8gY29uc29sZS5sb2coXCJub2RlcyAwOlwiLCBub2Rlc1swXSk7XG5cblx0dmFyIGdyb3VwcyA9IHN2Zy5zZWxlY3RBbGwoXCJnXCIpXG5cdFx0LmRhdGEobm9kZXMuc2xpY2UoMSkpXG5cdFx0LmVudGVyKClcblx0XHQuYXBwZW5kKFwiZ1wiKTtcblxuXHQvLyBncm91cHMuYXR0cihcInRyYW5zZm9ybVwiLCBmdW5jdGlvbihkLCBpKSB7XG5cdC8vIFx0dmFyIHggPSA3OCAqIGkgKyAxMDA7XG5cdC8vIFx0dmFyIHkgPSA0NCAqIGkgKyA5Mztcblx0Ly8gXHRyZXR1cm4gXCJ0cmFuc2xhdGUoXCIgKyBbeCx5XSArIFwiKVwiO1xuXHQvLyB9KTtcblxuXHR2YXIgY2lyY2xlcyA9IGdyb3Vwcy5hcHBlbmQoJ2NpcmNsZScpXG5cdC8vIHZhciBjaXJjbGVzID0gc3ZnLnNlbGVjdEFsbChcImNpcmNsZVwiKVxuXHRcdC5kYXRhKG5vZGVzLnNsaWNlKDEpKVxuXHRcdC8vIC5lbnRlcigpXG5cdFx0Ly8uYXBwZW5kKFwiY2lyY2xlXCIpXG5cdFx0LmF0dHIoXCJyXCIsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGQucmFkaXVzOyB9KVxuXHRcdC5zdHlsZShcImZpbGxcIiwgZnVuY3Rpb24oZCwgaSkge1xuXHRcdFx0cmV0dXJuIGNvbG9yc1tpICUgNl07XG5cdFx0fSk7XG5cdFx0Ly8gLmlubmVySFRNTChcIlwiKVxuXG5cdHZhciBsYWJlbCA9IGdyb3Vwcy5hcHBlbmQoXCJ0ZXh0XCIpXG5cdC8vIHZhciBsYWJlbCA9IGNpcmNsZXMuYXBwZW5kKFwidGV4dFwiKVxuXHRcdC50ZXh0KGZ1bmN0aW9uKGQpe1xuXHRcdFx0cmV0dXJuIGQubGFiZWw7XG5cdFx0fSlcblx0XHQuYXR0cih7XG5cdFx0XHRcImFsaWdubWVudC1iYXNlbGluZVwiOiBcIm1pZGRsZVwiLFxuXHRcdFx0XCJ0ZXh0LWFuY2hvclwiOiBcIm1pZGRsZVwiLFxuXHRcdH0pO1xuXG5cdC8vIGNvbnNvbGUubG9nKHN2Zy5zZWxlY3RBbGwoXCJjaXJjbGVcIilbMF1bMF0pO1xuXG5cdHZhciBmb3JjZSA9IGQzLmxheW91dC5mb3JjZSgpXG5cdFx0LmdyYXZpdHkoMC4wNSlcblx0XHQuY2hhcmdlKGZ1bmN0aW9uKGQsIGkpIHsgcmV0dXJuIGkgPyAwIDogLTIwMDA7IH0pXG5cdFx0Lm5vZGVzKG5vZGVzKVxuXHRcdC5zaXplKFt3aWR0aCwgaGVpZ2h0XSk7XG5cblx0Zm9yY2Uuc3RhcnQoKTtcblxuXHRmb3JjZS5vbihcInRpY2tcIiwgZnVuY3Rpb24oZSkge1xuXHQgIHZhciBxID0gZDMuZ2VvbS5xdWFkdHJlZShub2RlcyksXG5cdCAgICAgIGkgPSAwLFxuXHQgICAgICBuID0gbm9kZXMubGVuZ3RoO1xuXG5cdCAgd2hpbGUgKCsraSA8IG4pIHEudmlzaXQoY29sbGlkZShub2Rlc1tpXSkpO1xuXG5cdFx0c3ZnLnNlbGVjdEFsbChcImNpcmNsZVwiKVxuXHRcdFx0LmF0dHIoXCJjeFwiLCBmdW5jdGlvbihkKSB7IHJldHVybiBkLng7IH0pXG5cdFx0XHQuYXR0cihcImN5XCIsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGQueTsgfSk7XG5cblx0XHRzdmcuc2VsZWN0QWxsKFwidGV4dFwiKVxuXHRcdFx0LmF0dHIoXCJ4XCIsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGQueDsgfSlcblx0XHRcdC5hdHRyKFwieVwiLCBmdW5jdGlvbihkKSB7IHJldHVybiBkLnk7IH0pO1xuXHR9KTtcblxuXHRzdmcub24oXCJtb3VzZW1vdmVcIiwgZnVuY3Rpb24oKSB7XG5cdCAgdmFyIHAxID0gZDMubW91c2UodGhpcyk7XG5cdCAgcm9vdC5weCA9IHAxWzBdO1xuXHQgIHJvb3QucHkgPSBwMVsxXTtcblx0ICBmb3JjZS5yZXN1bWUoKTtcblx0fSk7XG5cblx0ZnVuY3Rpb24gY29sbGlkZShub2RlKSB7XG5cdCAgdmFyIHIgPSBub2RlLnJhZGl1cyArIDE2LFxuXHQgICAgICBueDEgPSBub2RlLnggLSByLFxuXHQgICAgICBueDIgPSBub2RlLnggKyByLFxuXHQgICAgICBueTEgPSBub2RlLnkgLSByLFxuXHQgICAgICBueTIgPSBub2RlLnkgKyByO1xuXHQgIHJldHVybiBmdW5jdGlvbihxdWFkLCB4MSwgeTEsIHgyLCB5Mikge1xuXHQgICAgaWYgKHF1YWQucG9pbnQgJiYgKHF1YWQucG9pbnQgIT09IG5vZGUpKSB7XG5cdCAgICAgIHZhciB4ID0gbm9kZS54IC0gcXVhZC5wb2ludC54LFxuXHQgICAgICAgICAgeSA9IG5vZGUueSAtIHF1YWQucG9pbnQueSxcblx0ICAgICAgICAgIGwgPSBNYXRoLnNxcnQoeCAqIHggKyB5ICogeSksXG5cdCAgICAgICAgICByID0gbm9kZS5yYWRpdXMgKyBxdWFkLnBvaW50LnJhZGl1cztcblx0ICAgICAgaWYgKGwgPCByKSB7XG5cdCAgICAgICAgbCA9IChsIC0gcikgLyBsICogMC41O1xuXHQgICAgICAgIG5vZGUueCAtPSB4ICo9IGw7XG5cdCAgICAgICAgbm9kZS55IC09IHkgKj0gbDtcblx0ICAgICAgICBxdWFkLnBvaW50LnggKz0geDtcblx0ICAgICAgICBxdWFkLnBvaW50LnkgKz0geTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgICAgcmV0dXJuIHgxID4gbngyIHx8IHgyIDwgbngxIHx8IHkxID4gbnkyIHx8IHkyIDwgbnkxO1xuXHQgIH07XG5cdH1cblxuXHQvLyB9KTtcblxufSk7XG4iLCJhcHAuY29udHJvbGxlcignY29udGFjdEN0cmwnLCBmdW5jdGlvbigkc2NvcGUsICRodHRwKXtcblx0JHNjb3BlLmZvcm1EYXRhID0ge307XG5cblx0JHNjb3BlLnNlbmRNYWlsID0gZnVuY3Rpb24oKXtcblx0XHQkc2NvcGUud2FpdGluZyA9IHRydWU7XG5cdFx0JHNjb3BlLnNlbnQgPSBmYWxzZTtcblx0XHQkc2NvcGUuc3VjY2VzcyA9IGZhbHNlO1xuXHRcdCRodHRwLnBvc3QoJy9hcGkvY29udGFjdCcsICRzY29wZS5mb3JtRGF0YSlcblx0XHQudGhlbihmdW5jdGlvbihzdWNjZXNzUmVzcG9uc2Upe1xuXHRcdFx0Y29uc29sZS5sb2coc3VjY2Vzc1Jlc3BvbnNlKTtcblx0XHRcdCRzY29wZS53YWl0aW5nID0gZmFsc2U7XG5cdFx0XHQkc2NvcGUuc2VudCA9IHRydWU7XG5cdFx0XHQkc2NvcGUuc3VjY2VzcyA9IHN1Y2Nlc3NSZXNwb25zZS5kYXRhO1xuXHRcdFx0JHNjb3BlLmZvcm1EYXRhID0ge307XG5cdFx0fSk7XG5cdH07XG5cblx0dmFyIGNhcmQgPSAkKCcjY2FyZCcpO1xuXHR2YXIgbm90ZSA9ICQoJy5ub3RlJyk7XG5cdHZhciB0b2dnbGUgPSB0cnVlO1xuXG5cdGNhcmQuY2xpY2soZnVuY3Rpb24oKXtcblx0XHRpZiAodG9nZ2xlKXtcblx0XHRcdGNhcmQucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpLnJlbW92ZUNsYXNzKCdpbml0aWFsJykuYWRkQ2xhc3MoJ3Zpc2libGUnKTtcblx0XHRcdC8vIG5vdGUuY3NzKHsnZGlzcGxheSc6ICdpbml0aWFsJ30pO1xuXHRcdFx0c2V0VGltZW91dChleHBsb2RlLCA1MDApO1xuXHRcdFx0c2V0VGltZW91dChmdW5jdGlvbigpe1xuXHRcdFx0XHQkKCcjY2FudmFzJykuY3NzKHsnZGlzcGxheScgOiAnbm9uZSd9KTtcblx0XHRcdH0sIDUwMDApO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRjYXJkLnJlbW92ZUNsYXNzKCd2aXNpYmxlJykuYWRkQ2xhc3MoJ2hpZGRlbicpO1xuXHRcdFx0Ly8gbm90ZS5jc3MoeydkaXNwbGF5JzogJ25vbmUnfSk7XG5cdFx0fVxuXHRcdHRvZ2dsZSA9ICF0b2dnbGU7XG5cdH0pO1xuXG5cblx0ZnVuY3Rpb24gZXhwbG9kZSgpIHtcblxuXHRcdCQoJyNjYW52YXMnKS5jc3MoeydkaXNwbGF5JyA6ICdpbml0aWFsJ30pO1xuXG5cdFx0dmFyIHJlcXVlc3RJZDtcblxuXHRcdHZhciBjYW52YXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNhbnZhc1wiKSxcblx0XHRcdGNvbnRleHQgPSBjYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpLFxuXHRcdFx0d2lkdGggPSBjYW52YXMud2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aCxcblx0XHRcdGhlaWdodCA9IGNhbnZhcy5oZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQsXG5cdFx0XHRwYXJ0aWNsZSA9IFtdLFxuXHRcdFx0cGFydGljbGVDb3VudCA9IDAsXG5cdFx0XHRncmF2aXR5ID0gMC4zLFxuXHRcdFx0Y29sb3JzID1cblx0XHRcdC8vIFtcblx0XHRcdC8vIFx0JyNmNDQzMzYnLCAnI2U5MWU2MycsICcjOWMyN2IwJywgJyM2NzNhYjcnLCAnIzNmNTFiNScsXG5cdFx0XHQvLyBcdCcjMjE5NmYzJywgJyMwM2E5ZjQnLCAnIzAwYmNkNCcsICcjMDA5Njg4JywgJyM0Q0FGNTAnLFxuXHRcdFx0Ly8gXHQnIzhCQzM0QScsICcjQ0REQzM5JywgJyNGRkVCM0InLCAnI0ZGQzEwNycsICcjRkY5ODAwJyxcblx0XHRcdC8vIFx0JyNGRjU3MjInLCAnIzc5NTU0OCdcblx0XHRcdC8vIF07XG5cdFx0XHRbJyM3RkZGRDQnLCcjRTBGRkZGJywnIzMzQ0NGRicsJyNDNjg4RTgnLCcjRkY4MDdEJywnI0ZGOEVCMiddO1xuXG5cdFx0Zm9yKCB2YXIgaSA9IDA7IGkgPCA1MDsgaSsrKXtcblx0XHRcdHBhcnRpY2xlLnB1c2goe1xuXHRcdFx0XHR4IDogd2lkdGgvNyxcblx0XHRcdFx0eSA6IGhlaWdodC8yLFxuXHRcdFx0XHRib3hXIDogcmFuZG9tUmFuZ2UoNSwyMCksXG5cdFx0XHRcdGJveEggOiByYW5kb21SYW5nZSg1LDIwKSxcblx0XHRcdFx0c2l6ZSA6IHJhbmRvbVJhbmdlKDIsOCksXG5cblx0XHRcdFx0c3Bpa2VyYW46cmFuZG9tUmFuZ2UoMyw1KSxcblxuXHRcdFx0XHR2ZWxYIDpyYW5kb21SYW5nZSgtOCw4KSxcblx0XHRcdFx0dmVsWSA6cmFuZG9tUmFuZ2UoLTUwLC0xMCksXG5cblx0XHRcdFx0YW5nbGUgOmNvbnZlcnRUb1JhZGlhbnMocmFuZG9tUmFuZ2UoMCwzNjApKSxcblx0XHRcdFx0Y29sb3I6Y29sb3JzW01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGNvbG9ycy5sZW5ndGgpXSxcblx0XHRcdFx0YW5nbGVzcGluOnJhbmRvbVJhbmdlKC0wLjIsMC4yKSxcblxuXHRcdFx0XHRkcmF3IDogZHJhd1xuXHRcdFx0fSk7XG5cdFx0fVxuXG5cdFx0dmFyIHIxPXtcblx0XHRcdHg6d2lkdGgvMi0xNTAsXG5cdFx0XHR5OmhlaWdodC8yLTE1MCxcblx0XHRcdHdpZHRoOjMwMCxcblx0XHRcdGhlaWdodDozMDAsXG5cdFx0XHR2ZWxYIDowLFxuXHRcdFx0dmVsWSA6LTEwLFxuXHRcdFx0YWxwaGF0b3A6MFxuXHRcdH07XG5cblxuXHRcdGZ1bmN0aW9uIGRyYXdTY3JlZW4oKXtcblx0XHRcdHZhciBzaXplID0gNTA7XG5cdFx0XHRpZiAocjEuYWxwaGF0b3AgPCAxKXtcblx0XHRcdFx0cjEuYWxwaGF0b3AgKz0gMC4wMTtcblx0XHRcdH0gZWxzZXtcblx0XHRcdFx0cjEuYWxwaGF0b3AgPSAxO1xuXHRcdFx0fVxuXHRcdFx0Y29udGV4dC5nbG9iYWxBbHBoYSA9IHIxLmFscGhhdG9wO1xuXG5cdFx0XHRpZihyMS5hbHBoYXRvcCA9PT0gMSl7XG5cdFx0XHRcdHIxLnZlbFkqPSAwLjk5OTtcblx0XHRcdFx0cjEudmVsWSArPSAwLjM7XG5cdFx0XHRcdHIxLnggKz0gcjEudmVsWDtcblx0XHRcdFx0cjEueSArPSByMS52ZWxZO1xuXHRcdFx0fVxuXG5cdFx0XHRpZihyMS55ICsgcjEuaGVpZ2h0ID4gaGVpZ2h0KXtcblx0XHRcdFx0cjEuYW5nbGVzcGluID0gMDtcblx0XHRcdFx0cjEueSA9IGhlaWdodCAtIHIxLmhlaWdodDtcblx0XHRcdFx0cjEudmVsWSAqPSAtMC44O1xuXHRcdFx0XHRyMS52ZWxYICo9IDAuOTtcblx0XHRcdH1cblxuXHRcdFx0Y29udGV4dC5nbG9iYWxBbHBoYSA9IDE7XG5cblx0XHRcdGZvciggdmFyIGkgPSAwOyBpIDwgcGFydGljbGUubGVuZ3RoOyBpKyspe1xuXHRcdFx0XHRwYXJ0aWNsZVtpXS5kcmF3KCk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gdXBkYXRlKCl7XG5cdFx0XHRjb250ZXh0LmNsZWFyUmVjdCgwLDAsd2lkdGgsaGVpZ2h0KTtcblx0XHRcdGRyYXdTY3JlZW4oKTtcblx0XHRcdHJlcXVlc3RJZCA9IHJlcXVlc3RBbmltYXRpb25GcmFtZSh1cGRhdGUpO1xuXHRcdH1cblxuXHRcdHVwZGF0ZSgpO1xuXG5cdFx0c2V0VGltZW91dChmdW5jdGlvbigpe1xuXHRcdFx0d2luZG93LmNhbmNlbEFuaW1hdGlvbkZyYW1lKHJlcXVlc3RJZCk7XG5cdFx0XHRyZXF1ZXN0SWQgPSB1bmRlZmluZWQ7XG5cdFx0fSw1MDAwKTtcblxuXHRcdGZ1bmN0aW9uIHJhbmRvbVJhbmdlKG1pbiwgbWF4KXtcblx0XHRcdHJldHVybiBtaW4gKyBNYXRoLnJhbmRvbSgpICogKG1heCAtIG1pbiApO1xuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIHJhbmRvbUludChtaW4sIG1heCl7XG5cdFx0XHRyZXR1cm4gTWF0aC5mbG9vcihtaW4gKyBNYXRoLnJhbmRvbSgpKiAobWF4IC0gbWluICsgMSkpO1xuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIGNvbnZlcnRUb1JhZGlhbnMoZGVncmVlKSB7XG5cdFx0XHRyZXR1cm4gZGVncmVlKihNYXRoLlBJLzE4MCk7XG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gZHJhd1N0YXIoY3gsIGN5LCBzcGlrZXMsIG91dGVyUmFkaXVzLCBpbm5lclJhZGl1cyxjb2xvcikge1xuXHRcdFx0dmFyIHJvdCA9IE1hdGguUEkgLyAyICogMztcblx0XHRcdHZhciB4ID0gY3g7XG5cdFx0XHR2YXIgeSA9IGN5O1xuXHRcdFx0dmFyIHN0ZXAgPSBNYXRoLlBJIC8gc3Bpa2VzO1xuXG5cdFx0XHRjb250ZXh0LnN0cm9rZVN5bGUgPSBcIiMwMDBcIjtcblx0XHRcdGNvbnRleHQuYmVnaW5QYXRoKCk7XG5cdFx0XHRjb250ZXh0Lm1vdmVUbyhjeCwgY3kgLSBvdXRlclJhZGl1cyk7XG5cdFx0XHRmb3IgKGkgPSAwOyBpIDwgc3Bpa2VzOyBpKyspIHtcblx0XHRcdFx0eCA9IGN4ICsgTWF0aC5jb3Mocm90KSAqIG91dGVyUmFkaXVzO1xuXHRcdFx0XHR5ID0gY3kgKyBNYXRoLnNpbihyb3QpICogb3V0ZXJSYWRpdXM7XG5cdFx0XHRcdGNvbnRleHQubGluZVRvKHgsIHkpO1xuXHRcdFx0XHRyb3QgKz0gc3RlcDtcblxuXHRcdFx0XHR4ID0gY3ggKyBNYXRoLmNvcyhyb3QpICogaW5uZXJSYWRpdXM7XG5cdFx0XHRcdHkgPSBjeSArIE1hdGguc2luKHJvdCkgKiBpbm5lclJhZGl1cztcblx0XHRcdFx0Y29udGV4dC5saW5lVG8oeCwgeSk7XG5cdFx0XHRcdHJvdCArPSBzdGVwO1xuXHRcdFx0fVxuXG5cdFx0XHRjb250ZXh0LmxpbmVUbyhjeCwgY3kgLSBvdXRlclJhZGl1cyk7XG5cdFx0XHRjb250ZXh0LmNsb3NlUGF0aCgpO1xuXHRcdFx0Y29udGV4dC5maWxsU3R5bGU9Y29sb3I7XG5cdFx0XHRjb250ZXh0LmZpbGwoKTtcblx0XHR9XG5cblx0XHRmdW5jdGlvbiBkcmF3KCl7XG5cdFx0XHRjb250ZXh0LnNhdmUoKTtcblx0XHRcdGNvbnRleHQudHJhbnNsYXRlKHRoaXMueCx0aGlzLnkpO1xuXHRcdFx0Y29udGV4dC5yb3RhdGUodGhpcy5hbmdsZSk7XG5cdFx0XHRjb250ZXh0LmZpbGxTdHlsZT10aGlzLmNvbG9yO1xuXHRcdFx0Y29udGV4dC5iZWdpblBhdGgoKTtcblx0XHRcdC8vIGRyYXdTdGFyKDAsIDAsIDUsIHRoaXMuYm94VywgdGhpcy5ib3hIKTtcblx0XHRcdGNvbnRleHQuZmlsbFJlY3QodGhpcy5ib3hXLzIqLTEsdGhpcy5ib3hILzIqLTEsdGhpcy5ib3hXLHRoaXMuYm94SCk7XG5cdFx0XHRjb250ZXh0LmZpbGwoKTtcblx0XHRcdGNvbnRleHQuY2xvc2VQYXRoKCk7XG5cdFx0XHRjb250ZXh0LnJlc3RvcmUoKTtcblx0XHRcdHRoaXMuYW5nbGUgKz0gdGhpcy5hbmdsZXNwaW47XG5cdFx0XHR0aGlzLnZlbFkqPSAwLjk5OTtcblx0XHRcdHRoaXMudmVsWSArPSAwLjM7XG5cdFx0XHR0aGlzLnggKz0gdGhpcy52ZWxYO1xuXHRcdFx0dGhpcy55ICs9IHRoaXMudmVsWTtcblxuXHRcdFx0aWYodGhpcy55IDwgMCl7XG5cdFx0XHRcdHRoaXMudmVsWSAqPSAtMC4yO1xuXHRcdFx0XHR0aGlzLnZlbFggKj0gMC45O1xuXHRcdFx0fVxuXHRcdFx0aWYgKHRoaXMueSA+IGhlaWdodCl7XG5cdFx0XHRcdHRoaXMuYW5nbGVzcGluID0gMDtcblx0XHRcdFx0dGhpcy55ID0gaGVpZ2h0O1xuXHRcdFx0XHR0aGlzLnZlbFkgKj0gLTAuMjtcblx0XHRcdFx0dGhpcy52ZWxYICo9IDAuOTtcblx0XHRcdH1cblx0XHRcdGlmICh0aGlzLnggPiB3aWR0aCB8fHRoaXMueDwgMCl7XG5cdFx0XHRcdHRoaXMudmVsWCAqPSAtMC41O1xuXHRcdFx0fVxuXG5cdFx0fVxuXHR9XG5cbn0pO1xuIiwiYXBwLmNvbmZpZyhmdW5jdGlvbigkc3RhdGVQcm92aWRlcil7XG5cdCRzdGF0ZVByb3ZpZGVyXG5cdC5zdGF0ZSgnaG9tZScsIHtcblx0XHR1cmw6ICcvJyxcblx0XHR0ZW1wbGF0ZVVybDogJy9qcy90ZW1wbGF0ZXMvaG9tZS5odG1sJyxcblx0XHRjb250cm9sbGVyOiAnaG9tZUN0cmwnXG5cdH0pXG5cdC5zdGF0ZSgncHJvamVjdHMnLCB7XG5cdFx0dXJsOiAnL3Byb2plY3RzJyxcblx0XHR0ZW1wbGF0ZVVybDogJy9qcy90ZW1wbGF0ZXMvcHJvamVjdHMuaHRtbCcsXG5cdFx0Y29udHJvbGxlcjogJ3Byb2plY3RDdHJsJ1xuXHR9KVxuXHQuc3RhdGUoJ2Fib3V0Jywge1xuXHRcdHVybDogJy9hYm91dCcsXG5cdFx0dGVtcGxhdGVVcmw6ICcvanMvdGVtcGxhdGVzL2Fib3V0Lmh0bWwnLFxuXHRcdGNvbnRyb2xsZXI6ICdhYm91dEN0cmwnXG5cdH0pXG5cdC5zdGF0ZSgnY29udGFjdCcsIHtcblx0XHR1cmw6ICcvY29udGFjdCcsXG5cdFx0dGVtcGxhdGVVcmw6ICcvanMvdGVtcGxhdGVzL2NvbnRhY3QuaHRtbCcsXG5cdFx0Y29udHJvbGxlcjogJ2NvbnRhY3RDdHJsJ1xuXHR9KTtcbn0pO1xuXG5hcHAuY29udHJvbGxlcignaG9tZUN0cmwnLCBmdW5jdGlvbigpe1xuXHR2YXIgaW5jcmVtZW50ID0gMDtcblx0dmFyIGNhcm91c2VsID0gJCgnI2Nhcm91c2VsJyk7XG5cdHZhciBjdXJyZW50ID0gJyNmaWctMSc7XG5cdHZhciBwcmV2O1xuXHRzZXRJbnRlcnZhbCggZnVuY3Rpb24oKXtcblx0XHRpbmNyZW1lbnQrKztcblx0XHRjYXJvdXNlbC5jc3Moe1xuXHRcdFx0Jy13ZWJraXQtdHJhbnNmb3JtJzogJ3JvdGF0ZVgoJyArIChpbmNyZW1lbnQgKiAtNjApICsgJ2RlZyknXG5cdFx0fSk7XG5cdFx0Y2Fyb3VzZWwuYXR0cignZGF0YS1zdGF0ZScsKGluY3JlbWVudCAlIDYpICsgMSk7XG5cblx0XHRwcmV2ID0gY3VycmVudDtcblx0XHRjdXJyZW50ID0gJyNmaWctJyArICgoaW5jcmVtZW50ICUgNikgKyAxKTtcblx0fSwxNTAwKTtcblxuXHQvLyB2YXIgY2lyY2xlMSA9ICQoJyNjaXJjbGUtMScpO1xuXHQvLyBjb25zb2xlLmxvZygnJGNpcmNsZS0xJywgY2lyY2xlMSk7XG5cdC8vIHZhciBjaXJjbGUyID0gJCgnI2NpcmNsZS0yJyk7XG5cdC8vIC8vIHZhciBjaXJjbGUzID0gJCgnI2NpcmNsZS0zJyk7XG5cdC8vXG5cdC8vIGNpcmNsZTEuY2xpY2soZnVuY3Rpb24oKXtcblx0Ly8gXHRjaXJjbGUxLmFkZENsYXNzKCdzcGluLWNsb2Nrd2lzZScpO1xuXHQvLyBcdHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcblx0Ly8gXHRcdGNpcmNsZTIuYWRkQ2xhc3MoJ3NwaW4tY291bnRlcmNsb2Nrd2lzZScpO1xuXHQvLyBcdH0sNTAwKTtcblx0Ly8gfSk7XG59KTtcbiIsImFwcC5jb250cm9sbGVyKCdwcm9qZWN0Q3RybCcsIGZ1bmN0aW9uKCRzY29wZSl7XG5cdCQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCkge1xuXG5cdFx0dmFyIGN1clBhZ2UgPSAxO1xuXHRcdHZhciBudW1PZlBhZ2VzID0gJChcIi5za3ctcGFnZVwiKS5sZW5ndGg7XG5cdFx0dmFyIGFuaW1UaW1lID0gMTAwMDtcblx0XHR2YXIgc2Nyb2xsaW5nID0gZmFsc2U7XG5cdFx0dmFyIHBnUHJlZml4ID0gXCIuc2t3LXBhZ2UtXCI7XG5cblx0XHRmdW5jdGlvbiBwYWdpbmF0aW9uKCkge1xuXHRcdFx0c2Nyb2xsaW5nID0gdHJ1ZTtcblxuXHRcdFx0JChwZ1ByZWZpeCArIGN1clBhZ2UpLnJlbW92ZUNsYXNzKFwiaW5hY3RpdmVcIikuYWRkQ2xhc3MoXCJhY3RpdmVcIik7XG5cdFx0XHQkKHBnUHJlZml4ICsgKGN1clBhZ2UgLSAxKSkuYWRkQ2xhc3MoXCJpbmFjdGl2ZVwiKTtcblx0XHRcdCQocGdQcmVmaXggKyAoY3VyUGFnZSArIDEpKS5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKTtcblxuXHRcdFx0c2V0VGltZW91dChmdW5jdGlvbigpIHtcblx0XHRcdFx0c2Nyb2xsaW5nID0gZmFsc2U7XG5cdFx0XHR9LCBhbmltVGltZSk7XG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gbmF2aWdhdGVVcCgpIHtcblx0XHRcdGlmIChjdXJQYWdlID09PSAxKSByZXR1cm47XG5cdFx0XHRjdXJQYWdlLS07XG5cdFx0XHRwYWdpbmF0aW9uKCk7XG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gbmF2aWdhdGVEb3duKCkge1xuXHRcdFx0aWYgKGN1clBhZ2UgPT09IG51bU9mUGFnZXMpIHJldHVybjtcblx0XHRcdGN1clBhZ2UrKztcblx0XHRcdHBhZ2luYXRpb24oKTtcblx0XHR9XG5cblx0XHQkKGRvY3VtZW50KS5vbihcIm1vdXNld2hlZWwgRE9NTW91c2VTY3JvbGxcIiwgZnVuY3Rpb24oZSkge1xuXHRcdFx0aWYgKHNjcm9sbGluZykgcmV0dXJuO1xuXHRcdFx0aWYgKGUub3JpZ2luYWxFdmVudC53aGVlbERlbHRhID4gMCB8fCBlLm9yaWdpbmFsRXZlbnQuZGV0YWlsIDwgMCkge1xuXHRcdFx0XHRuYXZpZ2F0ZVVwKCk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRuYXZpZ2F0ZURvd24oKTtcblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdCQoZG9jdW1lbnQpLm9uKFwia2V5ZG93blwiLCBmdW5jdGlvbihlKSB7XG5cdFx0XHRpZiAoc2Nyb2xsaW5nKSByZXR1cm47XG5cdFx0XHRpZiAoZS53aGljaCA9PT0gMzgpIHtcblx0XHRcdFx0bmF2aWdhdGVVcCgpO1xuXHRcdFx0fSBlbHNlIGlmIChlLndoaWNoID09PSA0MCkge1xuXHRcdFx0XHRuYXZpZ2F0ZURvd24oKTtcblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdCQoJyNkb3duLWFycm93JykuY2xpY2soZnVuY3Rpb24oKXtcblx0XHRcdGlmIChzY3JvbGxpbmcpIHJldHVybjtcblx0XHRcdG5hdmlnYXRlRG93bigpO1xuXHRcdH0pO1xuXG5cdH0pO1xufSk7XG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
