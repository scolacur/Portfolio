'use strict';

window.app = angular.module('portfolio', ['ui.router']);

app.config(function ($urlRouterProvider, $locationProvider, $urlMatcherFactoryProvider) {

	// this makes the '/stores/' route correctly redirect to '/stores'
	$urlRouterProvider.rule(function ($injector, $location) {

		var re = /(.+)(\/+)(\?.*)?$/;
		var path = $location.url();

		if (re.test(path)) {
			return path.replace(re, '$1$3');
		}

		return false;
	});
	// This turns off hashbang urls (/#about) and changes it to something normal (/about)
	$locationProvider.html5Mode(true);
	$urlRouterProvider.when('/auth/:provider', function () {
		window.location.reload();
	});
	// If we go to a URL that ui-router doesn't have registered, go to the "/" url.
	$urlRouterProvider.otherwise('/');
});

app.controller('aboutCtrl', function ($scope) {
	var increment = 0;
	var carousel = $('#carousel');

	setInterval(function () {
		increment++;
		carousel.css({
			'-webkit-transform': 'rotateX(' + increment * -60 + 'deg)'
		});
		var pastSix = -1;
		if (increment >= 6) {
			increment = 0;
		}
		carousel.attr('data-state', increment % 6 + 1);
	}, 1500);
});

app.controller('contactCtrl', function ($scope, $http) {
	$scope.formData = {};

	$scope.sendMail = function () {
		$scope.waiting = true;
		$scope.sent = false;
		$scope.success = false;
		$http.post('/api/contact', $scope.formData).then(function (successResponse) {
			console.log(successResponse);
			$scope.waiting = false;
			$scope.sent = true;
			$scope.success = successResponse.data;
			$scope.formData = {};
		});
	};
});

app.config(function ($stateProvider) {
	$stateProvider.state('home', {
		url: '/',
		templateUrl: '/js/templates/home.html'
	}).state('projects', {
		url: '/projects',
		templateUrl: '/js/templates/projects.html',
		controller: 'projectCtrl'
	}).state('about', {
		url: '/about',
		templateUrl: '/js/templates/about.html',
		controller: 'aboutCtrl'
	}).state('contact', {
		url: '/contact',
		templateUrl: '/js/templates/contact.html',
		controller: 'contactCtrl'
	});
});

app.controller('projectCtrl', function ($scope) {
	$(document).ready(function () {

		var curPage = 1;
		var numOfPages = $(".skw-page").length;
		var animTime = 1000;
		var scrolling = false;
		var pgPrefix = ".skw-page-";

		function pagination() {
			scrolling = true;

			$(pgPrefix + curPage).removeClass("inactive").addClass("active");
			$(pgPrefix + (curPage - 1)).addClass("inactive");
			$(pgPrefix + (curPage + 1)).removeClass("active");

			setTimeout(function () {
				scrolling = false;
			}, animTime);
		}

		function navigateUp() {
			if (curPage === 1) return;
			curPage--;
			pagination();
		}

		function navigateDown() {
			if (curPage === numOfPages) return;
			curPage++;
			pagination();
		}

		$(document).on("mousewheel DOMMouseScroll", function (e) {
			if (scrolling) return;
			if (e.originalEvent.wheelDelta > 0 || e.originalEvent.detail < 0) {
				navigateUp();
			} else {
				navigateDown();
			}
		});

		$(document).on("keydown", function (e) {
			if (scrolling) return;
			if (e.which === 38) {
				navigateUp();
			} else if (e.which === 40) {
				navigateDown();
			}
		});
	});
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsImFib3V0LmpzIiwiY29udGFjdC5qcyIsImhvbWUuanMiLCJwcm9qZWN0LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsTUFBQSxDQUFBLEdBQUEsR0FBQSxPQUFBLENBQUEsTUFBQSxDQUFBLFdBQUEsRUFBQSxDQUFBLFdBQUEsQ0FBQSxDQUFBLENBQUE7O0FBRUEsR0FBQSxDQUFBLE1BQUEsQ0FBQSxVQUFBLGtCQUFBLEVBQUEsaUJBQUEsRUFBQSwwQkFBQSxFQUFBOzs7QUFHQSxtQkFBQSxDQUFBLElBQUEsQ0FBQSxVQUFBLFNBQUEsRUFBQSxTQUFBLEVBQUE7O0FBRUEsTUFBQSxFQUFBLEdBQUEsbUJBQUEsQ0FBQTtBQUNBLE1BQUEsSUFBQSxHQUFBLFNBQUEsQ0FBQSxHQUFBLEVBQUEsQ0FBQTs7QUFFQSxNQUFBLEVBQUEsQ0FBQSxJQUFBLENBQUEsSUFBQSxDQUFBLEVBQUE7QUFDQSxVQUFBLElBQUEsQ0FBQSxPQUFBLENBQUEsRUFBQSxFQUFBLE1BQUEsQ0FBQSxDQUFBO0dBQ0E7O0FBRUEsU0FBQSxLQUFBLENBQUE7RUFDQSxDQUFBOztBQUFBLEFBRUEsa0JBQUEsQ0FBQSxTQUFBLENBQUEsSUFBQSxDQUFBLENBQUE7QUFDQSxtQkFBQSxDQUFBLElBQUEsQ0FBQSxpQkFBQSxFQUFBLFlBQUE7QUFDQSxRQUFBLENBQUEsUUFBQSxDQUFBLE1BQUEsRUFBQSxDQUFBO0VBQ0EsQ0FBQTs7QUFBQSxBQUVBLG1CQUFBLENBQUEsU0FBQSxDQUFBLEdBQUEsQ0FBQSxDQUFBO0NBQ0EsQ0FBQSxDQUFBOztBQ3ZCQSxHQUFBLENBQUEsVUFBQSxDQUFBLFdBQUEsRUFBQSxVQUFBLE1BQUEsRUFBQTtBQUNBLEtBQUEsU0FBQSxHQUFBLENBQUEsQ0FBQTtBQUNBLEtBQUEsUUFBQSxHQUFBLENBQUEsQ0FBQSxXQUFBLENBQUEsQ0FBQTs7QUFFQSxZQUFBLENBQUEsWUFBQTtBQUNBLFdBQUEsRUFBQSxDQUFBO0FBQ0EsVUFBQSxDQUFBLEdBQUEsQ0FBQTtBQUNBLHNCQUFBLEVBQUEsVUFBQSxHQUFBLFNBQUEsR0FBQSxDQUFBLEVBQUEsR0FBQSxNQUFBO0dBQ0EsQ0FBQSxDQUFBO0FBQ0EsTUFBQSxPQUFBLEdBQUEsQ0FBQSxDQUFBLENBQUE7QUFDQSxNQUFBLFNBQUEsSUFBQSxDQUFBLEVBQUE7QUFDQSxZQUFBLEdBQUEsQ0FBQSxDQUFBO0dBQ0E7QUFDQSxVQUFBLENBQUEsSUFBQSxDQUFBLFlBQUEsRUFBQSxTQUFBLEdBQUEsQ0FBQSxHQUFBLENBQUEsQ0FBQSxDQUFBO0VBQ0EsRUFBQSxJQUFBLENBQUEsQ0FBQTtDQUNBLENBQUEsQ0FBQTs7QUNmQSxHQUFBLENBQUEsVUFBQSxDQUFBLGFBQUEsRUFBQSxVQUFBLE1BQUEsRUFBQSxLQUFBLEVBQUE7QUFDQSxPQUFBLENBQUEsUUFBQSxHQUFBLEVBQUEsQ0FBQTs7QUFFQSxPQUFBLENBQUEsUUFBQSxHQUFBLFlBQUE7QUFDQSxRQUFBLENBQUEsT0FBQSxHQUFBLElBQUEsQ0FBQTtBQUNBLFFBQUEsQ0FBQSxJQUFBLEdBQUEsS0FBQSxDQUFBO0FBQ0EsUUFBQSxDQUFBLE9BQUEsR0FBQSxLQUFBLENBQUE7QUFDQSxPQUFBLENBQUEsSUFBQSxDQUFBLGNBQUEsRUFBQSxNQUFBLENBQUEsUUFBQSxDQUFBLENBQ0EsSUFBQSxDQUFBLFVBQUEsZUFBQSxFQUFBO0FBQ0EsVUFBQSxDQUFBLEdBQUEsQ0FBQSxlQUFBLENBQUEsQ0FBQTtBQUNBLFNBQUEsQ0FBQSxPQUFBLEdBQUEsS0FBQSxDQUFBO0FBQ0EsU0FBQSxDQUFBLElBQUEsR0FBQSxJQUFBLENBQUE7QUFDQSxTQUFBLENBQUEsT0FBQSxHQUFBLGVBQUEsQ0FBQSxJQUFBLENBQUE7QUFDQSxTQUFBLENBQUEsUUFBQSxHQUFBLEVBQUEsQ0FBQTtHQUNBLENBQUEsQ0FBQTtFQUNBLENBQUE7Q0FDQSxDQUFBLENBQUE7O0FDaEJBLEdBQUEsQ0FBQSxNQUFBLENBQUEsVUFBQSxjQUFBLEVBQUE7QUFDQSxlQUFBLENBQ0EsS0FBQSxDQUFBLE1BQUEsRUFBQTtBQUNBLEtBQUEsRUFBQSxHQUFBO0FBQ0EsYUFBQSxFQUFBLHlCQUFBO0VBQ0EsQ0FBQSxDQUNBLEtBQUEsQ0FBQSxVQUFBLEVBQUE7QUFDQSxLQUFBLEVBQUEsV0FBQTtBQUNBLGFBQUEsRUFBQSw2QkFBQTtBQUNBLFlBQUEsRUFBQSxhQUFBO0VBQ0EsQ0FBQSxDQUNBLEtBQUEsQ0FBQSxPQUFBLEVBQUE7QUFDQSxLQUFBLEVBQUEsUUFBQTtBQUNBLGFBQUEsRUFBQSwwQkFBQTtBQUNBLFlBQUEsRUFBQSxXQUFBO0VBQ0EsQ0FBQSxDQUNBLEtBQUEsQ0FBQSxTQUFBLEVBQUE7QUFDQSxLQUFBLEVBQUEsVUFBQTtBQUNBLGFBQUEsRUFBQSw0QkFBQTtBQUNBLFlBQUEsRUFBQSxhQUFBO0VBQ0EsQ0FBQSxDQUFBO0NBQ0EsQ0FBQSxDQUFBOztBQ3JCQSxHQUFBLENBQUEsVUFBQSxDQUFBLGFBQUEsRUFBQSxVQUFBLE1BQUEsRUFBQTtBQUNBLEVBQUEsQ0FBQSxRQUFBLENBQUEsQ0FBQSxLQUFBLENBQUEsWUFBQTs7QUFFQSxNQUFBLE9BQUEsR0FBQSxDQUFBLENBQUE7QUFDQSxNQUFBLFVBQUEsR0FBQSxDQUFBLENBQUEsV0FBQSxDQUFBLENBQUEsTUFBQSxDQUFBO0FBQ0EsTUFBQSxRQUFBLEdBQUEsSUFBQSxDQUFBO0FBQ0EsTUFBQSxTQUFBLEdBQUEsS0FBQSxDQUFBO0FBQ0EsTUFBQSxRQUFBLEdBQUEsWUFBQSxDQUFBOztBQUVBLFdBQUEsVUFBQSxHQUFBO0FBQ0EsWUFBQSxHQUFBLElBQUEsQ0FBQTs7QUFFQSxJQUFBLENBQUEsUUFBQSxHQUFBLE9BQUEsQ0FBQSxDQUFBLFdBQUEsQ0FBQSxVQUFBLENBQUEsQ0FBQSxRQUFBLENBQUEsUUFBQSxDQUFBLENBQUE7QUFDQSxJQUFBLENBQUEsUUFBQSxJQUFBLE9BQUEsR0FBQSxDQUFBLENBQUEsQ0FBQSxDQUFBLFFBQUEsQ0FBQSxVQUFBLENBQUEsQ0FBQTtBQUNBLElBQUEsQ0FBQSxRQUFBLElBQUEsT0FBQSxHQUFBLENBQUEsQ0FBQSxDQUFBLENBQUEsV0FBQSxDQUFBLFFBQUEsQ0FBQSxDQUFBOztBQUVBLGFBQUEsQ0FBQSxZQUFBO0FBQ0EsYUFBQSxHQUFBLEtBQUEsQ0FBQTtJQUNBLEVBQUEsUUFBQSxDQUFBLENBQUE7R0FDQTs7QUFFQSxXQUFBLFVBQUEsR0FBQTtBQUNBLE9BQUEsT0FBQSxLQUFBLENBQUEsRUFBQSxPQUFBO0FBQ0EsVUFBQSxFQUFBLENBQUE7QUFDQSxhQUFBLEVBQUEsQ0FBQTtHQUNBOztBQUVBLFdBQUEsWUFBQSxHQUFBO0FBQ0EsT0FBQSxPQUFBLEtBQUEsVUFBQSxFQUFBLE9BQUE7QUFDQSxVQUFBLEVBQUEsQ0FBQTtBQUNBLGFBQUEsRUFBQSxDQUFBO0dBQ0E7O0FBRUEsR0FBQSxDQUFBLFFBQUEsQ0FBQSxDQUFBLEVBQUEsQ0FBQSwyQkFBQSxFQUFBLFVBQUEsQ0FBQSxFQUFBO0FBQ0EsT0FBQSxTQUFBLEVBQUEsT0FBQTtBQUNBLE9BQUEsQ0FBQSxDQUFBLGFBQUEsQ0FBQSxVQUFBLEdBQUEsQ0FBQSxJQUFBLENBQUEsQ0FBQSxhQUFBLENBQUEsTUFBQSxHQUFBLENBQUEsRUFBQTtBQUNBLGNBQUEsRUFBQSxDQUFBO0lBQ0EsTUFBQTtBQUNBLGdCQUFBLEVBQUEsQ0FBQTtJQUNBO0dBQ0EsQ0FBQSxDQUFBOztBQUVBLEdBQUEsQ0FBQSxRQUFBLENBQUEsQ0FBQSxFQUFBLENBQUEsU0FBQSxFQUFBLFVBQUEsQ0FBQSxFQUFBO0FBQ0EsT0FBQSxTQUFBLEVBQUEsT0FBQTtBQUNBLE9BQUEsQ0FBQSxDQUFBLEtBQUEsS0FBQSxFQUFBLEVBQUE7QUFDQSxjQUFBLEVBQUEsQ0FBQTtJQUNBLE1BQUEsSUFBQSxDQUFBLENBQUEsS0FBQSxLQUFBLEVBQUEsRUFBQTtBQUNBLGdCQUFBLEVBQUEsQ0FBQTtJQUNBO0dBQ0EsQ0FBQSxDQUFBO0VBQ0EsQ0FBQSxDQUFBO0NBQ0EsQ0FBQSxDQUFBIiwiZmlsZSI6Im1haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJ3aW5kb3cuYXBwID0gYW5ndWxhci5tb2R1bGUoJ3BvcnRmb2xpbycsIFsndWkucm91dGVyJ10pO1xuXG5hcHAuY29uZmlnKGZ1bmN0aW9uICgkdXJsUm91dGVyUHJvdmlkZXIsICRsb2NhdGlvblByb3ZpZGVyLCAkdXJsTWF0Y2hlckZhY3RvcnlQcm92aWRlcikge1xuXG5cdC8vIHRoaXMgbWFrZXMgdGhlICcvc3RvcmVzLycgcm91dGUgY29ycmVjdGx5IHJlZGlyZWN0IHRvICcvc3RvcmVzJ1xuXHQkdXJsUm91dGVyUHJvdmlkZXIucnVsZShmdW5jdGlvbiAoJGluamVjdG9yLCAkbG9jYXRpb24pIHtcblxuXHRcdHZhciByZSA9IC8oLispKFxcLyspKFxcPy4qKT8kLztcblx0XHR2YXIgcGF0aCA9ICRsb2NhdGlvbi51cmwoKTtcblxuXHRcdGlmKHJlLnRlc3QocGF0aCkpIHtcblx0XHRcdHJldHVybiBwYXRoLnJlcGxhY2UocmUsICckMSQzJyk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9KTtcblx0Ly8gVGhpcyB0dXJucyBvZmYgaGFzaGJhbmcgdXJscyAoLyNhYm91dCkgYW5kIGNoYW5nZXMgaXQgdG8gc29tZXRoaW5nIG5vcm1hbCAoL2Fib3V0KVxuXHQkbG9jYXRpb25Qcm92aWRlci5odG1sNU1vZGUodHJ1ZSk7XG5cdCR1cmxSb3V0ZXJQcm92aWRlci53aGVuKCcvYXV0aC86cHJvdmlkZXInLCBmdW5jdGlvbiAoKSB7XG5cdFx0d2luZG93LmxvY2F0aW9uLnJlbG9hZCgpO1xuXHR9KTtcblx0Ly8gSWYgd2UgZ28gdG8gYSBVUkwgdGhhdCB1aS1yb3V0ZXIgZG9lc24ndCBoYXZlIHJlZ2lzdGVyZWQsIGdvIHRvIHRoZSBcIi9cIiB1cmwuXG5cdCR1cmxSb3V0ZXJQcm92aWRlci5vdGhlcndpc2UoJy8nKTtcbn0pO1xuIiwiYXBwLmNvbnRyb2xsZXIoJ2Fib3V0Q3RybCcsIGZ1bmN0aW9uKCRzY29wZSl7XG5cdHZhciBpbmNyZW1lbnQgPSAwO1xuXHR2YXIgY2Fyb3VzZWwgPSAkKCcjY2Fyb3VzZWwnKTtcblxuXHRzZXRJbnRlcnZhbCggZnVuY3Rpb24oKXtcblx0XHRpbmNyZW1lbnQrKztcblx0XHRjYXJvdXNlbC5jc3Moe1xuXHRcdFx0Jy13ZWJraXQtdHJhbnNmb3JtJzogJ3JvdGF0ZVgoJyArIChpbmNyZW1lbnQgKiAtNjApICsgJ2RlZyknXG5cdFx0fSk7XG5cdFx0dmFyIHBhc3RTaXggPSAtMTtcblx0XHRpZihpbmNyZW1lbnQgPj0gNil7XG5cdFx0XHRpbmNyZW1lbnQgPSAwO1xuXHRcdH1cblx0XHRjYXJvdXNlbC5hdHRyKCdkYXRhLXN0YXRlJywoaW5jcmVtZW50ICUgNikrMSk7XG5cdH0sMTUwMCk7XG59KTtcbiIsImFwcC5jb250cm9sbGVyKCdjb250YWN0Q3RybCcsIGZ1bmN0aW9uKCRzY29wZSwgJGh0dHApe1xuXHQkc2NvcGUuZm9ybURhdGEgPSB7fTtcblxuXHQkc2NvcGUuc2VuZE1haWwgPSBmdW5jdGlvbigpe1xuXHRcdCRzY29wZS53YWl0aW5nID0gdHJ1ZTtcblx0XHQkc2NvcGUuc2VudCA9IGZhbHNlO1xuXHRcdCRzY29wZS5zdWNjZXNzID0gZmFsc2U7XG5cdFx0JGh0dHAucG9zdCgnL2FwaS9jb250YWN0JywgJHNjb3BlLmZvcm1EYXRhKVxuXHRcdC50aGVuKGZ1bmN0aW9uKHN1Y2Nlc3NSZXNwb25zZSl7XG5cdFx0XHRjb25zb2xlLmxvZyhzdWNjZXNzUmVzcG9uc2UpO1xuXHRcdFx0JHNjb3BlLndhaXRpbmcgPSBmYWxzZTtcblx0XHRcdCRzY29wZS5zZW50ID0gdHJ1ZTtcblx0XHRcdCRzY29wZS5zdWNjZXNzID0gc3VjY2Vzc1Jlc3BvbnNlLmRhdGE7XG5cdFx0XHQkc2NvcGUuZm9ybURhdGEgPSB7fTtcblx0XHR9KTtcblx0fTtcbn0pO1xuIiwiYXBwLmNvbmZpZyhmdW5jdGlvbigkc3RhdGVQcm92aWRlcil7XG5cdCRzdGF0ZVByb3ZpZGVyXG5cdC5zdGF0ZSgnaG9tZScsIHtcblx0XHR1cmw6ICcvJyxcblx0XHR0ZW1wbGF0ZVVybDogJy9qcy90ZW1wbGF0ZXMvaG9tZS5odG1sJ1xuXHR9KVxuXHQuc3RhdGUoJ3Byb2plY3RzJywge1xuXHRcdHVybDogJy9wcm9qZWN0cycsXG5cdFx0dGVtcGxhdGVVcmw6ICcvanMvdGVtcGxhdGVzL3Byb2plY3RzLmh0bWwnLFxuXHRcdGNvbnRyb2xsZXI6ICdwcm9qZWN0Q3RybCdcblx0fSlcblx0LnN0YXRlKCdhYm91dCcsIHtcblx0XHR1cmw6ICcvYWJvdXQnLFxuXHRcdHRlbXBsYXRlVXJsOiAnL2pzL3RlbXBsYXRlcy9hYm91dC5odG1sJyxcblx0XHRjb250cm9sbGVyOiAnYWJvdXRDdHJsJ1xuXHR9KVxuXHQuc3RhdGUoJ2NvbnRhY3QnLCB7XG5cdFx0dXJsOiAnL2NvbnRhY3QnLFxuXHRcdHRlbXBsYXRlVXJsOiAnL2pzL3RlbXBsYXRlcy9jb250YWN0Lmh0bWwnLFxuXHRcdGNvbnRyb2xsZXI6ICdjb250YWN0Q3RybCdcblx0fSk7XG59KTtcbiIsImFwcC5jb250cm9sbGVyKCdwcm9qZWN0Q3RybCcsIGZ1bmN0aW9uKCRzY29wZSl7XG5cdCQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCkge1xuXG5cdFx0dmFyIGN1clBhZ2UgPSAxO1xuXHRcdHZhciBudW1PZlBhZ2VzID0gJChcIi5za3ctcGFnZVwiKS5sZW5ndGg7XG5cdFx0dmFyIGFuaW1UaW1lID0gMTAwMDtcblx0XHR2YXIgc2Nyb2xsaW5nID0gZmFsc2U7XG5cdFx0dmFyIHBnUHJlZml4ID0gXCIuc2t3LXBhZ2UtXCI7XG5cblx0XHRmdW5jdGlvbiBwYWdpbmF0aW9uKCkge1xuXHRcdFx0c2Nyb2xsaW5nID0gdHJ1ZTtcblxuXHRcdFx0JChwZ1ByZWZpeCArIGN1clBhZ2UpLnJlbW92ZUNsYXNzKFwiaW5hY3RpdmVcIikuYWRkQ2xhc3MoXCJhY3RpdmVcIik7XG5cdFx0XHQkKHBnUHJlZml4ICsgKGN1clBhZ2UgLSAxKSkuYWRkQ2xhc3MoXCJpbmFjdGl2ZVwiKTtcblx0XHRcdCQocGdQcmVmaXggKyAoY3VyUGFnZSArIDEpKS5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKTtcblxuXHRcdFx0c2V0VGltZW91dChmdW5jdGlvbigpIHtcblx0XHRcdFx0c2Nyb2xsaW5nID0gZmFsc2U7XG5cdFx0XHR9LCBhbmltVGltZSk7XG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gbmF2aWdhdGVVcCgpIHtcblx0XHRcdGlmIChjdXJQYWdlID09PSAxKSByZXR1cm47XG5cdFx0XHRjdXJQYWdlLS07XG5cdFx0XHRwYWdpbmF0aW9uKCk7XG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gbmF2aWdhdGVEb3duKCkge1xuXHRcdFx0aWYgKGN1clBhZ2UgPT09IG51bU9mUGFnZXMpIHJldHVybjtcblx0XHRcdGN1clBhZ2UrKztcblx0XHRcdHBhZ2luYXRpb24oKTtcblx0XHR9XG5cblx0XHQkKGRvY3VtZW50KS5vbihcIm1vdXNld2hlZWwgRE9NTW91c2VTY3JvbGxcIiwgZnVuY3Rpb24oZSkge1xuXHRcdFx0aWYgKHNjcm9sbGluZykgcmV0dXJuO1xuXHRcdFx0aWYgKGUub3JpZ2luYWxFdmVudC53aGVlbERlbHRhID4gMCB8fCBlLm9yaWdpbmFsRXZlbnQuZGV0YWlsIDwgMCkge1xuXHRcdFx0XHRuYXZpZ2F0ZVVwKCk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRuYXZpZ2F0ZURvd24oKTtcblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdCQoZG9jdW1lbnQpLm9uKFwia2V5ZG93blwiLCBmdW5jdGlvbihlKSB7XG5cdFx0XHRpZiAoc2Nyb2xsaW5nKSByZXR1cm47XG5cdFx0XHRpZiAoZS53aGljaCA9PT0gMzgpIHtcblx0XHRcdFx0bmF2aWdhdGVVcCgpO1xuXHRcdFx0fSBlbHNlIGlmIChlLndoaWNoID09PSA0MCkge1xuXHRcdFx0XHRuYXZpZ2F0ZURvd24oKTtcblx0XHRcdH1cblx0XHR9KTtcblx0fSk7XG59KTtcbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
