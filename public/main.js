'use strict';

window.app = angular.module('portfolio', ['ui.router']);

app.config(function ($urlRouterProvider, $locationProvider, $urlMatcherFactoryProvider) {

	// this makes the '/stores/' route correctly redirect to '/stores'
	$urlRouterProvider.rule(function ($injector, $location) {

		var re = /(.+)(\/+)(\?.*)?$/;
		var path = $location.url();

		if (re.test(path)) {
			return path.replace(re, '$1$3');
		}

		return false;
	});
	// This turns off hashbang urls (/#about) and changes it to something normal (/about)
	$locationProvider.html5Mode(true);
	$urlRouterProvider.when('/auth/:provider', function () {
		window.location.reload();
	});
	// If we go to a URL that ui-router doesn't have registered, go to the "/" url.
	$urlRouterProvider.otherwise('/');
});

app.controller('aboutCtrl', function ($scope) {
	var width = 960,
	    height = 500;

	var svg = d3.select("#about").append("svg").attr("width", width).attr("height", height);

	var skills = [{ name: "JavaScript", level: 3 }, { name: "MongoDB", level: 3 }, { name: "Express.js", level: 3 }, { name: "Angular.js", level: 3 }, { name: "Node.js", level: 3 }, { name: "Mongoose.js", level: 3 }, { name: "Git", level: 3 }, { name: "CSS3", level: 3 }, { name: "HTML5", level: 3 }];

	//create nodes
	var nodes = d3.range(skills.length).map(function (i) {
		return {
			// radius: Math.random() * 40 + 30,
			radius: skills[i].level * 15 + 30,
			label: skills[i].name,
			skillLevel: skills[i].level
		};
	});

	//initialize variables and root node
	var root = nodes[0],
	   
	// color = d3.scale.category10();
	colors = ['#7FFFD4', '#E0FFFF', '#33CCFF', '#C688E8', '#FF807D', '#FF8EB2'];
	root.radius = 0;
	root.fixed = true;

	console.log("nodes: ", nodes);

	// console.log("nodes 0:", nodes[0]);

	var groups = svg.selectAll("g").data(nodes.slice(1)).enter().append("g");

	// groups.attr("transform", function(d, i) {
	// 	var x = 78 * i + 100;
	// 	var y = 44 * i + 93;
	// 	return "translate(" + [x,y] + ")";
	// });

	var circles = groups.append('circle')
	// var circles = svg.selectAll("circle")
	.data(nodes.slice(1))
	// .enter()
	//.append("circle")
	.attr("r", function (d) {
		return d.radius;
	}).style("fill", function (d, i) {
		return colors[i % 6];
	});
	// .innerHTML("")

	var label = groups.append("text")
	// var label = circles.append("text")
	.text(function (d) {
		return d.label;
	}).attr({
		"alignment-baseline": "middle",
		"text-anchor": "middle"
	});

	console.log(svg.selectAll("circle")[0][0]);

	var force = d3.layout.force().gravity(0.05).charge(function (d, i) {
		return i ? 0 : -2000;
	}).nodes(nodes).size([width, height]);

	force.start();

	force.on("tick", function (e) {
		var q = d3.geom.quadtree(nodes),
		    i = 0,
		    n = nodes.length;

		while (++i < n) q.visit(collide(nodes[i]));

		svg.selectAll("circle").attr("cx", function (d) {
			return d.x;
		}).attr("cy", function (d) {
			return d.y;
		});

		svg.selectAll("text").attr("x", function (d) {
			return d.x;
		}).attr("y", function (d) {
			return d.y;
		});
	});

	svg.on("mousemove", function () {
		var p1 = d3.mouse(this);
		root.px = p1[0];
		root.py = p1[1];
		force.resume();
	});

	function collide(node) {
		console.log('node: ', node);
		var r = node.radius + 16,
		    nx1 = node.x - r,
		    nx2 = node.x + r,
		    ny1 = node.y - r,
		    ny2 = node.y + r;
		return function (quad, x1, y1, x2, y2) {
			if (quad.point && quad.point !== node) {
				var x = node.x - quad.point.x,
				    y = node.y - quad.point.y,
				    l = Math.sqrt(x * x + y * y),
				    r = node.radius + quad.point.radius;
				if (l < r) {
					l = (l - r) / l * 0.5;
					node.x -= x *= l;
					node.y -= y *= l;
					quad.point.x += x;
					quad.point.y += y;
				}
			}
			return x1 > nx2 || x2 < nx1 || y1 > ny2 || y2 < ny1;
		};
	}
});

app.controller('contactCtrl', function ($scope, $http) {
	$scope.formData = {};

	$scope.sendMail = function () {
		$scope.waiting = true;
		$scope.sent = false;
		$scope.success = false;
		$http.post('/api/contact', $scope.formData).then(function (successResponse) {
			console.log(successResponse);
			$scope.waiting = false;
			$scope.sent = true;
			$scope.success = successResponse.data;
			$scope.formData = {};
		});
	};

	var card = $('#card');
	var note = $('.note');
	var toggle = true;

	card.click(function () {
		if (toggle) {
			card.removeClass('hidden').removeClass('initial').addClass('visible');
			// note.css({'display': 'initial'});
			setTimeout(explode, 500);
			setTimeout(function () {
				$('#canvas').css({ 'display': 'none' });
			}, 5000);
		} else {
			card.removeClass('visible').addClass('hidden');
			// note.css({'display': 'none'});
		}
		toggle = !toggle;
	});

	function explode() {

		$('#canvas').css({ 'display': 'initial' });

		var requestId;

		var canvas = document.getElementById("canvas"),
		    context = canvas.getContext("2d"),
		    width = canvas.width = window.innerWidth,
		    height = canvas.height = window.innerHeight,
		    particle = [],
		    particleCount = 0,
		    gravity = 0.3,
		    colors =
		// [
		// 	'#f44336', '#e91e63', '#9c27b0', '#673ab7', '#3f51b5',
		// 	'#2196f3', '#03a9f4', '#00bcd4', '#009688', '#4CAF50',
		// 	'#8BC34A', '#CDDC39', '#FFEB3B', '#FFC107', '#FF9800',
		// 	'#FF5722', '#795548'
		// ];
		['#7FFFD4', '#E0FFFF', '#33CCFF', '#C688E8', '#FF807D', '#FF8EB2'];

		for (var i = 0; i < 50; i++) {
			particle.push({
				x: width / 7,
				y: height / 2,
				boxW: randomRange(5, 20),
				boxH: randomRange(5, 20),
				size: randomRange(2, 8),

				spikeran: randomRange(3, 5),

				velX: randomRange(-8, 8),
				velY: randomRange(-50, -10),

				angle: convertToRadians(randomRange(0, 360)),
				color: colors[Math.floor(Math.random() * colors.length)],
				anglespin: randomRange(-0.2, 0.2),

				draw: draw
			});
		}

		var r1 = {
			x: width / 2 - 150,
			y: height / 2 - 150,
			width: 300,
			height: 300,
			velX: 0,
			velY: -10,
			alphatop: 0
		};

		function drawScreen() {
			var size = 50;
			if (r1.alphatop < 1) {
				r1.alphatop += 0.01;
			} else {
				r1.alphatop = 1;
			}
			context.globalAlpha = r1.alphatop;

			if (r1.alphatop === 1) {
				r1.velY *= 0.999;
				r1.velY += 0.3;
				r1.x += r1.velX;
				r1.y += r1.velY;
			}

			if (r1.y + r1.height > height) {
				r1.anglespin = 0;
				r1.y = height - r1.height;
				r1.velY *= -0.8;
				r1.velX *= 0.9;
			}

			context.globalAlpha = 1;

			for (var i = 0; i < particle.length; i++) {
				particle[i].draw();
			}
		}

		function update() {
			context.clearRect(0, 0, width, height);
			drawScreen();
			requestId = requestAnimationFrame(update);
		}

		update();

		setTimeout(function () {
			window.cancelAnimationFrame(requestId);
			requestId = undefined;
		}, 5000);

		function randomRange(min, max) {
			return min + Math.random() * (max - min);
		}

		function randomInt(min, max) {
			return Math.floor(min + Math.random() * (max - min + 1));
		}

		function convertToRadians(degree) {
			return degree * (Math.PI / 180);
		}

		function drawStar(cx, cy, spikes, outerRadius, innerRadius, color) {
			var rot = Math.PI / 2 * 3;
			var x = cx;
			var y = cy;
			var step = Math.PI / spikes;

			context.strokeSyle = "#000";
			context.beginPath();
			context.moveTo(cx, cy - outerRadius);
			for (i = 0; i < spikes; i++) {
				x = cx + Math.cos(rot) * outerRadius;
				y = cy + Math.sin(rot) * outerRadius;
				context.lineTo(x, y);
				rot += step;

				x = cx + Math.cos(rot) * innerRadius;
				y = cy + Math.sin(rot) * innerRadius;
				context.lineTo(x, y);
				rot += step;
			}

			context.lineTo(cx, cy - outerRadius);
			context.closePath();
			context.fillStyle = color;
			context.fill();
		}

		function draw() {
			context.save();
			context.translate(this.x, this.y);
			context.rotate(this.angle);
			context.fillStyle = this.color;
			context.beginPath();
			// drawStar(0, 0, 5, this.boxW, this.boxH);
			context.fillRect(this.boxW / 2 * -1, this.boxH / 2 * -1, this.boxW, this.boxH);
			context.fill();
			context.closePath();
			context.restore();
			this.angle += this.anglespin;
			this.velY *= 0.999;
			this.velY += 0.3;
			this.x += this.velX;
			this.y += this.velY;

			if (this.y < 0) {
				this.velY *= -0.2;
				this.velX *= 0.9;
			}
			if (this.y > height) {
				this.anglespin = 0;
				this.y = height;
				this.velY *= -0.2;
				this.velX *= 0.9;
			}
			if (this.x > width || this.x < 0) {
				this.velX *= -0.5;
			}
		}
	}
});

app.config(function ($stateProvider) {
	$stateProvider.state('home', {
		url: '/',
		templateUrl: '/js/templates/home.html',
		controller: 'homeCtrl'
	}).state('projects', {
		url: '/projects',
		templateUrl: '/js/templates/projects.html',
		controller: 'projectCtrl'
	}).state('about', {
		url: '/about',
		templateUrl: '/js/templates/about.html',
		controller: 'aboutCtrl'
	}).state('contact', {
		url: '/contact',
		templateUrl: '/js/templates/contact.html',
		controller: 'contactCtrl'
	});
});

app.controller('homeCtrl', function () {
	var increment = 0;
	var carousel = $('#carousel');
	var current = '#fig-1';
	var prev;
	setInterval(function () {
		increment++;
		carousel.css({
			'-webkit-transform': 'rotateX(' + increment * -60 + 'deg)'
		});
		carousel.attr('data-state', increment % 6 + 1);

		prev = current;
		current = '#fig-' + (increment % 6 + 1);
	}, 1500);

	// var circle1 = $('#circle-1');
	// console.log('$circle-1', circle1);
	// var circle2 = $('#circle-2');
	// // var circle3 = $('#circle-3');
	//
	// circle1.click(function(){
	// 	circle1.addClass('spin-clockwise');
	// 	setTimeout(function(){
	// 		circle2.addClass('spin-counterclockwise');
	// 	},500);
	// });
});

app.controller('projectCtrl', function ($scope) {
	$(document).ready(function () {

		var curPage = 1;
		var numOfPages = $(".skw-page").length;
		var animTime = 1000;
		var scrolling = false;
		var pgPrefix = ".skw-page-";

		function pagination() {
			scrolling = true;

			$(pgPrefix + curPage).removeClass("inactive").addClass("active");
			$(pgPrefix + (curPage - 1)).addClass("inactive");
			$(pgPrefix + (curPage + 1)).removeClass("active");

			setTimeout(function () {
				scrolling = false;
			}, animTime);
		}

		function navigateUp() {
			if (curPage === 1) return;
			curPage--;
			pagination();
		}

		function navigateDown() {
			if (curPage === numOfPages) return;
			curPage++;
			pagination();
		}

		$(document).on("mousewheel DOMMouseScroll", function (e) {
			if (scrolling) return;
			if (e.originalEvent.wheelDelta > 0 || e.originalEvent.detail < 0) {
				navigateUp();
			} else {
				navigateDown();
			}
		});

		$(document).on("keydown", function (e) {
			if (scrolling) return;
			if (e.which === 38) {
				navigateUp();
			} else if (e.which === 40) {
				navigateDown();
			}
		});

		$('#down-arrow').click(function () {
			if (scrolling) return;
			navigateDown();
		});
	});
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsImFib3V0LmpzIiwiY29udGFjdC5qcyIsImhvbWUuanMiLCJwcm9qZWN0LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsTUFBQSxDQUFBLEdBQUEsR0FBQSxPQUFBLENBQUEsTUFBQSxDQUFBLFdBQUEsRUFBQSxDQUFBLFdBQUEsQ0FBQSxDQUFBLENBQUE7O0FBRUEsR0FBQSxDQUFBLE1BQUEsQ0FBQSxVQUFBLGtCQUFBLEVBQUEsaUJBQUEsRUFBQSwwQkFBQSxFQUFBOzs7QUFHQSxtQkFBQSxDQUFBLElBQUEsQ0FBQSxVQUFBLFNBQUEsRUFBQSxTQUFBLEVBQUE7O0FBRUEsTUFBQSxFQUFBLEdBQUEsbUJBQUEsQ0FBQTtBQUNBLE1BQUEsSUFBQSxHQUFBLFNBQUEsQ0FBQSxHQUFBLEVBQUEsQ0FBQTs7QUFFQSxNQUFBLEVBQUEsQ0FBQSxJQUFBLENBQUEsSUFBQSxDQUFBLEVBQUE7QUFDQSxVQUFBLElBQUEsQ0FBQSxPQUFBLENBQUEsRUFBQSxFQUFBLE1BQUEsQ0FBQSxDQUFBO0dBQ0E7O0FBRUEsU0FBQSxLQUFBLENBQUE7RUFDQSxDQUFBOztBQUFBLEFBRUEsa0JBQUEsQ0FBQSxTQUFBLENBQUEsSUFBQSxDQUFBLENBQUE7QUFDQSxtQkFBQSxDQUFBLElBQUEsQ0FBQSxpQkFBQSxFQUFBLFlBQUE7QUFDQSxRQUFBLENBQUEsUUFBQSxDQUFBLE1BQUEsRUFBQSxDQUFBO0VBQ0EsQ0FBQTs7QUFBQSxBQUVBLG1CQUFBLENBQUEsU0FBQSxDQUFBLEdBQUEsQ0FBQSxDQUFBO0NBQ0EsQ0FBQSxDQUFBOztBQ3ZCQSxHQUFBLENBQUEsVUFBQSxDQUFBLFdBQUEsRUFBQSxVQUFBLE1BQUEsRUFBQTtBQUNBLEtBQUEsS0FBQSxHQUFBLEdBQUE7S0FDQSxNQUFBLEdBQUEsR0FBQSxDQUFBOztBQUVBLEtBQUEsR0FBQSxHQUFBLEVBQUEsQ0FBQSxNQUFBLENBQUEsUUFBQSxDQUFBLENBQUEsTUFBQSxDQUFBLEtBQUEsQ0FBQSxDQUNBLElBQUEsQ0FBQSxPQUFBLEVBQUEsS0FBQSxDQUFBLENBQ0EsSUFBQSxDQUFBLFFBQUEsRUFBQSxNQUFBLENBQUEsQ0FBQTs7QUFFQSxLQUFBLE1BQUEsR0FBQSxDQUNBLEVBQUEsSUFBQSxFQUFBLFlBQUEsRUFBQSxLQUFBLEVBQUEsQ0FBQSxFQUFBLEVBQ0EsRUFBQSxJQUFBLEVBQUEsU0FBQSxFQUFBLEtBQUEsRUFBQSxDQUFBLEVBQUEsRUFDQSxFQUFBLElBQUEsRUFBQSxZQUFBLEVBQUEsS0FBQSxFQUFBLENBQUEsRUFBQSxFQUNBLEVBQUEsSUFBQSxFQUFBLFlBQUEsRUFBQSxLQUFBLEVBQUEsQ0FBQSxFQUFBLEVBQ0EsRUFBQSxJQUFBLEVBQUEsU0FBQSxFQUFBLEtBQUEsRUFBQSxDQUFBLEVBQUEsRUFDQSxFQUFBLElBQUEsRUFBQSxhQUFBLEVBQUEsS0FBQSxFQUFBLENBQUEsRUFBQSxFQUNBLEVBQUEsSUFBQSxFQUFBLEtBQUEsRUFBQSxLQUFBLEVBQUEsQ0FBQSxFQUFBLEVBQ0EsRUFBQSxJQUFBLEVBQUEsTUFBQSxFQUFBLEtBQUEsRUFBQSxDQUFBLEVBQUEsRUFDQSxFQUFBLElBQUEsRUFBQSxPQUFBLEVBQUEsS0FBQSxFQUFBLENBQUEsRUFBQSxDQUNBOzs7QUFBQSxBQUdBLEtBQUEsS0FBQSxHQUFBLEVBQUEsQ0FBQSxLQUFBLENBQUEsTUFBQSxDQUFBLE1BQUEsQ0FBQSxDQUFBLEdBQUEsQ0FBQSxVQUFBLENBQUEsRUFBQTtBQUNBLFNBQUE7O0FBRUEsU0FBQSxFQUFBLE1BQUEsQ0FBQSxDQUFBLENBQUEsQ0FBQSxLQUFBLEdBQUEsRUFBQSxHQUFBLEVBQUE7QUFDQSxRQUFBLEVBQUEsTUFBQSxDQUFBLENBQUEsQ0FBQSxDQUFBLElBQUE7QUFDQSxhQUFBLEVBQUEsTUFBQSxDQUFBLENBQUEsQ0FBQSxDQUFBLEtBQUE7R0FDQSxDQUFBO0VBQ0EsQ0FBQTs7O0FBQUEsQUFHQSxLQUFBLElBQUEsR0FBQSxLQUFBLENBQUEsQ0FBQSxDQUFBOzs7QUFFQSxPQUFBLEdBQUEsQ0FBQSxTQUFBLEVBQUEsU0FBQSxFQUFBLFNBQUEsRUFBQSxTQUFBLEVBQUEsU0FBQSxFQUFBLFNBQUEsQ0FBQSxDQUFBO0FBQ0EsS0FBQSxDQUFBLE1BQUEsR0FBQSxDQUFBLENBQUE7QUFDQSxLQUFBLENBQUEsS0FBQSxHQUFBLElBQUEsQ0FBQTs7QUFFQSxRQUFBLENBQUEsR0FBQSxDQUFBLFNBQUEsRUFBQSxLQUFBLENBQUE7Ozs7QUFBQSxBQUtBLEtBQUEsTUFBQSxHQUFBLEdBQUEsQ0FBQSxTQUFBLENBQUEsR0FBQSxDQUFBLENBQ0EsSUFBQSxDQUFBLEtBQUEsQ0FBQSxLQUFBLENBQUEsQ0FBQSxDQUFBLENBQUEsQ0FDQSxLQUFBLEVBQUEsQ0FDQSxNQUFBLENBQUEsR0FBQSxDQUFBOzs7Ozs7OztBQUFBLEFBUUEsS0FBQSxPQUFBLEdBQUEsTUFBQSxDQUFBLE1BQUEsQ0FBQSxRQUFBOztBQUFBLEVBRUEsSUFBQSxDQUFBLEtBQUEsQ0FBQSxLQUFBLENBQUEsQ0FBQSxDQUFBOzs7QUFBQSxFQUdBLElBQUEsQ0FBQSxHQUFBLEVBQUEsVUFBQSxDQUFBLEVBQUE7QUFBQSxTQUFBLENBQUEsQ0FBQSxNQUFBLENBQUE7RUFBQSxDQUFBLENBQ0EsS0FBQSxDQUFBLE1BQUEsRUFBQSxVQUFBLENBQUEsRUFBQSxDQUFBLEVBQUE7QUFDQSxTQUFBLE1BQUEsQ0FBQSxDQUFBLEdBQUEsQ0FBQSxDQUFBLENBQUE7RUFDQSxDQUFBOzs7QUFBQSxBQUdBLEtBQUEsS0FBQSxHQUFBLE1BQUEsQ0FBQSxNQUFBLENBQUEsTUFBQTs7QUFBQSxFQUVBLElBQUEsQ0FBQSxVQUFBLENBQUEsRUFBQTtBQUNBLFNBQUEsQ0FBQSxDQUFBLEtBQUEsQ0FBQTtFQUNBLENBQUEsQ0FDQSxJQUFBLENBQUE7QUFDQSxzQkFBQSxFQUFBLFFBQUE7QUFDQSxlQUFBLEVBQUEsUUFBQTtFQUNBLENBQUEsQ0FBQTs7QUFFQSxRQUFBLENBQUEsR0FBQSxDQUFBLEdBQUEsQ0FBQSxTQUFBLENBQUEsUUFBQSxDQUFBLENBQUEsQ0FBQSxDQUFBLENBQUEsQ0FBQSxDQUFBLENBQUEsQ0FBQTs7QUFFQSxLQUFBLEtBQUEsR0FBQSxFQUFBLENBQUEsTUFBQSxDQUFBLEtBQUEsRUFBQSxDQUNBLE9BQUEsQ0FBQSxJQUFBLENBQUEsQ0FDQSxNQUFBLENBQUEsVUFBQSxDQUFBLEVBQUEsQ0FBQSxFQUFBO0FBQUEsU0FBQSxDQUFBLEdBQUEsQ0FBQSxHQUFBLENBQUEsSUFBQSxDQUFBO0VBQUEsQ0FBQSxDQUNBLEtBQUEsQ0FBQSxLQUFBLENBQUEsQ0FDQSxJQUFBLENBQUEsQ0FBQSxLQUFBLEVBQUEsTUFBQSxDQUFBLENBQUEsQ0FBQTs7QUFFQSxNQUFBLENBQUEsS0FBQSxFQUFBLENBQUE7O0FBRUEsTUFBQSxDQUFBLEVBQUEsQ0FBQSxNQUFBLEVBQUEsVUFBQSxDQUFBLEVBQUE7QUFDQSxNQUFBLENBQUEsR0FBQSxFQUFBLENBQUEsSUFBQSxDQUFBLFFBQUEsQ0FBQSxLQUFBLENBQUE7TUFDQSxDQUFBLEdBQUEsQ0FBQTtNQUNBLENBQUEsR0FBQSxLQUFBLENBQUEsTUFBQSxDQUFBOztBQUVBLFNBQUEsRUFBQSxDQUFBLEdBQUEsQ0FBQSxFQUFBLENBQUEsQ0FBQSxLQUFBLENBQUEsT0FBQSxDQUFBLEtBQUEsQ0FBQSxDQUFBLENBQUEsQ0FBQSxDQUFBLENBQUE7O0FBRUEsS0FBQSxDQUFBLFNBQUEsQ0FBQSxRQUFBLENBQUEsQ0FDQSxJQUFBLENBQUEsSUFBQSxFQUFBLFVBQUEsQ0FBQSxFQUFBO0FBQUEsVUFBQSxDQUFBLENBQUEsQ0FBQSxDQUFBO0dBQUEsQ0FBQSxDQUNBLElBQUEsQ0FBQSxJQUFBLEVBQUEsVUFBQSxDQUFBLEVBQUE7QUFBQSxVQUFBLENBQUEsQ0FBQSxDQUFBLENBQUE7R0FBQSxDQUFBLENBQUE7O0FBRUEsS0FBQSxDQUFBLFNBQUEsQ0FBQSxNQUFBLENBQUEsQ0FDQSxJQUFBLENBQUEsR0FBQSxFQUFBLFVBQUEsQ0FBQSxFQUFBO0FBQUEsVUFBQSxDQUFBLENBQUEsQ0FBQSxDQUFBO0dBQUEsQ0FBQSxDQUNBLElBQUEsQ0FBQSxHQUFBLEVBQUEsVUFBQSxDQUFBLEVBQUE7QUFBQSxVQUFBLENBQUEsQ0FBQSxDQUFBLENBQUE7R0FBQSxDQUFBLENBQUE7RUFDQSxDQUFBLENBQUE7O0FBRUEsSUFBQSxDQUFBLEVBQUEsQ0FBQSxXQUFBLEVBQUEsWUFBQTtBQUNBLE1BQUEsRUFBQSxHQUFBLEVBQUEsQ0FBQSxLQUFBLENBQUEsSUFBQSxDQUFBLENBQUE7QUFDQSxNQUFBLENBQUEsRUFBQSxHQUFBLEVBQUEsQ0FBQSxDQUFBLENBQUEsQ0FBQTtBQUNBLE1BQUEsQ0FBQSxFQUFBLEdBQUEsRUFBQSxDQUFBLENBQUEsQ0FBQSxDQUFBO0FBQ0EsT0FBQSxDQUFBLE1BQUEsRUFBQSxDQUFBO0VBQ0EsQ0FBQSxDQUFBOztBQUVBLFVBQUEsT0FBQSxDQUFBLElBQUEsRUFBQTtBQUNBLFNBQUEsQ0FBQSxHQUFBLENBQUEsUUFBQSxFQUFBLElBQUEsQ0FBQSxDQUFBO0FBQ0EsTUFBQSxDQUFBLEdBQUEsSUFBQSxDQUFBLE1BQUEsR0FBQSxFQUFBO01BQ0EsR0FBQSxHQUFBLElBQUEsQ0FBQSxDQUFBLEdBQUEsQ0FBQTtNQUNBLEdBQUEsR0FBQSxJQUFBLENBQUEsQ0FBQSxHQUFBLENBQUE7TUFDQSxHQUFBLEdBQUEsSUFBQSxDQUFBLENBQUEsR0FBQSxDQUFBO01BQ0EsR0FBQSxHQUFBLElBQUEsQ0FBQSxDQUFBLEdBQUEsQ0FBQSxDQUFBO0FBQ0EsU0FBQSxVQUFBLElBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUE7QUFDQSxPQUFBLElBQUEsQ0FBQSxLQUFBLElBQUEsSUFBQSxDQUFBLEtBQUEsS0FBQSxJQUFBLEVBQUE7QUFDQSxRQUFBLENBQUEsR0FBQSxJQUFBLENBQUEsQ0FBQSxHQUFBLElBQUEsQ0FBQSxLQUFBLENBQUEsQ0FBQTtRQUNBLENBQUEsR0FBQSxJQUFBLENBQUEsQ0FBQSxHQUFBLElBQUEsQ0FBQSxLQUFBLENBQUEsQ0FBQTtRQUNBLENBQUEsR0FBQSxJQUFBLENBQUEsSUFBQSxDQUFBLENBQUEsR0FBQSxDQUFBLEdBQUEsQ0FBQSxHQUFBLENBQUEsQ0FBQTtRQUNBLENBQUEsR0FBQSxJQUFBLENBQUEsTUFBQSxHQUFBLElBQUEsQ0FBQSxLQUFBLENBQUEsTUFBQSxDQUFBO0FBQ0EsUUFBQSxDQUFBLEdBQUEsQ0FBQSxFQUFBO0FBQ0EsTUFBQSxHQUFBLENBQUEsQ0FBQSxHQUFBLENBQUEsQ0FBQSxHQUFBLENBQUEsR0FBQSxHQUFBLENBQUE7QUFDQSxTQUFBLENBQUEsQ0FBQSxJQUFBLENBQUEsSUFBQSxDQUFBLENBQUE7QUFDQSxTQUFBLENBQUEsQ0FBQSxJQUFBLENBQUEsSUFBQSxDQUFBLENBQUE7QUFDQSxTQUFBLENBQUEsS0FBQSxDQUFBLENBQUEsSUFBQSxDQUFBLENBQUE7QUFDQSxTQUFBLENBQUEsS0FBQSxDQUFBLENBQUEsSUFBQSxDQUFBLENBQUE7S0FDQTtJQUNBO0FBQ0EsVUFBQSxFQUFBLEdBQUEsR0FBQSxJQUFBLEVBQUEsR0FBQSxHQUFBLElBQUEsRUFBQSxHQUFBLEdBQUEsSUFBQSxFQUFBLEdBQUEsR0FBQSxDQUFBO0dBQ0EsQ0FBQTtFQUNBO0NBQ0EsQ0FBQSxDQUFBOztBQ25JQSxHQUFBLENBQUEsVUFBQSxDQUFBLGFBQUEsRUFBQSxVQUFBLE1BQUEsRUFBQSxLQUFBLEVBQUE7QUFDQSxPQUFBLENBQUEsUUFBQSxHQUFBLEVBQUEsQ0FBQTs7QUFFQSxPQUFBLENBQUEsUUFBQSxHQUFBLFlBQUE7QUFDQSxRQUFBLENBQUEsT0FBQSxHQUFBLElBQUEsQ0FBQTtBQUNBLFFBQUEsQ0FBQSxJQUFBLEdBQUEsS0FBQSxDQUFBO0FBQ0EsUUFBQSxDQUFBLE9BQUEsR0FBQSxLQUFBLENBQUE7QUFDQSxPQUFBLENBQUEsSUFBQSxDQUFBLGNBQUEsRUFBQSxNQUFBLENBQUEsUUFBQSxDQUFBLENBQ0EsSUFBQSxDQUFBLFVBQUEsZUFBQSxFQUFBO0FBQ0EsVUFBQSxDQUFBLEdBQUEsQ0FBQSxlQUFBLENBQUEsQ0FBQTtBQUNBLFNBQUEsQ0FBQSxPQUFBLEdBQUEsS0FBQSxDQUFBO0FBQ0EsU0FBQSxDQUFBLElBQUEsR0FBQSxJQUFBLENBQUE7QUFDQSxTQUFBLENBQUEsT0FBQSxHQUFBLGVBQUEsQ0FBQSxJQUFBLENBQUE7QUFDQSxTQUFBLENBQUEsUUFBQSxHQUFBLEVBQUEsQ0FBQTtHQUNBLENBQUEsQ0FBQTtFQUNBLENBQUE7O0FBRUEsS0FBQSxJQUFBLEdBQUEsQ0FBQSxDQUFBLE9BQUEsQ0FBQSxDQUFBO0FBQ0EsS0FBQSxJQUFBLEdBQUEsQ0FBQSxDQUFBLE9BQUEsQ0FBQSxDQUFBO0FBQ0EsS0FBQSxNQUFBLEdBQUEsSUFBQSxDQUFBOztBQUVBLEtBQUEsQ0FBQSxLQUFBLENBQUEsWUFBQTtBQUNBLE1BQUEsTUFBQSxFQUFBO0FBQ0EsT0FBQSxDQUFBLFdBQUEsQ0FBQSxRQUFBLENBQUEsQ0FBQSxXQUFBLENBQUEsU0FBQSxDQUFBLENBQUEsUUFBQSxDQUFBLFNBQUEsQ0FBQTs7QUFBQSxBQUVBLGFBQUEsQ0FBQSxPQUFBLEVBQUEsR0FBQSxDQUFBLENBQUE7QUFDQSxhQUFBLENBQUEsWUFBQTtBQUNBLEtBQUEsQ0FBQSxTQUFBLENBQUEsQ0FBQSxHQUFBLENBQUEsRUFBQSxTQUFBLEVBQUEsTUFBQSxFQUFBLENBQUEsQ0FBQTtJQUNBLEVBQUEsSUFBQSxDQUFBLENBQUE7R0FDQSxNQUFBO0FBQ0EsT0FBQSxDQUFBLFdBQUEsQ0FBQSxTQUFBLENBQUEsQ0FBQSxRQUFBLENBQUEsUUFBQSxDQUFBOztBQUFBLEdBRUE7QUFDQSxRQUFBLEdBQUEsQ0FBQSxNQUFBLENBQUE7RUFDQSxDQUFBLENBQUE7O0FBR0EsVUFBQSxPQUFBLEdBQUE7O0FBRUEsR0FBQSxDQUFBLFNBQUEsQ0FBQSxDQUFBLEdBQUEsQ0FBQSxFQUFBLFNBQUEsRUFBQSxTQUFBLEVBQUEsQ0FBQSxDQUFBOztBQUVBLE1BQUEsU0FBQSxDQUFBOztBQUVBLE1BQUEsTUFBQSxHQUFBLFFBQUEsQ0FBQSxjQUFBLENBQUEsUUFBQSxDQUFBO01BQ0EsT0FBQSxHQUFBLE1BQUEsQ0FBQSxVQUFBLENBQUEsSUFBQSxDQUFBO01BQ0EsS0FBQSxHQUFBLE1BQUEsQ0FBQSxLQUFBLEdBQUEsTUFBQSxDQUFBLFVBQUE7TUFDQSxNQUFBLEdBQUEsTUFBQSxDQUFBLE1BQUEsR0FBQSxNQUFBLENBQUEsV0FBQTtNQUNBLFFBQUEsR0FBQSxFQUFBO01BQ0EsYUFBQSxHQUFBLENBQUE7TUFDQSxPQUFBLEdBQUEsR0FBQTtNQUNBLE1BQUE7Ozs7Ozs7QUFPQSxHQUFBLFNBQUEsRUFBQSxTQUFBLEVBQUEsU0FBQSxFQUFBLFNBQUEsRUFBQSxTQUFBLEVBQUEsU0FBQSxDQUFBLENBQUE7O0FBRUEsT0FBQSxJQUFBLENBQUEsR0FBQSxDQUFBLEVBQUEsQ0FBQSxHQUFBLEVBQUEsRUFBQSxDQUFBLEVBQUEsRUFBQTtBQUNBLFdBQUEsQ0FBQSxJQUFBLENBQUE7QUFDQSxLQUFBLEVBQUEsS0FBQSxHQUFBLENBQUE7QUFDQSxLQUFBLEVBQUEsTUFBQSxHQUFBLENBQUE7QUFDQSxRQUFBLEVBQUEsV0FBQSxDQUFBLENBQUEsRUFBQSxFQUFBLENBQUE7QUFDQSxRQUFBLEVBQUEsV0FBQSxDQUFBLENBQUEsRUFBQSxFQUFBLENBQUE7QUFDQSxRQUFBLEVBQUEsV0FBQSxDQUFBLENBQUEsRUFBQSxDQUFBLENBQUE7O0FBRUEsWUFBQSxFQUFBLFdBQUEsQ0FBQSxDQUFBLEVBQUEsQ0FBQSxDQUFBOztBQUVBLFFBQUEsRUFBQSxXQUFBLENBQUEsQ0FBQSxDQUFBLEVBQUEsQ0FBQSxDQUFBO0FBQ0EsUUFBQSxFQUFBLFdBQUEsQ0FBQSxDQUFBLEVBQUEsRUFBQSxDQUFBLEVBQUEsQ0FBQTs7QUFFQSxTQUFBLEVBQUEsZ0JBQUEsQ0FBQSxXQUFBLENBQUEsQ0FBQSxFQUFBLEdBQUEsQ0FBQSxDQUFBO0FBQ0EsU0FBQSxFQUFBLE1BQUEsQ0FBQSxJQUFBLENBQUEsS0FBQSxDQUFBLElBQUEsQ0FBQSxNQUFBLEVBQUEsR0FBQSxNQUFBLENBQUEsTUFBQSxDQUFBLENBQUE7QUFDQSxhQUFBLEVBQUEsV0FBQSxDQUFBLENBQUEsR0FBQSxFQUFBLEdBQUEsQ0FBQTs7QUFFQSxRQUFBLEVBQUEsSUFBQTtJQUNBLENBQUEsQ0FBQTtHQUNBOztBQUVBLE1BQUEsRUFBQSxHQUFBO0FBQ0EsSUFBQSxFQUFBLEtBQUEsR0FBQSxDQUFBLEdBQUEsR0FBQTtBQUNBLElBQUEsRUFBQSxNQUFBLEdBQUEsQ0FBQSxHQUFBLEdBQUE7QUFDQSxRQUFBLEVBQUEsR0FBQTtBQUNBLFNBQUEsRUFBQSxHQUFBO0FBQ0EsT0FBQSxFQUFBLENBQUE7QUFDQSxPQUFBLEVBQUEsQ0FBQSxFQUFBO0FBQ0EsV0FBQSxFQUFBLENBQUE7R0FDQSxDQUFBOztBQUdBLFdBQUEsVUFBQSxHQUFBO0FBQ0EsT0FBQSxJQUFBLEdBQUEsRUFBQSxDQUFBO0FBQ0EsT0FBQSxFQUFBLENBQUEsUUFBQSxHQUFBLENBQUEsRUFBQTtBQUNBLE1BQUEsQ0FBQSxRQUFBLElBQUEsSUFBQSxDQUFBO0lBQ0EsTUFBQTtBQUNBLE1BQUEsQ0FBQSxRQUFBLEdBQUEsQ0FBQSxDQUFBO0lBQ0E7QUFDQSxVQUFBLENBQUEsV0FBQSxHQUFBLEVBQUEsQ0FBQSxRQUFBLENBQUE7O0FBRUEsT0FBQSxFQUFBLENBQUEsUUFBQSxLQUFBLENBQUEsRUFBQTtBQUNBLE1BQUEsQ0FBQSxJQUFBLElBQUEsS0FBQSxDQUFBO0FBQ0EsTUFBQSxDQUFBLElBQUEsSUFBQSxHQUFBLENBQUE7QUFDQSxNQUFBLENBQUEsQ0FBQSxJQUFBLEVBQUEsQ0FBQSxJQUFBLENBQUE7QUFDQSxNQUFBLENBQUEsQ0FBQSxJQUFBLEVBQUEsQ0FBQSxJQUFBLENBQUE7SUFDQTs7QUFFQSxPQUFBLEVBQUEsQ0FBQSxDQUFBLEdBQUEsRUFBQSxDQUFBLE1BQUEsR0FBQSxNQUFBLEVBQUE7QUFDQSxNQUFBLENBQUEsU0FBQSxHQUFBLENBQUEsQ0FBQTtBQUNBLE1BQUEsQ0FBQSxDQUFBLEdBQUEsTUFBQSxHQUFBLEVBQUEsQ0FBQSxNQUFBLENBQUE7QUFDQSxNQUFBLENBQUEsSUFBQSxJQUFBLENBQUEsR0FBQSxDQUFBO0FBQ0EsTUFBQSxDQUFBLElBQUEsSUFBQSxHQUFBLENBQUE7SUFDQTs7QUFFQSxVQUFBLENBQUEsV0FBQSxHQUFBLENBQUEsQ0FBQTs7QUFFQSxRQUFBLElBQUEsQ0FBQSxHQUFBLENBQUEsRUFBQSxDQUFBLEdBQUEsUUFBQSxDQUFBLE1BQUEsRUFBQSxDQUFBLEVBQUEsRUFBQTtBQUNBLFlBQUEsQ0FBQSxDQUFBLENBQUEsQ0FBQSxJQUFBLEVBQUEsQ0FBQTtJQUNBO0dBQ0E7O0FBRUEsV0FBQSxNQUFBLEdBQUE7QUFDQSxVQUFBLENBQUEsU0FBQSxDQUFBLENBQUEsRUFBQSxDQUFBLEVBQUEsS0FBQSxFQUFBLE1BQUEsQ0FBQSxDQUFBO0FBQ0EsYUFBQSxFQUFBLENBQUE7QUFDQSxZQUFBLEdBQUEscUJBQUEsQ0FBQSxNQUFBLENBQUEsQ0FBQTtHQUNBOztBQUVBLFFBQUEsRUFBQSxDQUFBOztBQUVBLFlBQUEsQ0FBQSxZQUFBO0FBQ0EsU0FBQSxDQUFBLG9CQUFBLENBQUEsU0FBQSxDQUFBLENBQUE7QUFDQSxZQUFBLEdBQUEsU0FBQSxDQUFBO0dBQ0EsRUFBQSxJQUFBLENBQUEsQ0FBQTs7QUFFQSxXQUFBLFdBQUEsQ0FBQSxHQUFBLEVBQUEsR0FBQSxFQUFBO0FBQ0EsVUFBQSxHQUFBLEdBQUEsSUFBQSxDQUFBLE1BQUEsRUFBQSxJQUFBLEdBQUEsR0FBQSxHQUFBLENBQUEsQ0FBQTtHQUNBOztBQUVBLFdBQUEsU0FBQSxDQUFBLEdBQUEsRUFBQSxHQUFBLEVBQUE7QUFDQSxVQUFBLElBQUEsQ0FBQSxLQUFBLENBQUEsR0FBQSxHQUFBLElBQUEsQ0FBQSxNQUFBLEVBQUEsSUFBQSxHQUFBLEdBQUEsR0FBQSxHQUFBLENBQUEsQ0FBQSxDQUFBLENBQUE7R0FDQTs7QUFFQSxXQUFBLGdCQUFBLENBQUEsTUFBQSxFQUFBO0FBQ0EsVUFBQSxNQUFBLElBQUEsSUFBQSxDQUFBLEVBQUEsR0FBQSxHQUFBLENBQUEsQ0FBQTtHQUNBOztBQUVBLFdBQUEsUUFBQSxDQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsTUFBQSxFQUFBLFdBQUEsRUFBQSxXQUFBLEVBQUEsS0FBQSxFQUFBO0FBQ0EsT0FBQSxHQUFBLEdBQUEsSUFBQSxDQUFBLEVBQUEsR0FBQSxDQUFBLEdBQUEsQ0FBQSxDQUFBO0FBQ0EsT0FBQSxDQUFBLEdBQUEsRUFBQSxDQUFBO0FBQ0EsT0FBQSxDQUFBLEdBQUEsRUFBQSxDQUFBO0FBQ0EsT0FBQSxJQUFBLEdBQUEsSUFBQSxDQUFBLEVBQUEsR0FBQSxNQUFBLENBQUE7O0FBRUEsVUFBQSxDQUFBLFVBQUEsR0FBQSxNQUFBLENBQUE7QUFDQSxVQUFBLENBQUEsU0FBQSxFQUFBLENBQUE7QUFDQSxVQUFBLENBQUEsTUFBQSxDQUFBLEVBQUEsRUFBQSxFQUFBLEdBQUEsV0FBQSxDQUFBLENBQUE7QUFDQSxRQUFBLENBQUEsR0FBQSxDQUFBLEVBQUEsQ0FBQSxHQUFBLE1BQUEsRUFBQSxDQUFBLEVBQUEsRUFBQTtBQUNBLEtBQUEsR0FBQSxFQUFBLEdBQUEsSUFBQSxDQUFBLEdBQUEsQ0FBQSxHQUFBLENBQUEsR0FBQSxXQUFBLENBQUE7QUFDQSxLQUFBLEdBQUEsRUFBQSxHQUFBLElBQUEsQ0FBQSxHQUFBLENBQUEsR0FBQSxDQUFBLEdBQUEsV0FBQSxDQUFBO0FBQ0EsV0FBQSxDQUFBLE1BQUEsQ0FBQSxDQUFBLEVBQUEsQ0FBQSxDQUFBLENBQUE7QUFDQSxPQUFBLElBQUEsSUFBQSxDQUFBOztBQUVBLEtBQUEsR0FBQSxFQUFBLEdBQUEsSUFBQSxDQUFBLEdBQUEsQ0FBQSxHQUFBLENBQUEsR0FBQSxXQUFBLENBQUE7QUFDQSxLQUFBLEdBQUEsRUFBQSxHQUFBLElBQUEsQ0FBQSxHQUFBLENBQUEsR0FBQSxDQUFBLEdBQUEsV0FBQSxDQUFBO0FBQ0EsV0FBQSxDQUFBLE1BQUEsQ0FBQSxDQUFBLEVBQUEsQ0FBQSxDQUFBLENBQUE7QUFDQSxPQUFBLElBQUEsSUFBQSxDQUFBO0lBQ0E7O0FBRUEsVUFBQSxDQUFBLE1BQUEsQ0FBQSxFQUFBLEVBQUEsRUFBQSxHQUFBLFdBQUEsQ0FBQSxDQUFBO0FBQ0EsVUFBQSxDQUFBLFNBQUEsRUFBQSxDQUFBO0FBQ0EsVUFBQSxDQUFBLFNBQUEsR0FBQSxLQUFBLENBQUE7QUFDQSxVQUFBLENBQUEsSUFBQSxFQUFBLENBQUE7R0FDQTs7QUFFQSxXQUFBLElBQUEsR0FBQTtBQUNBLFVBQUEsQ0FBQSxJQUFBLEVBQUEsQ0FBQTtBQUNBLFVBQUEsQ0FBQSxTQUFBLENBQUEsSUFBQSxDQUFBLENBQUEsRUFBQSxJQUFBLENBQUEsQ0FBQSxDQUFBLENBQUE7QUFDQSxVQUFBLENBQUEsTUFBQSxDQUFBLElBQUEsQ0FBQSxLQUFBLENBQUEsQ0FBQTtBQUNBLFVBQUEsQ0FBQSxTQUFBLEdBQUEsSUFBQSxDQUFBLEtBQUEsQ0FBQTtBQUNBLFVBQUEsQ0FBQSxTQUFBLEVBQUE7O0FBQUEsQUFFQSxVQUFBLENBQUEsUUFBQSxDQUFBLElBQUEsQ0FBQSxJQUFBLEdBQUEsQ0FBQSxHQUFBLENBQUEsQ0FBQSxFQUFBLElBQUEsQ0FBQSxJQUFBLEdBQUEsQ0FBQSxHQUFBLENBQUEsQ0FBQSxFQUFBLElBQUEsQ0FBQSxJQUFBLEVBQUEsSUFBQSxDQUFBLElBQUEsQ0FBQSxDQUFBO0FBQ0EsVUFBQSxDQUFBLElBQUEsRUFBQSxDQUFBO0FBQ0EsVUFBQSxDQUFBLFNBQUEsRUFBQSxDQUFBO0FBQ0EsVUFBQSxDQUFBLE9BQUEsRUFBQSxDQUFBO0FBQ0EsT0FBQSxDQUFBLEtBQUEsSUFBQSxJQUFBLENBQUEsU0FBQSxDQUFBO0FBQ0EsT0FBQSxDQUFBLElBQUEsSUFBQSxLQUFBLENBQUE7QUFDQSxPQUFBLENBQUEsSUFBQSxJQUFBLEdBQUEsQ0FBQTtBQUNBLE9BQUEsQ0FBQSxDQUFBLElBQUEsSUFBQSxDQUFBLElBQUEsQ0FBQTtBQUNBLE9BQUEsQ0FBQSxDQUFBLElBQUEsSUFBQSxDQUFBLElBQUEsQ0FBQTs7QUFFQSxPQUFBLElBQUEsQ0FBQSxDQUFBLEdBQUEsQ0FBQSxFQUFBO0FBQ0EsUUFBQSxDQUFBLElBQUEsSUFBQSxDQUFBLEdBQUEsQ0FBQTtBQUNBLFFBQUEsQ0FBQSxJQUFBLElBQUEsR0FBQSxDQUFBO0lBQ0E7QUFDQSxPQUFBLElBQUEsQ0FBQSxDQUFBLEdBQUEsTUFBQSxFQUFBO0FBQ0EsUUFBQSxDQUFBLFNBQUEsR0FBQSxDQUFBLENBQUE7QUFDQSxRQUFBLENBQUEsQ0FBQSxHQUFBLE1BQUEsQ0FBQTtBQUNBLFFBQUEsQ0FBQSxJQUFBLElBQUEsQ0FBQSxHQUFBLENBQUE7QUFDQSxRQUFBLENBQUEsSUFBQSxJQUFBLEdBQUEsQ0FBQTtJQUNBO0FBQ0EsT0FBQSxJQUFBLENBQUEsQ0FBQSxHQUFBLEtBQUEsSUFBQSxJQUFBLENBQUEsQ0FBQSxHQUFBLENBQUEsRUFBQTtBQUNBLFFBQUEsQ0FBQSxJQUFBLElBQUEsQ0FBQSxHQUFBLENBQUE7SUFDQTtHQUVBO0VBQ0E7Q0FFQSxDQUFBLENBQUE7O0FDL01BLEdBQUEsQ0FBQSxNQUFBLENBQUEsVUFBQSxjQUFBLEVBQUE7QUFDQSxlQUFBLENBQ0EsS0FBQSxDQUFBLE1BQUEsRUFBQTtBQUNBLEtBQUEsRUFBQSxHQUFBO0FBQ0EsYUFBQSxFQUFBLHlCQUFBO0FBQ0EsWUFBQSxFQUFBLFVBQUE7RUFDQSxDQUFBLENBQ0EsS0FBQSxDQUFBLFVBQUEsRUFBQTtBQUNBLEtBQUEsRUFBQSxXQUFBO0FBQ0EsYUFBQSxFQUFBLDZCQUFBO0FBQ0EsWUFBQSxFQUFBLGFBQUE7RUFDQSxDQUFBLENBQ0EsS0FBQSxDQUFBLE9BQUEsRUFBQTtBQUNBLEtBQUEsRUFBQSxRQUFBO0FBQ0EsYUFBQSxFQUFBLDBCQUFBO0FBQ0EsWUFBQSxFQUFBLFdBQUE7RUFDQSxDQUFBLENBQ0EsS0FBQSxDQUFBLFNBQUEsRUFBQTtBQUNBLEtBQUEsRUFBQSxVQUFBO0FBQ0EsYUFBQSxFQUFBLDRCQUFBO0FBQ0EsWUFBQSxFQUFBLGFBQUE7RUFDQSxDQUFBLENBQUE7Q0FDQSxDQUFBLENBQUE7O0FBRUEsR0FBQSxDQUFBLFVBQUEsQ0FBQSxVQUFBLEVBQUEsWUFBQTtBQUNBLEtBQUEsU0FBQSxHQUFBLENBQUEsQ0FBQTtBQUNBLEtBQUEsUUFBQSxHQUFBLENBQUEsQ0FBQSxXQUFBLENBQUEsQ0FBQTtBQUNBLEtBQUEsT0FBQSxHQUFBLFFBQUEsQ0FBQTtBQUNBLEtBQUEsSUFBQSxDQUFBO0FBQ0EsWUFBQSxDQUFBLFlBQUE7QUFDQSxXQUFBLEVBQUEsQ0FBQTtBQUNBLFVBQUEsQ0FBQSxHQUFBLENBQUE7QUFDQSxzQkFBQSxFQUFBLFVBQUEsR0FBQSxTQUFBLEdBQUEsQ0FBQSxFQUFBLEdBQUEsTUFBQTtHQUNBLENBQUEsQ0FBQTtBQUNBLFVBQUEsQ0FBQSxJQUFBLENBQUEsWUFBQSxFQUFBLFNBQUEsR0FBQSxDQUFBLEdBQUEsQ0FBQSxDQUFBLENBQUE7O0FBRUEsTUFBQSxHQUFBLE9BQUEsQ0FBQTtBQUNBLFNBQUEsR0FBQSxPQUFBLElBQUEsU0FBQSxHQUFBLENBQUEsR0FBQSxDQUFBLENBQUEsQ0FBQTtFQUNBLEVBQUEsSUFBQSxDQUFBOzs7Ozs7Ozs7Ozs7O0FBQUEsQ0FhQSxDQUFBLENBQUE7O0FDbkRBLEdBQUEsQ0FBQSxVQUFBLENBQUEsYUFBQSxFQUFBLFVBQUEsTUFBQSxFQUFBO0FBQ0EsRUFBQSxDQUFBLFFBQUEsQ0FBQSxDQUFBLEtBQUEsQ0FBQSxZQUFBOztBQUVBLE1BQUEsT0FBQSxHQUFBLENBQUEsQ0FBQTtBQUNBLE1BQUEsVUFBQSxHQUFBLENBQUEsQ0FBQSxXQUFBLENBQUEsQ0FBQSxNQUFBLENBQUE7QUFDQSxNQUFBLFFBQUEsR0FBQSxJQUFBLENBQUE7QUFDQSxNQUFBLFNBQUEsR0FBQSxLQUFBLENBQUE7QUFDQSxNQUFBLFFBQUEsR0FBQSxZQUFBLENBQUE7O0FBRUEsV0FBQSxVQUFBLEdBQUE7QUFDQSxZQUFBLEdBQUEsSUFBQSxDQUFBOztBQUVBLElBQUEsQ0FBQSxRQUFBLEdBQUEsT0FBQSxDQUFBLENBQUEsV0FBQSxDQUFBLFVBQUEsQ0FBQSxDQUFBLFFBQUEsQ0FBQSxRQUFBLENBQUEsQ0FBQTtBQUNBLElBQUEsQ0FBQSxRQUFBLElBQUEsT0FBQSxHQUFBLENBQUEsQ0FBQSxDQUFBLENBQUEsUUFBQSxDQUFBLFVBQUEsQ0FBQSxDQUFBO0FBQ0EsSUFBQSxDQUFBLFFBQUEsSUFBQSxPQUFBLEdBQUEsQ0FBQSxDQUFBLENBQUEsQ0FBQSxXQUFBLENBQUEsUUFBQSxDQUFBLENBQUE7O0FBRUEsYUFBQSxDQUFBLFlBQUE7QUFDQSxhQUFBLEdBQUEsS0FBQSxDQUFBO0lBQ0EsRUFBQSxRQUFBLENBQUEsQ0FBQTtHQUNBOztBQUVBLFdBQUEsVUFBQSxHQUFBO0FBQ0EsT0FBQSxPQUFBLEtBQUEsQ0FBQSxFQUFBLE9BQUE7QUFDQSxVQUFBLEVBQUEsQ0FBQTtBQUNBLGFBQUEsRUFBQSxDQUFBO0dBQ0E7O0FBRUEsV0FBQSxZQUFBLEdBQUE7QUFDQSxPQUFBLE9BQUEsS0FBQSxVQUFBLEVBQUEsT0FBQTtBQUNBLFVBQUEsRUFBQSxDQUFBO0FBQ0EsYUFBQSxFQUFBLENBQUE7R0FDQTs7QUFFQSxHQUFBLENBQUEsUUFBQSxDQUFBLENBQUEsRUFBQSxDQUFBLDJCQUFBLEVBQUEsVUFBQSxDQUFBLEVBQUE7QUFDQSxPQUFBLFNBQUEsRUFBQSxPQUFBO0FBQ0EsT0FBQSxDQUFBLENBQUEsYUFBQSxDQUFBLFVBQUEsR0FBQSxDQUFBLElBQUEsQ0FBQSxDQUFBLGFBQUEsQ0FBQSxNQUFBLEdBQUEsQ0FBQSxFQUFBO0FBQ0EsY0FBQSxFQUFBLENBQUE7SUFDQSxNQUFBO0FBQ0EsZ0JBQUEsRUFBQSxDQUFBO0lBQ0E7R0FDQSxDQUFBLENBQUE7O0FBRUEsR0FBQSxDQUFBLFFBQUEsQ0FBQSxDQUFBLEVBQUEsQ0FBQSxTQUFBLEVBQUEsVUFBQSxDQUFBLEVBQUE7QUFDQSxPQUFBLFNBQUEsRUFBQSxPQUFBO0FBQ0EsT0FBQSxDQUFBLENBQUEsS0FBQSxLQUFBLEVBQUEsRUFBQTtBQUNBLGNBQUEsRUFBQSxDQUFBO0lBQ0EsTUFBQSxJQUFBLENBQUEsQ0FBQSxLQUFBLEtBQUEsRUFBQSxFQUFBO0FBQ0EsZ0JBQUEsRUFBQSxDQUFBO0lBQ0E7R0FDQSxDQUFBLENBQUE7O0FBRUEsR0FBQSxDQUFBLGFBQUEsQ0FBQSxDQUFBLEtBQUEsQ0FBQSxZQUFBO0FBQ0EsT0FBQSxTQUFBLEVBQUEsT0FBQTtBQUNBLGVBQUEsRUFBQSxDQUFBO0dBQ0EsQ0FBQSxDQUFBO0VBRUEsQ0FBQSxDQUFBO0NBQ0EsQ0FBQSxDQUFBIiwiZmlsZSI6Im1haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJ3aW5kb3cuYXBwID0gYW5ndWxhci5tb2R1bGUoJ3BvcnRmb2xpbycsIFsndWkucm91dGVyJ10pO1xuXG5hcHAuY29uZmlnKGZ1bmN0aW9uICgkdXJsUm91dGVyUHJvdmlkZXIsICRsb2NhdGlvblByb3ZpZGVyLCAkdXJsTWF0Y2hlckZhY3RvcnlQcm92aWRlcikge1xuXG5cdC8vIHRoaXMgbWFrZXMgdGhlICcvc3RvcmVzLycgcm91dGUgY29ycmVjdGx5IHJlZGlyZWN0IHRvICcvc3RvcmVzJ1xuXHQkdXJsUm91dGVyUHJvdmlkZXIucnVsZShmdW5jdGlvbiAoJGluamVjdG9yLCAkbG9jYXRpb24pIHtcblxuXHRcdHZhciByZSA9IC8oLispKFxcLyspKFxcPy4qKT8kLztcblx0XHR2YXIgcGF0aCA9ICRsb2NhdGlvbi51cmwoKTtcblxuXHRcdGlmKHJlLnRlc3QocGF0aCkpIHtcblx0XHRcdHJldHVybiBwYXRoLnJlcGxhY2UocmUsICckMSQzJyk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9KTtcblx0Ly8gVGhpcyB0dXJucyBvZmYgaGFzaGJhbmcgdXJscyAoLyNhYm91dCkgYW5kIGNoYW5nZXMgaXQgdG8gc29tZXRoaW5nIG5vcm1hbCAoL2Fib3V0KVxuXHQkbG9jYXRpb25Qcm92aWRlci5odG1sNU1vZGUodHJ1ZSk7XG5cdCR1cmxSb3V0ZXJQcm92aWRlci53aGVuKCcvYXV0aC86cHJvdmlkZXInLCBmdW5jdGlvbiAoKSB7XG5cdFx0d2luZG93LmxvY2F0aW9uLnJlbG9hZCgpO1xuXHR9KTtcblx0Ly8gSWYgd2UgZ28gdG8gYSBVUkwgdGhhdCB1aS1yb3V0ZXIgZG9lc24ndCBoYXZlIHJlZ2lzdGVyZWQsIGdvIHRvIHRoZSBcIi9cIiB1cmwuXG5cdCR1cmxSb3V0ZXJQcm92aWRlci5vdGhlcndpc2UoJy8nKTtcbn0pO1xuIiwiYXBwLmNvbnRyb2xsZXIoJ2Fib3V0Q3RybCcsIGZ1bmN0aW9uKCRzY29wZSl7XG5cdHZhciB3aWR0aCA9IDk2MCxcblx0XHRoZWlnaHQgPSA1MDA7XG5cblx0dmFyIHN2ZyA9IGQzLnNlbGVjdChcIiNhYm91dFwiKS5hcHBlbmQoXCJzdmdcIilcblx0XHQuYXR0cihcIndpZHRoXCIsIHdpZHRoKVxuXHRcdC5hdHRyKFwiaGVpZ2h0XCIsIGhlaWdodCk7XG5cblx0dmFyIHNraWxscyA9IFtcblx0XHR7bmFtZTogXCJKYXZhU2NyaXB0XCIsIGxldmVsOiAzfSxcblx0XHR7bmFtZTogXCJNb25nb0RCXCIsIGxldmVsOiAzfSxcblx0XHR7bmFtZTogXCJFeHByZXNzLmpzXCIsIGxldmVsOiAzfSxcblx0XHR7bmFtZTogXCJBbmd1bGFyLmpzXCIsIGxldmVsOiAzfSxcblx0XHR7bmFtZTogXCJOb2RlLmpzXCIsIGxldmVsOiAzfSxcblx0XHR7bmFtZTogXCJNb25nb29zZS5qc1wiLCBsZXZlbDogM30sXG5cdFx0e25hbWU6IFwiR2l0XCIsIGxldmVsOiAzfSxcblx0XHR7bmFtZTogXCJDU1MzXCIsIGxldmVsOiAzfSxcblx0XHR7bmFtZTogXCJIVE1MNVwiLCBsZXZlbDogM30sXG5cdF07XG5cblx0Ly9jcmVhdGUgbm9kZXNcblx0dmFyIG5vZGVzID0gZDMucmFuZ2Uoc2tpbGxzLmxlbmd0aCkubWFwKGZ1bmN0aW9uKGkpIHtcblx0XHRyZXR1cm4ge1xuXHRcdFx0Ly8gcmFkaXVzOiBNYXRoLnJhbmRvbSgpICogNDAgKyAzMCxcblx0XHRcdHJhZGl1czogc2tpbGxzW2ldLmxldmVsKjE1ICszMCxcblx0XHRcdGxhYmVsOiBza2lsbHNbaV0ubmFtZSxcblx0XHRcdHNraWxsTGV2ZWw6IHNraWxsc1tpXS5sZXZlbFxuXHRcdH07XG5cdH0pO1xuXG5cdC8vaW5pdGlhbGl6ZSB2YXJpYWJsZXMgYW5kIHJvb3Qgbm9kZVxuXHR2YXJcdHJvb3QgPSBub2Rlc1swXSxcblx0XHQvLyBjb2xvciA9IGQzLnNjYWxlLmNhdGVnb3J5MTAoKTtcblx0XHRjb2xvcnMgPSBbJyM3RkZGRDQnLCcjRTBGRkZGJywnIzMzQ0NGRicsJyNDNjg4RTgnLCcjRkY4MDdEJywnI0ZGOEVCMiddO1xuXHRcdHJvb3QucmFkaXVzID0gMDtcblx0XHRyb290LmZpeGVkID0gdHJ1ZTtcblxuXHRjb25zb2xlLmxvZyhcIm5vZGVzOiBcIixub2Rlcyk7XG5cblxuXHQvLyBjb25zb2xlLmxvZyhcIm5vZGVzIDA6XCIsIG5vZGVzWzBdKTtcblxuXHR2YXIgZ3JvdXBzID0gc3ZnLnNlbGVjdEFsbChcImdcIilcblx0XHQuZGF0YShub2Rlcy5zbGljZSgxKSlcblx0XHQuZW50ZXIoKVxuXHRcdC5hcHBlbmQoXCJnXCIpO1xuXG5cdC8vIGdyb3Vwcy5hdHRyKFwidHJhbnNmb3JtXCIsIGZ1bmN0aW9uKGQsIGkpIHtcblx0Ly8gXHR2YXIgeCA9IDc4ICogaSArIDEwMDtcblx0Ly8gXHR2YXIgeSA9IDQ0ICogaSArIDkzO1xuXHQvLyBcdHJldHVybiBcInRyYW5zbGF0ZShcIiArIFt4LHldICsgXCIpXCI7XG5cdC8vIH0pO1xuXG5cdHZhciBjaXJjbGVzID0gZ3JvdXBzLmFwcGVuZCgnY2lyY2xlJylcblx0Ly8gdmFyIGNpcmNsZXMgPSBzdmcuc2VsZWN0QWxsKFwiY2lyY2xlXCIpXG5cdFx0LmRhdGEobm9kZXMuc2xpY2UoMSkpXG5cdFx0Ly8gLmVudGVyKClcblx0XHQvLy5hcHBlbmQoXCJjaXJjbGVcIilcblx0XHQuYXR0cihcInJcIiwgZnVuY3Rpb24oZCkgeyByZXR1cm4gZC5yYWRpdXM7IH0pXG5cdFx0LnN0eWxlKFwiZmlsbFwiLCBmdW5jdGlvbihkLCBpKSB7XG5cdFx0XHRyZXR1cm4gY29sb3JzW2kgJSA2XTtcblx0XHR9KTtcblx0XHQvLyAuaW5uZXJIVE1MKFwiXCIpXG5cblx0dmFyIGxhYmVsID0gZ3JvdXBzLmFwcGVuZChcInRleHRcIilcblx0Ly8gdmFyIGxhYmVsID0gY2lyY2xlcy5hcHBlbmQoXCJ0ZXh0XCIpXG5cdFx0LnRleHQoZnVuY3Rpb24oZCl7XG5cdFx0XHRyZXR1cm4gZC5sYWJlbDtcblx0XHR9KVxuXHRcdC5hdHRyKHtcblx0XHRcdFwiYWxpZ25tZW50LWJhc2VsaW5lXCI6IFwibWlkZGxlXCIsXG5cdFx0XHRcInRleHQtYW5jaG9yXCI6IFwibWlkZGxlXCIsXG5cdFx0fSk7XG5cblx0Y29uc29sZS5sb2coc3ZnLnNlbGVjdEFsbChcImNpcmNsZVwiKVswXVswXSk7XG5cblx0dmFyIGZvcmNlID0gZDMubGF5b3V0LmZvcmNlKClcblx0XHQuZ3Jhdml0eSgwLjA1KVxuXHRcdC5jaGFyZ2UoZnVuY3Rpb24oZCwgaSkgeyByZXR1cm4gaSA/IDAgOiAtMjAwMDsgfSlcblx0XHQubm9kZXMobm9kZXMpXG5cdFx0LnNpemUoW3dpZHRoLCBoZWlnaHRdKTtcblxuXHRmb3JjZS5zdGFydCgpO1xuXG5cdGZvcmNlLm9uKFwidGlja1wiLCBmdW5jdGlvbihlKSB7XG5cdCAgdmFyIHEgPSBkMy5nZW9tLnF1YWR0cmVlKG5vZGVzKSxcblx0ICAgICAgaSA9IDAsXG5cdCAgICAgIG4gPSBub2Rlcy5sZW5ndGg7XG5cblx0ICB3aGlsZSAoKytpIDwgbikgcS52aXNpdChjb2xsaWRlKG5vZGVzW2ldKSk7XG5cblx0XHRzdmcuc2VsZWN0QWxsKFwiY2lyY2xlXCIpXG5cdFx0XHQuYXR0cihcImN4XCIsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGQueDsgfSlcblx0XHRcdC5hdHRyKFwiY3lcIiwgZnVuY3Rpb24oZCkgeyByZXR1cm4gZC55OyB9KTtcblxuXHRcdHN2Zy5zZWxlY3RBbGwoXCJ0ZXh0XCIpXG5cdFx0XHQuYXR0cihcInhcIiwgZnVuY3Rpb24oZCkgeyByZXR1cm4gZC54OyB9KVxuXHRcdFx0LmF0dHIoXCJ5XCIsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGQueTsgfSk7XG5cdH0pO1xuXG5cdHN2Zy5vbihcIm1vdXNlbW92ZVwiLCBmdW5jdGlvbigpIHtcblx0ICB2YXIgcDEgPSBkMy5tb3VzZSh0aGlzKTtcblx0ICByb290LnB4ID0gcDFbMF07XG5cdCAgcm9vdC5weSA9IHAxWzFdO1xuXHQgIGZvcmNlLnJlc3VtZSgpO1xuXHR9KTtcblxuXHRmdW5jdGlvbiBjb2xsaWRlKG5vZGUpIHtcblx0XHRjb25zb2xlLmxvZygnbm9kZTogJywgbm9kZSk7XG5cdCAgdmFyIHIgPSBub2RlLnJhZGl1cyArIDE2LFxuXHQgICAgICBueDEgPSBub2RlLnggLSByLFxuXHQgICAgICBueDIgPSBub2RlLnggKyByLFxuXHQgICAgICBueTEgPSBub2RlLnkgLSByLFxuXHQgICAgICBueTIgPSBub2RlLnkgKyByO1xuXHQgIHJldHVybiBmdW5jdGlvbihxdWFkLCB4MSwgeTEsIHgyLCB5Mikge1xuXHQgICAgaWYgKHF1YWQucG9pbnQgJiYgKHF1YWQucG9pbnQgIT09IG5vZGUpKSB7XG5cdCAgICAgIHZhciB4ID0gbm9kZS54IC0gcXVhZC5wb2ludC54LFxuXHQgICAgICAgICAgeSA9IG5vZGUueSAtIHF1YWQucG9pbnQueSxcblx0ICAgICAgICAgIGwgPSBNYXRoLnNxcnQoeCAqIHggKyB5ICogeSksXG5cdCAgICAgICAgICByID0gbm9kZS5yYWRpdXMgKyBxdWFkLnBvaW50LnJhZGl1cztcblx0ICAgICAgaWYgKGwgPCByKSB7XG5cdCAgICAgICAgbCA9IChsIC0gcikgLyBsICogMC41O1xuXHQgICAgICAgIG5vZGUueCAtPSB4ICo9IGw7XG5cdCAgICAgICAgbm9kZS55IC09IHkgKj0gbDtcblx0ICAgICAgICBxdWFkLnBvaW50LnggKz0geDtcblx0ICAgICAgICBxdWFkLnBvaW50LnkgKz0geTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgICAgcmV0dXJuIHgxID4gbngyIHx8IHgyIDwgbngxIHx8IHkxID4gbnkyIHx8IHkyIDwgbnkxO1xuXHQgIH07XG5cdH1cbn0pO1xuIiwiYXBwLmNvbnRyb2xsZXIoJ2NvbnRhY3RDdHJsJywgZnVuY3Rpb24oJHNjb3BlLCAkaHR0cCl7XG5cdCRzY29wZS5mb3JtRGF0YSA9IHt9O1xuXG5cdCRzY29wZS5zZW5kTWFpbCA9IGZ1bmN0aW9uKCl7XG5cdFx0JHNjb3BlLndhaXRpbmcgPSB0cnVlO1xuXHRcdCRzY29wZS5zZW50ID0gZmFsc2U7XG5cdFx0JHNjb3BlLnN1Y2Nlc3MgPSBmYWxzZTtcblx0XHQkaHR0cC5wb3N0KCcvYXBpL2NvbnRhY3QnLCAkc2NvcGUuZm9ybURhdGEpXG5cdFx0LnRoZW4oZnVuY3Rpb24oc3VjY2Vzc1Jlc3BvbnNlKXtcblx0XHRcdGNvbnNvbGUubG9nKHN1Y2Nlc3NSZXNwb25zZSk7XG5cdFx0XHQkc2NvcGUud2FpdGluZyA9IGZhbHNlO1xuXHRcdFx0JHNjb3BlLnNlbnQgPSB0cnVlO1xuXHRcdFx0JHNjb3BlLnN1Y2Nlc3MgPSBzdWNjZXNzUmVzcG9uc2UuZGF0YTtcblx0XHRcdCRzY29wZS5mb3JtRGF0YSA9IHt9O1xuXHRcdH0pO1xuXHR9O1xuXG5cdHZhciBjYXJkID0gJCgnI2NhcmQnKTtcblx0dmFyIG5vdGUgPSAkKCcubm90ZScpO1xuXHR2YXIgdG9nZ2xlID0gdHJ1ZTtcblxuXHRjYXJkLmNsaWNrKGZ1bmN0aW9uKCl7XG5cdFx0aWYgKHRvZ2dsZSl7XG5cdFx0XHRjYXJkLnJlbW92ZUNsYXNzKCdoaWRkZW4nKS5yZW1vdmVDbGFzcygnaW5pdGlhbCcpLmFkZENsYXNzKCd2aXNpYmxlJyk7XG5cdFx0XHQvLyBub3RlLmNzcyh7J2Rpc3BsYXknOiAnaW5pdGlhbCd9KTtcblx0XHRcdHNldFRpbWVvdXQoZXhwbG9kZSwgNTAwKTtcblx0XHRcdHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcblx0XHRcdFx0JCgnI2NhbnZhcycpLmNzcyh7J2Rpc3BsYXknIDogJ25vbmUnfSk7XG5cdFx0XHR9LCA1MDAwKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0Y2FyZC5yZW1vdmVDbGFzcygndmlzaWJsZScpLmFkZENsYXNzKCdoaWRkZW4nKTtcblx0XHRcdC8vIG5vdGUuY3NzKHsnZGlzcGxheSc6ICdub25lJ30pO1xuXHRcdH1cblx0XHR0b2dnbGUgPSAhdG9nZ2xlO1xuXHR9KTtcblxuXG5cdGZ1bmN0aW9uIGV4cGxvZGUoKSB7XG5cblx0XHQkKCcjY2FudmFzJykuY3NzKHsnZGlzcGxheScgOiAnaW5pdGlhbCd9KTtcblxuXHRcdHZhciByZXF1ZXN0SWQ7XG5cblx0XHR2YXIgY2FudmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjYW52YXNcIiksXG5cdFx0XHRjb250ZXh0ID0gY2FudmFzLmdldENvbnRleHQoXCIyZFwiKSxcblx0XHRcdHdpZHRoID0gY2FudmFzLndpZHRoID0gd2luZG93LmlubmVyV2lkdGgsXG5cdFx0XHRoZWlnaHQgPSBjYW52YXMuaGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0LFxuXHRcdFx0cGFydGljbGUgPSBbXSxcblx0XHRcdHBhcnRpY2xlQ291bnQgPSAwLFxuXHRcdFx0Z3Jhdml0eSA9IDAuMyxcblx0XHRcdGNvbG9ycyA9XG5cdFx0XHQvLyBbXG5cdFx0XHQvLyBcdCcjZjQ0MzM2JywgJyNlOTFlNjMnLCAnIzljMjdiMCcsICcjNjczYWI3JywgJyMzZjUxYjUnLFxuXHRcdFx0Ly8gXHQnIzIxOTZmMycsICcjMDNhOWY0JywgJyMwMGJjZDQnLCAnIzAwOTY4OCcsICcjNENBRjUwJyxcblx0XHRcdC8vIFx0JyM4QkMzNEEnLCAnI0NEREMzOScsICcjRkZFQjNCJywgJyNGRkMxMDcnLCAnI0ZGOTgwMCcsXG5cdFx0XHQvLyBcdCcjRkY1NzIyJywgJyM3OTU1NDgnXG5cdFx0XHQvLyBdO1xuXHRcdFx0WycjN0ZGRkQ0JywnI0UwRkZGRicsJyMzM0NDRkYnLCcjQzY4OEU4JywnI0ZGODA3RCcsJyNGRjhFQjInXTtcblxuXHRcdGZvciggdmFyIGkgPSAwOyBpIDwgNTA7IGkrKyl7XG5cdFx0XHRwYXJ0aWNsZS5wdXNoKHtcblx0XHRcdFx0eCA6IHdpZHRoLzcsXG5cdFx0XHRcdHkgOiBoZWlnaHQvMixcblx0XHRcdFx0Ym94VyA6IHJhbmRvbVJhbmdlKDUsMjApLFxuXHRcdFx0XHRib3hIIDogcmFuZG9tUmFuZ2UoNSwyMCksXG5cdFx0XHRcdHNpemUgOiByYW5kb21SYW5nZSgyLDgpLFxuXG5cdFx0XHRcdHNwaWtlcmFuOnJhbmRvbVJhbmdlKDMsNSksXG5cblx0XHRcdFx0dmVsWCA6cmFuZG9tUmFuZ2UoLTgsOCksXG5cdFx0XHRcdHZlbFkgOnJhbmRvbVJhbmdlKC01MCwtMTApLFxuXG5cdFx0XHRcdGFuZ2xlIDpjb252ZXJ0VG9SYWRpYW5zKHJhbmRvbVJhbmdlKDAsMzYwKSksXG5cdFx0XHRcdGNvbG9yOmNvbG9yc1tNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBjb2xvcnMubGVuZ3RoKV0sXG5cdFx0XHRcdGFuZ2xlc3BpbjpyYW5kb21SYW5nZSgtMC4yLDAuMiksXG5cblx0XHRcdFx0ZHJhdyA6IGRyYXdcblx0XHRcdH0pO1xuXHRcdH1cblxuXHRcdHZhciByMT17XG5cdFx0XHR4OndpZHRoLzItMTUwLFxuXHRcdFx0eTpoZWlnaHQvMi0xNTAsXG5cdFx0XHR3aWR0aDozMDAsXG5cdFx0XHRoZWlnaHQ6MzAwLFxuXHRcdFx0dmVsWCA6MCxcblx0XHRcdHZlbFkgOi0xMCxcblx0XHRcdGFscGhhdG9wOjBcblx0XHR9O1xuXG5cblx0XHRmdW5jdGlvbiBkcmF3U2NyZWVuKCl7XG5cdFx0XHR2YXIgc2l6ZSA9IDUwO1xuXHRcdFx0aWYgKHIxLmFscGhhdG9wIDwgMSl7XG5cdFx0XHRcdHIxLmFscGhhdG9wICs9IDAuMDE7XG5cdFx0XHR9IGVsc2V7XG5cdFx0XHRcdHIxLmFscGhhdG9wID0gMTtcblx0XHRcdH1cblx0XHRcdGNvbnRleHQuZ2xvYmFsQWxwaGEgPSByMS5hbHBoYXRvcDtcblxuXHRcdFx0aWYocjEuYWxwaGF0b3AgPT09IDEpe1xuXHRcdFx0XHRyMS52ZWxZKj0gMC45OTk7XG5cdFx0XHRcdHIxLnZlbFkgKz0gMC4zO1xuXHRcdFx0XHRyMS54ICs9IHIxLnZlbFg7XG5cdFx0XHRcdHIxLnkgKz0gcjEudmVsWTtcblx0XHRcdH1cblxuXHRcdFx0aWYocjEueSArIHIxLmhlaWdodCA+IGhlaWdodCl7XG5cdFx0XHRcdHIxLmFuZ2xlc3BpbiA9IDA7XG5cdFx0XHRcdHIxLnkgPSBoZWlnaHQgLSByMS5oZWlnaHQ7XG5cdFx0XHRcdHIxLnZlbFkgKj0gLTAuODtcblx0XHRcdFx0cjEudmVsWCAqPSAwLjk7XG5cdFx0XHR9XG5cblx0XHRcdGNvbnRleHQuZ2xvYmFsQWxwaGEgPSAxO1xuXG5cdFx0XHRmb3IoIHZhciBpID0gMDsgaSA8IHBhcnRpY2xlLmxlbmd0aDsgaSsrKXtcblx0XHRcdFx0cGFydGljbGVbaV0uZHJhdygpO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIHVwZGF0ZSgpe1xuXHRcdFx0Y29udGV4dC5jbGVhclJlY3QoMCwwLHdpZHRoLGhlaWdodCk7XG5cdFx0XHRkcmF3U2NyZWVuKCk7XG5cdFx0XHRyZXF1ZXN0SWQgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUodXBkYXRlKTtcblx0XHR9XG5cblx0XHR1cGRhdGUoKTtcblxuXHRcdHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcblx0XHRcdHdpbmRvdy5jYW5jZWxBbmltYXRpb25GcmFtZShyZXF1ZXN0SWQpO1xuXHRcdFx0cmVxdWVzdElkID0gdW5kZWZpbmVkO1xuXHRcdH0sNTAwMCk7XG5cblx0XHRmdW5jdGlvbiByYW5kb21SYW5nZShtaW4sIG1heCl7XG5cdFx0XHRyZXR1cm4gbWluICsgTWF0aC5yYW5kb20oKSAqIChtYXggLSBtaW4gKTtcblx0XHR9XG5cblx0XHRmdW5jdGlvbiByYW5kb21JbnQobWluLCBtYXgpe1xuXHRcdFx0cmV0dXJuIE1hdGguZmxvb3IobWluICsgTWF0aC5yYW5kb20oKSogKG1heCAtIG1pbiArIDEpKTtcblx0XHR9XG5cblx0XHRmdW5jdGlvbiBjb252ZXJ0VG9SYWRpYW5zKGRlZ3JlZSkge1xuXHRcdFx0cmV0dXJuIGRlZ3JlZSooTWF0aC5QSS8xODApO1xuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIGRyYXdTdGFyKGN4LCBjeSwgc3Bpa2VzLCBvdXRlclJhZGl1cywgaW5uZXJSYWRpdXMsY29sb3IpIHtcblx0XHRcdHZhciByb3QgPSBNYXRoLlBJIC8gMiAqIDM7XG5cdFx0XHR2YXIgeCA9IGN4O1xuXHRcdFx0dmFyIHkgPSBjeTtcblx0XHRcdHZhciBzdGVwID0gTWF0aC5QSSAvIHNwaWtlcztcblxuXHRcdFx0Y29udGV4dC5zdHJva2VTeWxlID0gXCIjMDAwXCI7XG5cdFx0XHRjb250ZXh0LmJlZ2luUGF0aCgpO1xuXHRcdFx0Y29udGV4dC5tb3ZlVG8oY3gsIGN5IC0gb3V0ZXJSYWRpdXMpO1xuXHRcdFx0Zm9yIChpID0gMDsgaSA8IHNwaWtlczsgaSsrKSB7XG5cdFx0XHRcdHggPSBjeCArIE1hdGguY29zKHJvdCkgKiBvdXRlclJhZGl1cztcblx0XHRcdFx0eSA9IGN5ICsgTWF0aC5zaW4ocm90KSAqIG91dGVyUmFkaXVzO1xuXHRcdFx0XHRjb250ZXh0LmxpbmVUbyh4LCB5KTtcblx0XHRcdFx0cm90ICs9IHN0ZXA7XG5cblx0XHRcdFx0eCA9IGN4ICsgTWF0aC5jb3Mocm90KSAqIGlubmVyUmFkaXVzO1xuXHRcdFx0XHR5ID0gY3kgKyBNYXRoLnNpbihyb3QpICogaW5uZXJSYWRpdXM7XG5cdFx0XHRcdGNvbnRleHQubGluZVRvKHgsIHkpO1xuXHRcdFx0XHRyb3QgKz0gc3RlcDtcblx0XHRcdH1cblxuXHRcdFx0Y29udGV4dC5saW5lVG8oY3gsIGN5IC0gb3V0ZXJSYWRpdXMpO1xuXHRcdFx0Y29udGV4dC5jbG9zZVBhdGgoKTtcblx0XHRcdGNvbnRleHQuZmlsbFN0eWxlPWNvbG9yO1xuXHRcdFx0Y29udGV4dC5maWxsKCk7XG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gZHJhdygpe1xuXHRcdFx0Y29udGV4dC5zYXZlKCk7XG5cdFx0XHRjb250ZXh0LnRyYW5zbGF0ZSh0aGlzLngsdGhpcy55KTtcblx0XHRcdGNvbnRleHQucm90YXRlKHRoaXMuYW5nbGUpO1xuXHRcdFx0Y29udGV4dC5maWxsU3R5bGU9dGhpcy5jb2xvcjtcblx0XHRcdGNvbnRleHQuYmVnaW5QYXRoKCk7XG5cdFx0XHQvLyBkcmF3U3RhcigwLCAwLCA1LCB0aGlzLmJveFcsIHRoaXMuYm94SCk7XG5cdFx0XHRjb250ZXh0LmZpbGxSZWN0KHRoaXMuYm94Vy8yKi0xLHRoaXMuYm94SC8yKi0xLHRoaXMuYm94Vyx0aGlzLmJveEgpO1xuXHRcdFx0Y29udGV4dC5maWxsKCk7XG5cdFx0XHRjb250ZXh0LmNsb3NlUGF0aCgpO1xuXHRcdFx0Y29udGV4dC5yZXN0b3JlKCk7XG5cdFx0XHR0aGlzLmFuZ2xlICs9IHRoaXMuYW5nbGVzcGluO1xuXHRcdFx0dGhpcy52ZWxZKj0gMC45OTk7XG5cdFx0XHR0aGlzLnZlbFkgKz0gMC4zO1xuXHRcdFx0dGhpcy54ICs9IHRoaXMudmVsWDtcblx0XHRcdHRoaXMueSArPSB0aGlzLnZlbFk7XG5cblx0XHRcdGlmKHRoaXMueSA8IDApe1xuXHRcdFx0XHR0aGlzLnZlbFkgKj0gLTAuMjtcblx0XHRcdFx0dGhpcy52ZWxYICo9IDAuOTtcblx0XHRcdH1cblx0XHRcdGlmICh0aGlzLnkgPiBoZWlnaHQpe1xuXHRcdFx0XHR0aGlzLmFuZ2xlc3BpbiA9IDA7XG5cdFx0XHRcdHRoaXMueSA9IGhlaWdodDtcblx0XHRcdFx0dGhpcy52ZWxZICo9IC0wLjI7XG5cdFx0XHRcdHRoaXMudmVsWCAqPSAwLjk7XG5cdFx0XHR9XG5cdFx0XHRpZiAodGhpcy54ID4gd2lkdGggfHx0aGlzLng8IDApe1xuXHRcdFx0XHR0aGlzLnZlbFggKj0gLTAuNTtcblx0XHRcdH1cblxuXHRcdH1cblx0fVxuXG59KTtcbiIsImFwcC5jb25maWcoZnVuY3Rpb24oJHN0YXRlUHJvdmlkZXIpe1xuXHQkc3RhdGVQcm92aWRlclxuXHQuc3RhdGUoJ2hvbWUnLCB7XG5cdFx0dXJsOiAnLycsXG5cdFx0dGVtcGxhdGVVcmw6ICcvanMvdGVtcGxhdGVzL2hvbWUuaHRtbCcsXG5cdFx0Y29udHJvbGxlcjogJ2hvbWVDdHJsJ1xuXHR9KVxuXHQuc3RhdGUoJ3Byb2plY3RzJywge1xuXHRcdHVybDogJy9wcm9qZWN0cycsXG5cdFx0dGVtcGxhdGVVcmw6ICcvanMvdGVtcGxhdGVzL3Byb2plY3RzLmh0bWwnLFxuXHRcdGNvbnRyb2xsZXI6ICdwcm9qZWN0Q3RybCdcblx0fSlcblx0LnN0YXRlKCdhYm91dCcsIHtcblx0XHR1cmw6ICcvYWJvdXQnLFxuXHRcdHRlbXBsYXRlVXJsOiAnL2pzL3RlbXBsYXRlcy9hYm91dC5odG1sJyxcblx0XHRjb250cm9sbGVyOiAnYWJvdXRDdHJsJ1xuXHR9KVxuXHQuc3RhdGUoJ2NvbnRhY3QnLCB7XG5cdFx0dXJsOiAnL2NvbnRhY3QnLFxuXHRcdHRlbXBsYXRlVXJsOiAnL2pzL3RlbXBsYXRlcy9jb250YWN0Lmh0bWwnLFxuXHRcdGNvbnRyb2xsZXI6ICdjb250YWN0Q3RybCdcblx0fSk7XG59KTtcblxuYXBwLmNvbnRyb2xsZXIoJ2hvbWVDdHJsJywgZnVuY3Rpb24oKXtcblx0dmFyIGluY3JlbWVudCA9IDA7XG5cdHZhciBjYXJvdXNlbCA9ICQoJyNjYXJvdXNlbCcpO1xuXHR2YXIgY3VycmVudCA9ICcjZmlnLTEnO1xuXHR2YXIgcHJldjtcblx0c2V0SW50ZXJ2YWwoIGZ1bmN0aW9uKCl7XG5cdFx0aW5jcmVtZW50Kys7XG5cdFx0Y2Fyb3VzZWwuY3NzKHtcblx0XHRcdCctd2Via2l0LXRyYW5zZm9ybSc6ICdyb3RhdGVYKCcgKyAoaW5jcmVtZW50ICogLTYwKSArICdkZWcpJ1xuXHRcdH0pO1xuXHRcdGNhcm91c2VsLmF0dHIoJ2RhdGEtc3RhdGUnLChpbmNyZW1lbnQgJSA2KSArIDEpO1xuXG5cdFx0cHJldiA9IGN1cnJlbnQ7XG5cdFx0Y3VycmVudCA9ICcjZmlnLScgKyAoKGluY3JlbWVudCAlIDYpICsgMSk7XG5cdH0sMTUwMCk7XG5cblx0Ly8gdmFyIGNpcmNsZTEgPSAkKCcjY2lyY2xlLTEnKTtcblx0Ly8gY29uc29sZS5sb2coJyRjaXJjbGUtMScsIGNpcmNsZTEpO1xuXHQvLyB2YXIgY2lyY2xlMiA9ICQoJyNjaXJjbGUtMicpO1xuXHQvLyAvLyB2YXIgY2lyY2xlMyA9ICQoJyNjaXJjbGUtMycpO1xuXHQvL1xuXHQvLyBjaXJjbGUxLmNsaWNrKGZ1bmN0aW9uKCl7XG5cdC8vIFx0Y2lyY2xlMS5hZGRDbGFzcygnc3Bpbi1jbG9ja3dpc2UnKTtcblx0Ly8gXHRzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG5cdC8vIFx0XHRjaXJjbGUyLmFkZENsYXNzKCdzcGluLWNvdW50ZXJjbG9ja3dpc2UnKTtcblx0Ly8gXHR9LDUwMCk7XG5cdC8vIH0pO1xufSk7XG4iLCJhcHAuY29udHJvbGxlcigncHJvamVjdEN0cmwnLCBmdW5jdGlvbigkc2NvcGUpe1xuXHQkKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpIHtcblxuXHRcdHZhciBjdXJQYWdlID0gMTtcblx0XHR2YXIgbnVtT2ZQYWdlcyA9ICQoXCIuc2t3LXBhZ2VcIikubGVuZ3RoO1xuXHRcdHZhciBhbmltVGltZSA9IDEwMDA7XG5cdFx0dmFyIHNjcm9sbGluZyA9IGZhbHNlO1xuXHRcdHZhciBwZ1ByZWZpeCA9IFwiLnNrdy1wYWdlLVwiO1xuXG5cdFx0ZnVuY3Rpb24gcGFnaW5hdGlvbigpIHtcblx0XHRcdHNjcm9sbGluZyA9IHRydWU7XG5cblx0XHRcdCQocGdQcmVmaXggKyBjdXJQYWdlKS5yZW1vdmVDbGFzcyhcImluYWN0aXZlXCIpLmFkZENsYXNzKFwiYWN0aXZlXCIpO1xuXHRcdFx0JChwZ1ByZWZpeCArIChjdXJQYWdlIC0gMSkpLmFkZENsYXNzKFwiaW5hY3RpdmVcIik7XG5cdFx0XHQkKHBnUHJlZml4ICsgKGN1clBhZ2UgKyAxKSkucmVtb3ZlQ2xhc3MoXCJhY3RpdmVcIik7XG5cblx0XHRcdHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHNjcm9sbGluZyA9IGZhbHNlO1xuXHRcdFx0fSwgYW5pbVRpbWUpO1xuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIG5hdmlnYXRlVXAoKSB7XG5cdFx0XHRpZiAoY3VyUGFnZSA9PT0gMSkgcmV0dXJuO1xuXHRcdFx0Y3VyUGFnZS0tO1xuXHRcdFx0cGFnaW5hdGlvbigpO1xuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIG5hdmlnYXRlRG93bigpIHtcblx0XHRcdGlmIChjdXJQYWdlID09PSBudW1PZlBhZ2VzKSByZXR1cm47XG5cdFx0XHRjdXJQYWdlKys7XG5cdFx0XHRwYWdpbmF0aW9uKCk7XG5cdFx0fVxuXG5cdFx0JChkb2N1bWVudCkub24oXCJtb3VzZXdoZWVsIERPTU1vdXNlU2Nyb2xsXCIsIGZ1bmN0aW9uKGUpIHtcblx0XHRcdGlmIChzY3JvbGxpbmcpIHJldHVybjtcblx0XHRcdGlmIChlLm9yaWdpbmFsRXZlbnQud2hlZWxEZWx0YSA+IDAgfHwgZS5vcmlnaW5hbEV2ZW50LmRldGFpbCA8IDApIHtcblx0XHRcdFx0bmF2aWdhdGVVcCgpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0bmF2aWdhdGVEb3duKCk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0XHQkKGRvY3VtZW50KS5vbihcImtleWRvd25cIiwgZnVuY3Rpb24oZSkge1xuXHRcdFx0aWYgKHNjcm9sbGluZykgcmV0dXJuO1xuXHRcdFx0aWYgKGUud2hpY2ggPT09IDM4KSB7XG5cdFx0XHRcdG5hdmlnYXRlVXAoKTtcblx0XHRcdH0gZWxzZSBpZiAoZS53aGljaCA9PT0gNDApIHtcblx0XHRcdFx0bmF2aWdhdGVEb3duKCk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0XHQkKCcjZG93bi1hcnJvdycpLmNsaWNrKGZ1bmN0aW9uKCl7XG5cdFx0XHRpZiAoc2Nyb2xsaW5nKSByZXR1cm47XG5cdFx0XHRuYXZpZ2F0ZURvd24oKTtcblx0XHR9KTtcblxuXHR9KTtcbn0pO1xuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
