'use strict';

// window.app = angular.module('portfolio', ['ui.router', 'ngAnimate']);
window.app = angular.module('portfolio', ['ui.router']);

app.config(function ($urlRouterProvider, $locationProvider, $urlMatcherFactoryProvider) {

	// this makes the '/stores/' route correctly redirect to '/stores'
	$urlRouterProvider.rule(function ($injector, $location) {

		var re = /(.+)(\/+)(\?.*)?$/;
		var path = $location.url();

		if (re.test(path)) {
			return path.replace(re, '$1$3');
		}

		return false;
	});
	// This turns off hashbang urls (/#about) and changes it to something normal (/about)
	$locationProvider.html5Mode(true);
	$urlRouterProvider.when('/auth/:provider', function () {
		window.location.reload();
	});
	// If we go to a URL that ui-router doesn't have registered, go to the "/" url.
	$urlRouterProvider.otherwise('/');
});

app.controller('aboutCtrl', function ($scope) {
	var theWindow = $(window);
	var force = d3.layout.force();
	var stopped = true;

	// angular.element(document).ready(function(){
	$scope.skills = [{ name: "JavaScript", level: 3 }, { name: "MongoDB", level: 3 }, { name: "Express.js", level: 3 }, { name: "Angular.js", level: 3 }, { name: "Node.js", level: 3 }, { name: "Mongoose.js", level: 3 }, { name: "Git", level: 3 }, { name: "CSS3", level: 3 }, { name: "HTML5", level: 3 }, { name: "Resonsive Design", level: 2 }, { name: "Gulp", level: 2 }, { name: "Mocha & Chai", level: 2 }, { name: "jQuery", level: 2 }, { name: "Bootstrap", level: 2 }, { name: "Web-Audio", level: 2 }, { name: "Chrome Extensions", level: 1 }, { name: "SQL", level: 1 }, { name: "WebSockets", level: 1 }, { name: "MIDI", level: 1 }, { name: "Java", level: 1 }, { name: "C++", level: 1 }];

	$scope.colors = ['#7FFFD4', '#E0FFFF', '#33CCFF', '#C688E8', '#FF807D', '#FF8EB2'];

	$scope.skills.map(function (e, i) {
		e.color = $scope.colors[i % 6];
	});

	function initializeSkillsCloud() {
		var skillsCloud = $("#skills-cloud");
		var width = skillsCloud.width();
		var height = skillsCloud.height();
		var svg = d3.select("#skills-cloud").append("svg");

		//create nodes
		var nodes = d3.range($scope.skills.length).map(function (i) {
			return {
				radius: $scope.skills[i].level * 18 + 14,
				label: $scope.skills[i].name,
				skillLevel: $scope.skills[i].level,
				bgColor: $scope.skills[i].color
			};
		});

		var root = nodes[0];
		root.radius = 0;
		root.fixed = true;

		var groups = svg.selectAll("g").data(nodes.slice(1)).enter().append("g");

		var circles = groups.append('circle').data(nodes.slice(1)).attr("r", function (d) {
			return d.radius;
		}).style("fill", function (d, i) {
			return d.bgColor;
		});

		var label = groups.append("text").text(function (d) {
			return d.label;
		}).attr({
			"alignment-baseline": "middle",
			"text-anchor": "middle"
		});

		force.gravity(0.05).charge(function (d, i) {
			return i ? 0 : -3000;
		}).nodes(nodes);

		if (navigator.userAgent.split("Chrome").length < 2) {
			force.size([width - 100, height + 600]); //safari
		} else {
				force.size([width - 200, height - 300]); //chrome
			}

		force.start();
		stopped = false;

		force.on("tick", function (e) {
			var q = d3.geom.quadtree(nodes),
			    i = 0,
			    n = nodes.length;

			while (++i < n) q.visit(collide(nodes[i]));

			//move circles
			svg.selectAll("circle").attr("cx", function (d) {
				return d.x;
			}).attr("cy", function (d) {
				return d.y;
			});

			//move labels
			svg.selectAll("text").attr("x", function (d) {
				return d.x;
			}).attr("y", function (d) {
				return d.y;
			});
		});

		svg.on("mousemove", function () {
			var p1 = d3.mouse(this);
			root.px = p1[0];
			root.py = p1[1];
			force.resume();
		});

		//So they don't all start out in a straight line
		root.px = 1;
		root.py = 1;

		function collide(node) {
			var r = node.radius + 16,
			    nx1 = node.x - r,
			    nx2 = node.x + r,
			    ny1 = node.y - r,
			    ny2 = node.y + r;
			return function (quad, x1, y1, x2, y2) {
				if (quad.point && quad.point !== node) {
					var x = node.x - quad.point.x,
					    y = node.y - quad.point.y,
					    l = Math.sqrt(x * x + y * y),
					    r = node.radius + quad.point.radius;

					if (l < r) {
						l = (l - r) / l * 0.5;
						node.x -= x *= l;
						node.y -= y *= l;
						quad.point.x += x;
						quad.point.y += y;
					}
				}
				return x1 > nx2 || x2 < nx1 || y1 > ny2 || y2 < ny1;
			};
		}
	}
	// });

	var firefox;
	if (navigator.userAgent.split("Safari").length < 2 && navigator.userAgent.split("Chrome").length < 2) {
		firefox = true;
	}

	if (firefox) {
		$('#skills-cloud').css({ 'display': 'none' });
		$('#skills-mobile').css({ 'display': 'block', 'margin-top': '24px', 'margin-bottom': '44px', 'height': '700px' });

		setTimeout(function () {
			$('.skill-circle').css({ 'padding': '1px', 'padding-right': '32%', 'font-family': 'Oxygen', 'font-size': '19px', 'font-weight': '300', 'float': 'right' });
		}, 500);
	}

	if (theWindow.width() > 1074 && !firefox) {
		initializeSkillsCloud();
	}

	theWindow.resize(function () {
		if (theWindow.width() > 1074 && !firefox) {
			$('html,body').scrollTop(0);
			//start / restart mouseover listener if stopped
			if (stopped) {
				initializeSkillsCloud();
			}
		} else {
			force.stop();
		}
	});
});

app.controller('contactCtrl', function ($scope, $http) {
	$scope.formData = {};

	$scope.sendMail = function () {
		$scope.waiting = true;
		$scope.sent = false;
		$scope.success = false;
		$http.post('/api/contact', $scope.formData).then(function (successResponse) {
			$scope.waiting = false;
			$scope.sent = true;
			$scope.success = successResponse.data;
			$scope.formData = {};
		});
	};

	var resumeLabel = $('#resume');
	var overlay = $('#overlay');
	var resume = $('#resume-container');

	resumeLabel.click(function () {
		overlay.css({ 'opacity': '.7', 'z-index': '1' });
		resume.css({ 'display': 'block' });
	});
	overlay.click(function () {
		overlay.css({ 'opacity': '0', 'z-index': '-1' });
		resume.css({ 'display': 'none' });
	});

	// function explode() {
	//
	// 	$('#canvas').css({'display' : 'initial'});
	//
	// 	var requestId;
	//
	// 	var canvas = document.getElementById("canvas"),
	// 		context = canvas.getContext("2d"),
	// 		width = canvas.width = window.innerWidth,
	// 		height = canvas.height = window.innerHeight,
	// 		particle = [],
	// 		particleCount = 0,
	// 		gravity = 0.3,
	// 		colors = ['#7FFFD4','#E0FFFF','#33CCFF','#C688E8','#FF807D','#FF8EB2'];
	//
	// 	for( var i = 0; i < 50; i++){
	// 		particle.push({
	// 			x : width/2,
	// 			y : height/2,
	// 			boxW : randomRange(5,20),
	// 			boxH : randomRange(5,20),
	// 			size : randomRange(2,8),
	//
	// 			spikeran:randomRange(3,5),
	//
	// 			velX :randomRange(-8,8),
	// 			velY :randomRange(-50,-10),
	//
	// 			angle :convertToRadians(randomRange(0,360)),
	// 			color:colors[Math.floor(Math.random() * colors.length)],
	// 			anglespin:randomRange(-0.2,0.2),
	//
	// 			draw : draw
	// 		});
	// 	}
	//
	// 	var r1={
	// 		x:width/2-150,
	// 		y:height/2-150,
	// 		width:300,
	// 		height:300,
	// 		velX :0,
	// 		velY :-10,
	// 		alphatop:0
	// 	};
	//
	//
	// 	function drawScreen(){
	// 		var size = 50;
	// 		if (r1.alphatop < 1){
	// 			r1.alphatop += 0.01;
	// 		} else{
	// 			r1.alphatop = 1;
	// 		}
	// 		context.globalAlpha = r1.alphatop;
	//
	// 		if(r1.alphatop === 1){
	// 			r1.velY*= 0.999;
	// 			r1.velY += 0.3;
	// 			r1.x += r1.velX;
	// 			r1.y += r1.velY;
	// 		}
	//
	// 		if(r1.y + r1.height > height){
	// 			r1.anglespin = 0;
	// 			r1.y = height - r1.height;
	// 			r1.velY *= -0.8;
	// 			r1.velX *= 0.9;
	// 		}
	//
	// 		context.globalAlpha = 1;
	//
	// 		for( var i = 0; i < particle.length; i++){
	// 			particle[i].draw();
	// 		}
	// 	}
	//
	// 	function update(){
	// 		context.clearRect(0,0,width,height);
	// 		drawScreen();
	// 		requestId = requestAnimationFrame(update);
	// 	}
	//
	// 	update();
	//
	// 	setTimeout(function(){
	// 		window.cancelAnimationFrame(requestId);
	// 		requestId = undefined;
	// 	},5000);
	//
	// 	function randomRange(min, max){
	// 		return min + Math.random() * (max - min );
	// 	}
	//
	// 	function randomInt(min, max){
	// 		return Math.floor(min + Math.random()* (max - min + 1));
	// 	}
	//
	// 	function convertToRadians(degree) {
	// 		return degree*(Math.PI/180);
	// 	}
	//
	// 	function drawStar(cx, cy, spikes, outerRadius, innerRadius,color) {
	// 		var rot = Math.PI / 2 * 3;
	// 		var x = cx;
	// 		var y = cy;
	// 		var step = Math.PI / spikes;
	//
	// 		context.strokeSyle = "#000";
	// 		context.beginPath();
	// 		context.moveTo(cx, cy - outerRadius);
	// 		for (i = 0; i < spikes; i++) {
	// 			x = cx + Math.cos(rot) * outerRadius;
	// 			y = cy + Math.sin(rot) * outerRadius;
	// 			context.lineTo(x, y);
	// 			rot += step;
	//
	// 			x = cx + Math.cos(rot) * innerRadius;
	// 			y = cy + Math.sin(rot) * innerRadius;
	// 			context.lineTo(x, y);
	// 			rot += step;
	// 		}
	//
	// 		context.lineTo(cx, cy - outerRadius);
	// 		context.closePath();
	// 		context.fillStyle=color;
	// 		context.fill();
	// 	}
	//
	// 	function draw(){
	// 		context.save();
	// 		context.translate(this.x,this.y);
	// 		context.rotate(this.angle);
	// 		context.fillStyle=this.color;
	// 		context.beginPath();
	// 		// drawStar(0, 0, 5, this.boxW, this.boxH);
	// 		context.fillRect(this.boxW/2*-1,this.boxH/2*-1,this.boxW,this.boxH);
	// 		context.fill();
	// 		context.closePath();
	// 		context.restore();
	// 		this.angle += this.anglespin;
	// 		this.velY*= 0.999;
	// 		this.velY += 0.3;
	// 		this.x += this.velX;
	// 		this.y += this.velY;
	//
	// 		if(this.y < 0){
	// 			this.velY *= -0.2;
	// 			this.velX *= 0.9;
	// 		}
	// 		if (this.y > height){
	// 			this.anglespin = 0;
	// 			this.y = height;
	// 			this.velY *= -0.2;
	// 			this.velX *= 0.9;
	// 		}
	// 		if (this.x > width ||this.x< 0){
	// 			this.velX *= -0.5;
	// 		}
	// 	}
	// }
});

app.config(function ($stateProvider) {
	$stateProvider.state('home', {
		url: '/',
		templateUrl: '/js/templates/new-home.html',
		controller: 'homeCtrl'
	});
	// .state('projects', {
	// 	url: '/projects',
	// 	templateUrl: '/js/templates/projects.html',
	// 	controller: 'projectCtrl'
	// })
	// .state('about', {
	// 	url: '/about',
	// 	templateUrl: '/js/templates/about.html',
	// 	controller: 'aboutCtrl'
	// })
	// .state('contact', {
	// 	url: '/contact',
	// 	templateUrl: '/js/templates/contact.html',
	// 	controller: 'contactCtrl'
	// });
});

app.directive('home', function () {
	return {
		restrict: "E",
		templateUrl: '/js/templates/home.html'
	};
});
app.directive('projects', function () {
	return {
		restrict: "E",
		templateUrl: '/js/templates/projects.html'
	};
});
app.directive('about', function () {
	return {
		restrict: "E",
		templateUrl: '/js/templates/about.html'
	};
});
app.directive('contact', function () {
	return {
		restrict: "E",
		templateUrl: '/js/templates/contact.html'
	};
});

app.controller('homeCtrl', function () {
	$(window).load(function () {
		var increment = 0;
		var carousel = $('#carousel');
		var current = '#fig-1';
		var prev;
		var theWindow = $(window);
		var interval;
		var bars = $('#static-bars > li');
		var barContainer = $('#static-bars');
		var header = $('.main-heading');

		if (theWindow.width() > 768) {
			interval = setInterval(rotate, 1500);
		} else {
			var speed;
			barContainer.css({ 'display': 'block' });
			bars.each(function (index) {
				speed = (index + 1) * 0.3;
				$(this).css({ 'animation': 'slideInLeft ' + speed + 's' });
			});
			header.removeClass("animated").removeClass('flipInX');
		}

		// theWindow.resize(function() {
		// 	clearInterval(interval);
		// 	if (theWindow.width() > 768) {
		// 		$('html,body').scrollTop(0);
		// 		interval = setInterval(rotate,1500);
		// 	}
		// });

		function rotate() {
			console.log('rotating', carousel);
			increment++;
			carousel.css({ '-webkit-transform': 'rotateX(' + increment * -60 + 'deg)' });
			carousel.attr('data-state', increment % 6 + 1);
			prev = current;
			current = '#fig-' + (increment % 6 + 1);
		}
	});
});

app.controller('projectCtrl', function ($scope) {
	var theWindow = $(window);
	var skewMode = false;
	var curPage;
	function initializeSkew() {
		skewMode = true;
		$(document).ready(function () {

			var numOfPages = $(".skw-page").length;
			var animTime = 1000;
			var scrolling = false;
			var pgPrefix = ".skw-page-";
			// var progPrefix = "#p";

			curPage = parseInt(window.location.href.split("#p")[1]) + 1 || 1;

			for (var i = 1; i <= numOfPages; i++) {
				if (i < curPage) {
					$(pgPrefix + i).addClass("active").addClass("inactive");
				} else if (i === curPage) {
					$(pgPrefix + i).addClass("active").removeClass("inactive");
				} else {
					$(pgPrefix + i).removeClass("active").removeClass("inactive");
				}
			}

			function pagination() {
				scrolling = true;

				$(pgPrefix + curPage).removeClass("inactive").addClass("active");
				// $(progPrefix + curPage).addClass("current");
				setTimeout(function () {
					scrolling = false;
				}, animTime);
			}

			function navigateUp() {
				if (curPage === 1) return;
				curPage--;
				$(pgPrefix + (curPage + 1)).removeClass("active");
				// $(progPrefix + (curPage + 1)).removeClass("current");
				pagination();
			}

			function navigateDown() {
				if (curPage === numOfPages) return;
				curPage++;
				$(pgPrefix + (curPage - 1)).addClass("inactive");
				// $(progPrefix + (curPage -1)).removeClass("current");
				pagination();
			}

			$(document).off(); //reset event listeners

			$(document).on("mousewheel DOMMouseScroll", function (e) {
				if (scrolling) return;
				if (e.originalEvent.wheelDelta > 0 || e.originalEvent.detail < 0) {
					navigateUp();
				} else {
					navigateDown();
				}
			});

			$(document).on("keydown", function (e) {
				if (scrolling) return;
				if (e.which === 38) {
					navigateUp();
				} else if (e.which === 40) {
					navigateDown();
				}
			});
		});
	}

	if (theWindow.width() > 768) {
		console.log('INITIALIZING SKEW');
		initializeSkew();
	}

	theWindow.resize(function () {
		if (theWindow.width() > 768) {
			// $('html,body').scrollTop(0);
			//start / restart mouseover listener if stopped
			if (!skewMode) {
				initializeSkew();
			}
		}
	});
});

app.directive('projectsMobile', function () {
	return {
		restrict: 'E',
		templateUrl: '/js/directives/projects-mobile.html'
	};
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsImFib3V0LmpzIiwiY29udGFjdC5qcyIsImhvbWUuanMiLCJwcm9qZWN0LmpzIiwiZGlyZWN0aXZlcy9wcm9qZWN0cy1tb2JpbGUuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0FBQ0EsTUFBQSxDQUFBLEdBQUEsR0FBQSxPQUFBLENBQUEsTUFBQSxDQUFBLFdBQUEsRUFBQSxDQUFBLFdBQUEsQ0FBQSxDQUFBLENBQUE7O0FBR0EsR0FBQSxDQUFBLE1BQUEsQ0FBQSxVQUFBLGtCQUFBLEVBQUEsaUJBQUEsRUFBQSwwQkFBQSxFQUFBOzs7QUFHQSxtQkFBQSxDQUFBLElBQUEsQ0FBQSxVQUFBLFNBQUEsRUFBQSxTQUFBLEVBQUE7O0FBRUEsTUFBQSxFQUFBLEdBQUEsbUJBQUEsQ0FBQTtBQUNBLE1BQUEsSUFBQSxHQUFBLFNBQUEsQ0FBQSxHQUFBLEVBQUEsQ0FBQTs7QUFFQSxNQUFBLEVBQUEsQ0FBQSxJQUFBLENBQUEsSUFBQSxDQUFBLEVBQUE7QUFDQSxVQUFBLElBQUEsQ0FBQSxPQUFBLENBQUEsRUFBQSxFQUFBLE1BQUEsQ0FBQSxDQUFBO0dBQ0E7O0FBRUEsU0FBQSxLQUFBLENBQUE7RUFDQSxDQUFBOztBQUFBLEFBRUEsa0JBQUEsQ0FBQSxTQUFBLENBQUEsSUFBQSxDQUFBLENBQUE7QUFDQSxtQkFBQSxDQUFBLElBQUEsQ0FBQSxpQkFBQSxFQUFBLFlBQUE7QUFDQSxRQUFBLENBQUEsUUFBQSxDQUFBLE1BQUEsRUFBQSxDQUFBO0VBQ0EsQ0FBQTs7QUFBQSxBQUVBLG1CQUFBLENBQUEsU0FBQSxDQUFBLEdBQUEsQ0FBQSxDQUFBO0NBQ0EsQ0FBQSxDQUFBOztBQ3pCQSxHQUFBLENBQUEsVUFBQSxDQUFBLFdBQUEsRUFBQSxVQUFBLE1BQUEsRUFBQTtBQUNBLEtBQUEsU0FBQSxHQUFBLENBQUEsQ0FBQSxNQUFBLENBQUEsQ0FBQTtBQUNBLEtBQUEsS0FBQSxHQUFBLEVBQUEsQ0FBQSxNQUFBLENBQUEsS0FBQSxFQUFBLENBQUE7QUFDQSxLQUFBLE9BQUEsR0FBQSxJQUFBOzs7QUFBQSxBQUdBLE9BQUEsQ0FBQSxNQUFBLEdBQUEsQ0FDQSxFQUFBLElBQUEsRUFBQSxZQUFBLEVBQUEsS0FBQSxFQUFBLENBQUEsRUFBQSxFQUNBLEVBQUEsSUFBQSxFQUFBLFNBQUEsRUFBQSxLQUFBLEVBQUEsQ0FBQSxFQUFBLEVBQ0EsRUFBQSxJQUFBLEVBQUEsWUFBQSxFQUFBLEtBQUEsRUFBQSxDQUFBLEVBQUEsRUFDQSxFQUFBLElBQUEsRUFBQSxZQUFBLEVBQUEsS0FBQSxFQUFBLENBQUEsRUFBQSxFQUNBLEVBQUEsSUFBQSxFQUFBLFNBQUEsRUFBQSxLQUFBLEVBQUEsQ0FBQSxFQUFBLEVBQ0EsRUFBQSxJQUFBLEVBQUEsYUFBQSxFQUFBLEtBQUEsRUFBQSxDQUFBLEVBQUEsRUFDQSxFQUFBLElBQUEsRUFBQSxLQUFBLEVBQUEsS0FBQSxFQUFBLENBQUEsRUFBQSxFQUNBLEVBQUEsSUFBQSxFQUFBLE1BQUEsRUFBQSxLQUFBLEVBQUEsQ0FBQSxFQUFBLEVBQ0EsRUFBQSxJQUFBLEVBQUEsT0FBQSxFQUFBLEtBQUEsRUFBQSxDQUFBLEVBQUEsRUFDQSxFQUFBLElBQUEsRUFBQSxrQkFBQSxFQUFBLEtBQUEsRUFBQSxDQUFBLEVBQUEsRUFDQSxFQUFBLElBQUEsRUFBQSxNQUFBLEVBQUEsS0FBQSxFQUFBLENBQUEsRUFBQSxFQUNBLEVBQUEsSUFBQSxFQUFBLGNBQUEsRUFBQSxLQUFBLEVBQUEsQ0FBQSxFQUFBLEVBQ0EsRUFBQSxJQUFBLEVBQUEsUUFBQSxFQUFBLEtBQUEsRUFBQSxDQUFBLEVBQUEsRUFDQSxFQUFBLElBQUEsRUFBQSxXQUFBLEVBQUEsS0FBQSxFQUFBLENBQUEsRUFBQSxFQUNBLEVBQUEsSUFBQSxFQUFBLFdBQUEsRUFBQSxLQUFBLEVBQUEsQ0FBQSxFQUFBLEVBQ0EsRUFBQSxJQUFBLEVBQUEsbUJBQUEsRUFBQSxLQUFBLEVBQUEsQ0FBQSxFQUFBLEVBQ0EsRUFBQSxJQUFBLEVBQUEsS0FBQSxFQUFBLEtBQUEsRUFBQSxDQUFBLEVBQUEsRUFDQSxFQUFBLElBQUEsRUFBQSxZQUFBLEVBQUEsS0FBQSxFQUFBLENBQUEsRUFBQSxFQUNBLEVBQUEsSUFBQSxFQUFBLE1BQUEsRUFBQSxLQUFBLEVBQUEsQ0FBQSxFQUFBLEVBQ0EsRUFBQSxJQUFBLEVBQUEsTUFBQSxFQUFBLEtBQUEsRUFBQSxDQUFBLEVBQUEsRUFDQSxFQUFBLElBQUEsRUFBQSxLQUFBLEVBQUEsS0FBQSxFQUFBLENBQUEsRUFBQSxDQUNBLENBQUE7O0FBRUEsT0FBQSxDQUFBLE1BQUEsR0FBQSxDQUNBLFNBQUEsRUFDQSxTQUFBLEVBQ0EsU0FBQSxFQUNBLFNBQUEsRUFDQSxTQUFBLEVBQ0EsU0FBQSxDQUNBLENBQUE7O0FBRUEsT0FBQSxDQUFBLE1BQUEsQ0FBQSxHQUFBLENBQUEsVUFBQSxDQUFBLEVBQUEsQ0FBQSxFQUFBO0FBQ0EsR0FBQSxDQUFBLEtBQUEsR0FBQSxNQUFBLENBQUEsTUFBQSxDQUFBLENBQUEsR0FBQSxDQUFBLENBQUEsQ0FBQTtFQUNBLENBQUEsQ0FBQTs7QUFFQSxVQUFBLHFCQUFBLEdBQUE7QUFDQSxNQUFBLFdBQUEsR0FBQSxDQUFBLENBQUEsZUFBQSxDQUFBLENBQUE7QUFDQSxNQUFBLEtBQUEsR0FBQSxXQUFBLENBQUEsS0FBQSxFQUFBLENBQUE7QUFDQSxNQUFBLE1BQUEsR0FBQSxXQUFBLENBQUEsTUFBQSxFQUFBLENBQUE7QUFDQSxNQUFBLEdBQUEsR0FBQSxFQUFBLENBQUEsTUFBQSxDQUFBLGVBQUEsQ0FBQSxDQUFBLE1BQUEsQ0FBQSxLQUFBLENBQUE7OztBQUFBLEFBSUEsTUFBQSxLQUFBLEdBQUEsRUFBQSxDQUFBLEtBQUEsQ0FBQSxNQUFBLENBQUEsTUFBQSxDQUFBLE1BQUEsQ0FBQSxDQUFBLEdBQUEsQ0FBQSxVQUFBLENBQUEsRUFBQTtBQUNBLFVBQUE7QUFDQSxVQUFBLEVBQUEsTUFBQSxDQUFBLE1BQUEsQ0FBQSxDQUFBLENBQUEsQ0FBQSxLQUFBLEdBQUEsRUFBQSxHQUFBLEVBQUE7QUFDQSxTQUFBLEVBQUEsTUFBQSxDQUFBLE1BQUEsQ0FBQSxDQUFBLENBQUEsQ0FBQSxJQUFBO0FBQ0EsY0FBQSxFQUFBLE1BQUEsQ0FBQSxNQUFBLENBQUEsQ0FBQSxDQUFBLENBQUEsS0FBQTtBQUNBLFdBQUEsRUFBQSxNQUFBLENBQUEsTUFBQSxDQUFBLENBQUEsQ0FBQSxDQUFBLEtBQUE7SUFDQSxDQUFBO0dBQ0EsQ0FBQSxDQUFBOztBQUVBLE1BQUEsSUFBQSxHQUFBLEtBQUEsQ0FBQSxDQUFBLENBQUEsQ0FBQTtBQUNBLE1BQUEsQ0FBQSxNQUFBLEdBQUEsQ0FBQSxDQUFBO0FBQ0EsTUFBQSxDQUFBLEtBQUEsR0FBQSxJQUFBLENBQUE7O0FBRUEsTUFBQSxNQUFBLEdBQUEsR0FBQSxDQUFBLFNBQUEsQ0FBQSxHQUFBLENBQUEsQ0FDQSxJQUFBLENBQUEsS0FBQSxDQUFBLEtBQUEsQ0FBQSxDQUFBLENBQUEsQ0FBQSxDQUNBLEtBQUEsRUFBQSxDQUNBLE1BQUEsQ0FBQSxHQUFBLENBQUEsQ0FBQTs7QUFFQSxNQUFBLE9BQUEsR0FBQSxNQUFBLENBQUEsTUFBQSxDQUFBLFFBQUEsQ0FBQSxDQUNBLElBQUEsQ0FBQSxLQUFBLENBQUEsS0FBQSxDQUFBLENBQUEsQ0FBQSxDQUFBLENBQ0EsSUFBQSxDQUFBLEdBQUEsRUFBQSxVQUFBLENBQUEsRUFBQTtBQUFBLFVBQUEsQ0FBQSxDQUFBLE1BQUEsQ0FBQTtHQUFBLENBQUEsQ0FDQSxLQUFBLENBQUEsTUFBQSxFQUFBLFVBQUEsQ0FBQSxFQUFBLENBQUEsRUFBQTtBQUFBLFVBQUEsQ0FBQSxDQUFBLE9BQUEsQ0FBQTtHQUFBLENBQUEsQ0FBQTs7QUFFQSxNQUFBLEtBQUEsR0FBQSxNQUFBLENBQUEsTUFBQSxDQUFBLE1BQUEsQ0FBQSxDQUNBLElBQUEsQ0FBQSxVQUFBLENBQUEsRUFBQTtBQUFBLFVBQUEsQ0FBQSxDQUFBLEtBQUEsQ0FBQTtHQUFBLENBQUEsQ0FDQSxJQUFBLENBQUE7QUFDQSx1QkFBQSxFQUFBLFFBQUE7QUFDQSxnQkFBQSxFQUFBLFFBQUE7R0FDQSxDQUFBLENBQUE7O0FBR0EsT0FBQSxDQUFBLE9BQUEsQ0FBQSxJQUFBLENBQUEsQ0FDQSxNQUFBLENBQUEsVUFBQSxDQUFBLEVBQUEsQ0FBQSxFQUFBO0FBQUEsVUFBQSxDQUFBLEdBQUEsQ0FBQSxHQUFBLENBQUEsSUFBQSxDQUFBO0dBQUEsQ0FBQSxDQUNBLEtBQUEsQ0FBQSxLQUFBLENBQUEsQ0FBQTs7QUFHQSxNQUFBLFNBQUEsQ0FBQSxTQUFBLENBQUEsS0FBQSxDQUFBLFFBQUEsQ0FBQSxDQUFBLE1BQUEsR0FBQSxDQUFBLEVBQUE7QUFDQSxRQUFBLENBQUEsSUFBQSxDQUFBLENBQUEsS0FBQSxHQUFBLEdBQUEsRUFBQSxNQUFBLEdBQUEsR0FBQSxDQUFBLENBQUE7QUFBQSxHQUNBLE1BQUE7QUFDQSxTQUFBLENBQUEsSUFBQSxDQUFBLENBQUEsS0FBQSxHQUFBLEdBQUEsRUFBQSxNQUFBLEdBQUEsR0FBQSxDQUFBLENBQUE7QUFBQSxJQUNBOztBQUdBLE9BQUEsQ0FBQSxLQUFBLEVBQUEsQ0FBQTtBQUNBLFNBQUEsR0FBQSxLQUFBLENBQUE7O0FBRUEsT0FBQSxDQUFBLEVBQUEsQ0FBQSxNQUFBLEVBQUEsVUFBQSxDQUFBLEVBQUE7QUFDQSxPQUFBLENBQUEsR0FBQSxFQUFBLENBQUEsSUFBQSxDQUFBLFFBQUEsQ0FBQSxLQUFBLENBQUE7T0FDQSxDQUFBLEdBQUEsQ0FBQTtPQUNBLENBQUEsR0FBQSxLQUFBLENBQUEsTUFBQSxDQUFBOztBQUVBLFVBQUEsRUFBQSxDQUFBLEdBQUEsQ0FBQSxFQUFBLENBQUEsQ0FBQSxLQUFBLENBQUEsT0FBQSxDQUFBLEtBQUEsQ0FBQSxDQUFBLENBQUEsQ0FBQSxDQUFBLENBQUE7OztBQUFBLEFBR0EsTUFBQSxDQUFBLFNBQUEsQ0FBQSxRQUFBLENBQUEsQ0FDQSxJQUFBLENBQUEsSUFBQSxFQUFBLFVBQUEsQ0FBQSxFQUFBO0FBQUEsV0FBQSxDQUFBLENBQUEsQ0FBQSxDQUFBO0lBQUEsQ0FBQSxDQUNBLElBQUEsQ0FBQSxJQUFBLEVBQUEsVUFBQSxDQUFBLEVBQUE7QUFBQSxXQUFBLENBQUEsQ0FBQSxDQUFBLENBQUE7SUFBQSxDQUFBOzs7QUFBQSxBQUdBLE1BQUEsQ0FBQSxTQUFBLENBQUEsTUFBQSxDQUFBLENBQ0EsSUFBQSxDQUFBLEdBQUEsRUFBQSxVQUFBLENBQUEsRUFBQTtBQUFBLFdBQUEsQ0FBQSxDQUFBLENBQUEsQ0FBQTtJQUFBLENBQUEsQ0FDQSxJQUFBLENBQUEsR0FBQSxFQUFBLFVBQUEsQ0FBQSxFQUFBO0FBQUEsV0FBQSxDQUFBLENBQUEsQ0FBQSxDQUFBO0lBQUEsQ0FBQSxDQUFBO0dBQ0EsQ0FBQSxDQUFBOztBQUVBLEtBQUEsQ0FBQSxFQUFBLENBQUEsV0FBQSxFQUFBLFlBQUE7QUFDQSxPQUFBLEVBQUEsR0FBQSxFQUFBLENBQUEsS0FBQSxDQUFBLElBQUEsQ0FBQSxDQUFBO0FBQ0EsT0FBQSxDQUFBLEVBQUEsR0FBQSxFQUFBLENBQUEsQ0FBQSxDQUFBLENBQUE7QUFDQSxPQUFBLENBQUEsRUFBQSxHQUFBLEVBQUEsQ0FBQSxDQUFBLENBQUEsQ0FBQTtBQUNBLFFBQUEsQ0FBQSxNQUFBLEVBQUEsQ0FBQTtHQUNBLENBQUE7OztBQUFBLEFBR0EsTUFBQSxDQUFBLEVBQUEsR0FBQSxDQUFBLENBQUE7QUFDQSxNQUFBLENBQUEsRUFBQSxHQUFBLENBQUEsQ0FBQTs7QUFHQSxXQUFBLE9BQUEsQ0FBQSxJQUFBLEVBQUE7QUFDQSxPQUFBLENBQUEsR0FBQSxJQUFBLENBQUEsTUFBQSxHQUFBLEVBQUE7T0FDQSxHQUFBLEdBQUEsSUFBQSxDQUFBLENBQUEsR0FBQSxDQUFBO09BQ0EsR0FBQSxHQUFBLElBQUEsQ0FBQSxDQUFBLEdBQUEsQ0FBQTtPQUNBLEdBQUEsR0FBQSxJQUFBLENBQUEsQ0FBQSxHQUFBLENBQUE7T0FDQSxHQUFBLEdBQUEsSUFBQSxDQUFBLENBQUEsR0FBQSxDQUFBLENBQUE7QUFDQSxVQUFBLFVBQUEsSUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQTtBQUNBLFFBQUEsSUFBQSxDQUFBLEtBQUEsSUFBQSxJQUFBLENBQUEsS0FBQSxLQUFBLElBQUEsRUFBQTtBQUNBLFNBQUEsQ0FBQSxHQUFBLElBQUEsQ0FBQSxDQUFBLEdBQUEsSUFBQSxDQUFBLEtBQUEsQ0FBQSxDQUFBO1NBQ0EsQ0FBQSxHQUFBLElBQUEsQ0FBQSxDQUFBLEdBQUEsSUFBQSxDQUFBLEtBQUEsQ0FBQSxDQUFBO1NBQ0EsQ0FBQSxHQUFBLElBQUEsQ0FBQSxJQUFBLENBQUEsQ0FBQSxHQUFBLENBQUEsR0FBQSxDQUFBLEdBQUEsQ0FBQSxDQUFBO1NBQ0EsQ0FBQSxHQUFBLElBQUEsQ0FBQSxNQUFBLEdBQUEsSUFBQSxDQUFBLEtBQUEsQ0FBQSxNQUFBLENBQUE7O0FBRUEsU0FBQSxDQUFBLEdBQUEsQ0FBQSxFQUFBO0FBQ0EsT0FBQSxHQUFBLENBQUEsQ0FBQSxHQUFBLENBQUEsQ0FBQSxHQUFBLENBQUEsR0FBQSxHQUFBLENBQUE7QUFDQSxVQUFBLENBQUEsQ0FBQSxJQUFBLENBQUEsSUFBQSxDQUFBLENBQUE7QUFDQSxVQUFBLENBQUEsQ0FBQSxJQUFBLENBQUEsSUFBQSxDQUFBLENBQUE7QUFDQSxVQUFBLENBQUEsS0FBQSxDQUFBLENBQUEsSUFBQSxDQUFBLENBQUE7QUFDQSxVQUFBLENBQUEsS0FBQSxDQUFBLENBQUEsSUFBQSxDQUFBLENBQUE7TUFDQTtLQUNBO0FBQ0EsV0FBQSxFQUFBLEdBQUEsR0FBQSxJQUFBLEVBQUEsR0FBQSxHQUFBLElBQUEsRUFBQSxHQUFBLEdBQUEsSUFBQSxFQUFBLEdBQUEsR0FBQSxDQUFBO0lBQ0EsQ0FBQTtHQUNBO0VBQ0E7OztBQUFBLEFBR0EsS0FBQSxPQUFBLENBQUE7QUFDQSxLQUFBLFNBQUEsQ0FBQSxTQUFBLENBQUEsS0FBQSxDQUFBLFFBQUEsQ0FBQSxDQUFBLE1BQUEsR0FBQSxDQUFBLElBQUEsU0FBQSxDQUFBLFNBQUEsQ0FBQSxLQUFBLENBQUEsUUFBQSxDQUFBLENBQUEsTUFBQSxHQUFBLENBQUEsRUFBQTtBQUNBLFNBQUEsR0FBQSxJQUFBLENBQUE7RUFDQTs7QUFFQSxLQUFBLE9BQUEsRUFBQTtBQUNBLEdBQUEsQ0FBQSxlQUFBLENBQUEsQ0FBQSxHQUFBLENBQUEsRUFBQSxTQUFBLEVBQUEsTUFBQSxFQUFBLENBQUEsQ0FBQTtBQUNBLEdBQUEsQ0FBQSxnQkFBQSxDQUFBLENBQUEsR0FBQSxDQUFBLEVBQUEsU0FBQSxFQUFBLE9BQUEsRUFBQSxZQUFBLEVBQUEsTUFBQSxFQUFBLGVBQUEsRUFBQSxNQUFBLEVBQUEsUUFBQSxFQUFBLE9BQUEsRUFBQSxDQUFBLENBQUE7O0FBRUEsWUFBQSxDQUFBLFlBQUE7QUFDQSxJQUFBLENBQUEsZUFBQSxDQUFBLENBQUEsR0FBQSxDQUFBLEVBQUEsU0FBQSxFQUFBLEtBQUEsRUFBQSxlQUFBLEVBQUEsS0FBQSxFQUFBLGFBQUEsRUFBQSxRQUFBLEVBQUEsV0FBQSxFQUFBLE1BQUEsRUFBQSxhQUFBLEVBQUEsS0FBQSxFQUFBLE9BQUEsRUFBQSxPQUFBLEVBQUEsQ0FBQSxDQUFBO0dBQ0EsRUFBQSxHQUFBLENBQUEsQ0FBQTtFQUNBOztBQUVBLEtBQUEsU0FBQSxDQUFBLEtBQUEsRUFBQSxHQUFBLElBQUEsSUFBQSxDQUFBLE9BQUEsRUFBQTtBQUNBLHVCQUFBLEVBQUEsQ0FBQTtFQUNBOztBQUVBLFVBQUEsQ0FBQSxNQUFBLENBQUEsWUFBQTtBQUNBLE1BQUEsU0FBQSxDQUFBLEtBQUEsRUFBQSxHQUFBLElBQUEsSUFBQSxDQUFBLE9BQUEsRUFBQTtBQUNBLElBQUEsQ0FBQSxXQUFBLENBQUEsQ0FBQSxTQUFBLENBQUEsQ0FBQSxDQUFBOztBQUFBLEFBRUEsT0FBQSxPQUFBLEVBQUE7QUFDQSx5QkFBQSxFQUFBLENBQUE7SUFDQTtHQUNBLE1BQUE7QUFDQSxRQUFBLENBQUEsSUFBQSxFQUFBLENBQUE7R0FDQTtFQUNBLENBQUEsQ0FBQTtDQUNBLENBQUEsQ0FBQTs7QUN2TEEsR0FBQSxDQUFBLFVBQUEsQ0FBQSxhQUFBLEVBQUEsVUFBQSxNQUFBLEVBQUEsS0FBQSxFQUFBO0FBQ0EsT0FBQSxDQUFBLFFBQUEsR0FBQSxFQUFBLENBQUE7O0FBRUEsT0FBQSxDQUFBLFFBQUEsR0FBQSxZQUFBO0FBQ0EsUUFBQSxDQUFBLE9BQUEsR0FBQSxJQUFBLENBQUE7QUFDQSxRQUFBLENBQUEsSUFBQSxHQUFBLEtBQUEsQ0FBQTtBQUNBLFFBQUEsQ0FBQSxPQUFBLEdBQUEsS0FBQSxDQUFBO0FBQ0EsT0FBQSxDQUFBLElBQUEsQ0FBQSxjQUFBLEVBQUEsTUFBQSxDQUFBLFFBQUEsQ0FBQSxDQUNBLElBQUEsQ0FBQSxVQUFBLGVBQUEsRUFBQTtBQUNBLFNBQUEsQ0FBQSxPQUFBLEdBQUEsS0FBQSxDQUFBO0FBQ0EsU0FBQSxDQUFBLElBQUEsR0FBQSxJQUFBLENBQUE7QUFDQSxTQUFBLENBQUEsT0FBQSxHQUFBLGVBQUEsQ0FBQSxJQUFBLENBQUE7QUFDQSxTQUFBLENBQUEsUUFBQSxHQUFBLEVBQUEsQ0FBQTtHQUNBLENBQUEsQ0FBQTtFQUNBLENBQUE7O0FBRUEsS0FBQSxXQUFBLEdBQUEsQ0FBQSxDQUFBLFNBQUEsQ0FBQSxDQUFBO0FBQ0EsS0FBQSxPQUFBLEdBQUEsQ0FBQSxDQUFBLFVBQUEsQ0FBQSxDQUFBO0FBQ0EsS0FBQSxNQUFBLEdBQUEsQ0FBQSxDQUFBLG1CQUFBLENBQUEsQ0FBQTs7QUFFQSxZQUFBLENBQUEsS0FBQSxDQUFBLFlBQUE7QUFDQSxTQUFBLENBQUEsR0FBQSxDQUFBLEVBQUEsU0FBQSxFQUFBLElBQUEsRUFBQSxTQUFBLEVBQUEsR0FBQSxFQUFBLENBQUEsQ0FBQTtBQUNBLFFBQUEsQ0FBQSxHQUFBLENBQUEsRUFBQSxTQUFBLEVBQUEsT0FBQSxFQUFBLENBQUEsQ0FBQTtFQUVBLENBQUEsQ0FBQTtBQUNBLFFBQUEsQ0FBQSxLQUFBLENBQUEsWUFBQTtBQUNBLFNBQUEsQ0FBQSxHQUFBLENBQUEsRUFBQSxTQUFBLEVBQUEsR0FBQSxFQUFBLFNBQUEsRUFBQSxJQUFBLEVBQUEsQ0FBQSxDQUFBO0FBQ0EsUUFBQSxDQUFBLEdBQUEsQ0FBQSxFQUFBLFNBQUEsRUFBQSxNQUFBLEVBQUEsQ0FBQSxDQUFBO0VBQ0EsQ0FBQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLENBbUtBLENBQUEsQ0FBQTs7QUMvTEEsR0FBQSxDQUFBLE1BQUEsQ0FBQSxVQUFBLGNBQUEsRUFBQTtBQUNBLGVBQUEsQ0FDQSxLQUFBLENBQUEsTUFBQSxFQUFBO0FBQ0EsS0FBQSxFQUFBLEdBQUE7QUFDQSxhQUFBLEVBQUEsNkJBQUE7QUFDQSxZQUFBLEVBQUEsVUFBQTtFQUNBLENBQUE7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQSxDQWdCQSxDQUFBLENBQUE7O0FBRUEsR0FBQSxDQUFBLFNBQUEsQ0FBQSxNQUFBLEVBQUEsWUFBQTtBQUNBLFFBQUE7QUFDQSxVQUFBLEVBQUEsR0FBQTtBQUNBLGFBQUEsRUFBQSx5QkFBQTtFQUNBLENBQUE7Q0FDQSxDQUFBLENBQUE7QUFDQSxHQUFBLENBQUEsU0FBQSxDQUFBLFVBQUEsRUFBQSxZQUFBO0FBQ0EsUUFBQTtBQUNBLFVBQUEsRUFBQSxHQUFBO0FBQ0EsYUFBQSxFQUFBLDZCQUFBO0VBQ0EsQ0FBQTtDQUNBLENBQUEsQ0FBQTtBQUNBLEdBQUEsQ0FBQSxTQUFBLENBQUEsT0FBQSxFQUFBLFlBQUE7QUFDQSxRQUFBO0FBQ0EsVUFBQSxFQUFBLEdBQUE7QUFDQSxhQUFBLEVBQUEsMEJBQUE7RUFDQSxDQUFBO0NBQ0EsQ0FBQSxDQUFBO0FBQ0EsR0FBQSxDQUFBLFNBQUEsQ0FBQSxTQUFBLEVBQUEsWUFBQTtBQUNBLFFBQUE7QUFDQSxVQUFBLEVBQUEsR0FBQTtBQUNBLGFBQUEsRUFBQSw0QkFBQTtFQUNBLENBQUE7Q0FDQSxDQUFBLENBQUE7O0FBRUEsR0FBQSxDQUFBLFVBQUEsQ0FBQSxVQUFBLEVBQUEsWUFBQTtBQUNBLEVBQUEsQ0FBQSxNQUFBLENBQUEsQ0FBQSxJQUFBLENBQUEsWUFBQTtBQUNBLE1BQUEsU0FBQSxHQUFBLENBQUEsQ0FBQTtBQUNBLE1BQUEsUUFBQSxHQUFBLENBQUEsQ0FBQSxXQUFBLENBQUEsQ0FBQTtBQUNBLE1BQUEsT0FBQSxHQUFBLFFBQUEsQ0FBQTtBQUNBLE1BQUEsSUFBQSxDQUFBO0FBQ0EsTUFBQSxTQUFBLEdBQUEsQ0FBQSxDQUFBLE1BQUEsQ0FBQSxDQUFBO0FBQ0EsTUFBQSxRQUFBLENBQUE7QUFDQSxNQUFBLElBQUEsR0FBQSxDQUFBLENBQUEsbUJBQUEsQ0FBQSxDQUFBO0FBQ0EsTUFBQSxZQUFBLEdBQUEsQ0FBQSxDQUFBLGNBQUEsQ0FBQSxDQUFBO0FBQ0EsTUFBQSxNQUFBLEdBQUEsQ0FBQSxDQUFBLGVBQUEsQ0FBQSxDQUFBOztBQUVBLE1BQUEsU0FBQSxDQUFBLEtBQUEsRUFBQSxHQUFBLEdBQUEsRUFBQTtBQUNBLFdBQUEsR0FBQSxXQUFBLENBQUEsTUFBQSxFQUFBLElBQUEsQ0FBQSxDQUFBO0dBQ0EsTUFBQTtBQUNBLE9BQUEsS0FBQSxDQUFBO0FBQ0EsZUFBQSxDQUFBLEdBQUEsQ0FBQSxFQUFBLFNBQUEsRUFBQSxPQUFBLEVBQUEsQ0FBQSxDQUFBO0FBQ0EsT0FBQSxDQUFBLElBQUEsQ0FBQSxVQUFBLEtBQUEsRUFBQTtBQUNBLFNBQUEsR0FBQSxDQUFBLEtBQUEsR0FBQSxDQUFBLENBQUEsR0FBQSxHQUFBLENBQUE7QUFDQSxLQUFBLENBQUEsSUFBQSxDQUFBLENBQUEsR0FBQSxDQUFBLEVBQUEsV0FBQSxFQUFBLGNBQUEsR0FBQSxLQUFBLEdBQUEsR0FBQSxFQUFBLENBQUEsQ0FBQTtJQUNBLENBQUEsQ0FBQTtBQUNBLFNBQUEsQ0FBQSxXQUFBLENBQUEsVUFBQSxDQUFBLENBQUEsV0FBQSxDQUFBLFNBQUEsQ0FBQSxDQUFBO0dBQ0E7Ozs7Ozs7Ozs7QUFBQSxBQVVBLFdBQUEsTUFBQSxHQUFBO0FBQ0EsVUFBQSxDQUFBLEdBQUEsQ0FBQSxVQUFBLEVBQUEsUUFBQSxDQUFBLENBQUE7QUFDQSxZQUFBLEVBQUEsQ0FBQTtBQUNBLFdBQUEsQ0FBQSxHQUFBLENBQUEsRUFBQSxtQkFBQSxFQUFBLFVBQUEsR0FBQSxTQUFBLEdBQUEsQ0FBQSxFQUFBLEdBQUEsTUFBQSxFQUFBLENBQUEsQ0FBQTtBQUNBLFdBQUEsQ0FBQSxJQUFBLENBQUEsWUFBQSxFQUFBLFNBQUEsR0FBQSxDQUFBLEdBQUEsQ0FBQSxDQUFBLENBQUE7QUFDQSxPQUFBLEdBQUEsT0FBQSxDQUFBO0FBQ0EsVUFBQSxHQUFBLE9BQUEsSUFBQSxTQUFBLEdBQUEsQ0FBQSxHQUFBLENBQUEsQ0FBQSxDQUFBO0dBQ0E7RUFDQSxDQUFBLENBQUE7Q0FDQSxDQUFBLENBQUE7O0FDMUZBLEdBQUEsQ0FBQSxVQUFBLENBQUEsYUFBQSxFQUFBLFVBQUEsTUFBQSxFQUFBO0FBQ0EsS0FBQSxTQUFBLEdBQUEsQ0FBQSxDQUFBLE1BQUEsQ0FBQSxDQUFBO0FBQ0EsS0FBQSxRQUFBLEdBQUEsS0FBQSxDQUFBO0FBQ0EsS0FBQSxPQUFBLENBQUE7QUFDQSxVQUFBLGNBQUEsR0FBQTtBQUNBLFVBQUEsR0FBQSxJQUFBLENBQUE7QUFDQSxHQUFBLENBQUEsUUFBQSxDQUFBLENBQUEsS0FBQSxDQUFBLFlBQUE7O0FBRUEsT0FBQSxVQUFBLEdBQUEsQ0FBQSxDQUFBLFdBQUEsQ0FBQSxDQUFBLE1BQUEsQ0FBQTtBQUNBLE9BQUEsUUFBQSxHQUFBLElBQUEsQ0FBQTtBQUNBLE9BQUEsU0FBQSxHQUFBLEtBQUEsQ0FBQTtBQUNBLE9BQUEsUUFBQSxHQUFBLFlBQUE7OztBQUFBLEFBR0EsVUFBQSxHQUFBLFFBQUEsQ0FBQSxNQUFBLENBQUEsUUFBQSxDQUFBLElBQUEsQ0FBQSxLQUFBLENBQUEsSUFBQSxDQUFBLENBQUEsQ0FBQSxDQUFBLENBQUEsR0FBQSxDQUFBLElBQUEsQ0FBQSxDQUFBOztBQUVBLFFBQUEsSUFBQSxDQUFBLEdBQUEsQ0FBQSxFQUFBLENBQUEsSUFBQSxVQUFBLEVBQUEsQ0FBQSxFQUFBLEVBQUE7QUFDQSxRQUFBLENBQUEsR0FBQSxPQUFBLEVBQUE7QUFDQSxNQUFBLENBQUEsUUFBQSxHQUFBLENBQUEsQ0FBQSxDQUFBLFFBQUEsQ0FBQSxRQUFBLENBQUEsQ0FBQSxRQUFBLENBQUEsVUFBQSxDQUFBLENBQUE7S0FDQSxNQUFBLElBQUEsQ0FBQSxLQUFBLE9BQUEsRUFBQTtBQUNBLE1BQUEsQ0FBQSxRQUFBLEdBQUEsQ0FBQSxDQUFBLENBQUEsUUFBQSxDQUFBLFFBQUEsQ0FBQSxDQUFBLFdBQUEsQ0FBQSxVQUFBLENBQUEsQ0FBQTtLQUNBLE1BQUE7QUFDQSxNQUFBLENBQUEsUUFBQSxHQUFBLENBQUEsQ0FBQSxDQUFBLFdBQUEsQ0FBQSxRQUFBLENBQUEsQ0FBQSxXQUFBLENBQUEsVUFBQSxDQUFBLENBQUE7S0FDQTtJQUNBOztBQUVBLFlBQUEsVUFBQSxHQUFBO0FBQ0EsYUFBQSxHQUFBLElBQUEsQ0FBQTs7QUFFQSxLQUFBLENBQUEsUUFBQSxHQUFBLE9BQUEsQ0FBQSxDQUFBLFdBQUEsQ0FBQSxVQUFBLENBQUEsQ0FBQSxRQUFBLENBQUEsUUFBQSxDQUFBOztBQUFBLEFBRUEsY0FBQSxDQUFBLFlBQUE7QUFDQSxjQUFBLEdBQUEsS0FBQSxDQUFBO0tBQ0EsRUFBQSxRQUFBLENBQUEsQ0FBQTtJQUNBOztBQUVBLFlBQUEsVUFBQSxHQUFBO0FBQ0EsUUFBQSxPQUFBLEtBQUEsQ0FBQSxFQUFBLE9BQUE7QUFDQSxXQUFBLEVBQUEsQ0FBQTtBQUNBLEtBQUEsQ0FBQSxRQUFBLElBQUEsT0FBQSxHQUFBLENBQUEsQ0FBQSxDQUFBLENBQUEsV0FBQSxDQUFBLFFBQUEsQ0FBQTs7QUFBQSxBQUVBLGNBQUEsRUFBQSxDQUFBO0lBQ0E7O0FBRUEsWUFBQSxZQUFBLEdBQUE7QUFDQSxRQUFBLE9BQUEsS0FBQSxVQUFBLEVBQUEsT0FBQTtBQUNBLFdBQUEsRUFBQSxDQUFBO0FBQ0EsS0FBQSxDQUFBLFFBQUEsSUFBQSxPQUFBLEdBQUEsQ0FBQSxDQUFBLENBQUEsQ0FBQSxRQUFBLENBQUEsVUFBQSxDQUFBOztBQUFBLEFBRUEsY0FBQSxFQUFBLENBQUE7SUFDQTs7QUFFQSxJQUFBLENBQUEsUUFBQSxDQUFBLENBQUEsR0FBQSxFQUFBOztBQUFBLEFBRUEsSUFBQSxDQUFBLFFBQUEsQ0FBQSxDQUFBLEVBQUEsQ0FBQSwyQkFBQSxFQUFBLFVBQUEsQ0FBQSxFQUFBO0FBQ0EsUUFBQSxTQUFBLEVBQUEsT0FBQTtBQUNBLFFBQUEsQ0FBQSxDQUFBLGFBQUEsQ0FBQSxVQUFBLEdBQUEsQ0FBQSxJQUFBLENBQUEsQ0FBQSxhQUFBLENBQUEsTUFBQSxHQUFBLENBQUEsRUFBQTtBQUNBLGVBQUEsRUFBQSxDQUFBO0tBQ0EsTUFBQTtBQUNBLGlCQUFBLEVBQUEsQ0FBQTtLQUNBO0lBQ0EsQ0FBQSxDQUFBOztBQUVBLElBQUEsQ0FBQSxRQUFBLENBQUEsQ0FBQSxFQUFBLENBQUEsU0FBQSxFQUFBLFVBQUEsQ0FBQSxFQUFBO0FBQ0EsUUFBQSxTQUFBLEVBQUEsT0FBQTtBQUNBLFFBQUEsQ0FBQSxDQUFBLEtBQUEsS0FBQSxFQUFBLEVBQUE7QUFDQSxlQUFBLEVBQUEsQ0FBQTtLQUNBLE1BQUEsSUFBQSxDQUFBLENBQUEsS0FBQSxLQUFBLEVBQUEsRUFBQTtBQUNBLGlCQUFBLEVBQUEsQ0FBQTtLQUNBO0lBQ0EsQ0FBQSxDQUFBO0dBQ0EsQ0FBQSxDQUFBO0VBQ0E7O0FBRUEsS0FBQSxTQUFBLENBQUEsS0FBQSxFQUFBLEdBQUEsR0FBQSxFQUFBO0FBQ0EsU0FBQSxDQUFBLEdBQUEsQ0FBQSxtQkFBQSxDQUFBLENBQUE7QUFDQSxnQkFBQSxFQUFBLENBQUE7RUFDQTs7QUFFQSxVQUFBLENBQUEsTUFBQSxDQUFBLFlBQUE7QUFDQSxNQUFBLFNBQUEsQ0FBQSxLQUFBLEVBQUEsR0FBQSxHQUFBLEVBQUE7OztBQUdBLE9BQUEsQ0FBQSxRQUFBLEVBQUE7QUFDQSxrQkFBQSxFQUFBLENBQUE7SUFDQTtHQUNBO0VBQ0EsQ0FBQSxDQUFBO0NBQ0EsQ0FBQSxDQUFBOztBQ3hGQSxHQUFBLENBQUEsU0FBQSxDQUFBLGdCQUFBLEVBQUEsWUFBQTtBQUNBLFFBQUE7QUFDQSxVQUFBLEVBQUEsR0FBQTtBQUNBLGFBQUEsRUFBQSxxQ0FBQTtFQUNBLENBQUE7Q0FDQSxDQUFBLENBQUEiLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vIHdpbmRvdy5hcHAgPSBhbmd1bGFyLm1vZHVsZSgncG9ydGZvbGlvJywgWyd1aS5yb3V0ZXInLCAnbmdBbmltYXRlJ10pO1xud2luZG93LmFwcCA9IGFuZ3VsYXIubW9kdWxlKCdwb3J0Zm9saW8nLCBbJ3VpLnJvdXRlciddKTtcblxuXG5hcHAuY29uZmlnKGZ1bmN0aW9uICgkdXJsUm91dGVyUHJvdmlkZXIsICRsb2NhdGlvblByb3ZpZGVyLCAkdXJsTWF0Y2hlckZhY3RvcnlQcm92aWRlcikge1xuXG5cdC8vIHRoaXMgbWFrZXMgdGhlICcvc3RvcmVzLycgcm91dGUgY29ycmVjdGx5IHJlZGlyZWN0IHRvICcvc3RvcmVzJ1xuXHQkdXJsUm91dGVyUHJvdmlkZXIucnVsZShmdW5jdGlvbiAoJGluamVjdG9yLCAkbG9jYXRpb24pIHtcblxuXHRcdHZhciByZSA9IC8oLispKFxcLyspKFxcPy4qKT8kLztcblx0XHR2YXIgcGF0aCA9ICRsb2NhdGlvbi51cmwoKTtcblxuXHRcdGlmKHJlLnRlc3QocGF0aCkpIHtcblx0XHRcdHJldHVybiBwYXRoLnJlcGxhY2UocmUsICckMSQzJyk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9KTtcblx0Ly8gVGhpcyB0dXJucyBvZmYgaGFzaGJhbmcgdXJscyAoLyNhYm91dCkgYW5kIGNoYW5nZXMgaXQgdG8gc29tZXRoaW5nIG5vcm1hbCAoL2Fib3V0KVxuXHQkbG9jYXRpb25Qcm92aWRlci5odG1sNU1vZGUodHJ1ZSk7XG5cdCR1cmxSb3V0ZXJQcm92aWRlci53aGVuKCcvYXV0aC86cHJvdmlkZXInLCBmdW5jdGlvbiAoKSB7XG5cdFx0d2luZG93LmxvY2F0aW9uLnJlbG9hZCgpO1xuXHR9KTtcblx0Ly8gSWYgd2UgZ28gdG8gYSBVUkwgdGhhdCB1aS1yb3V0ZXIgZG9lc24ndCBoYXZlIHJlZ2lzdGVyZWQsIGdvIHRvIHRoZSBcIi9cIiB1cmwuXG5cdCR1cmxSb3V0ZXJQcm92aWRlci5vdGhlcndpc2UoJy8nKTtcbn0pO1xuIiwiYXBwLmNvbnRyb2xsZXIoJ2Fib3V0Q3RybCcsIGZ1bmN0aW9uKCRzY29wZSl7XG5cdHZhciB0aGVXaW5kb3cgPSAkKHdpbmRvdyk7XG5cdHZhciBmb3JjZSA9IGQzLmxheW91dC5mb3JjZSgpO1xuXHR2YXIgc3RvcHBlZCA9IHRydWU7XG5cblx0Ly8gYW5ndWxhci5lbGVtZW50KGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpe1xuXHQkc2NvcGUuc2tpbGxzID0gW1xuXHRcdHtuYW1lOiBcIkphdmFTY3JpcHRcIiwgbGV2ZWw6IDN9LFxuXHRcdHtuYW1lOiBcIk1vbmdvREJcIiwgbGV2ZWw6IDN9LFxuXHRcdHtuYW1lOiBcIkV4cHJlc3MuanNcIiwgbGV2ZWw6IDN9LFxuXHRcdHtuYW1lOiBcIkFuZ3VsYXIuanNcIiwgbGV2ZWw6IDN9LFxuXHRcdHtuYW1lOiBcIk5vZGUuanNcIiwgbGV2ZWw6IDN9LFxuXHRcdHtuYW1lOiBcIk1vbmdvb3NlLmpzXCIsIGxldmVsOiAzfSxcblx0XHR7bmFtZTogXCJHaXRcIiwgbGV2ZWw6IDN9LFxuXHRcdHtuYW1lOiBcIkNTUzNcIiwgbGV2ZWw6IDN9LFxuXHRcdHtuYW1lOiBcIkhUTUw1XCIsIGxldmVsOiAzfSxcblx0XHR7bmFtZTogXCJSZXNvbnNpdmUgRGVzaWduXCIsIGxldmVsOiAyfSxcblx0XHR7bmFtZTogXCJHdWxwXCIsIGxldmVsOiAyfSxcblx0XHR7bmFtZTogXCJNb2NoYSAmIENoYWlcIiwgbGV2ZWw6IDJ9LFxuXHRcdHtuYW1lOiBcImpRdWVyeVwiLCBsZXZlbDogMn0sXG5cdFx0e25hbWU6IFwiQm9vdHN0cmFwXCIsIGxldmVsOiAyfSxcblx0XHR7bmFtZTogXCJXZWItQXVkaW9cIiwgbGV2ZWw6IDJ9LFxuXHRcdHtuYW1lOiBcIkNocm9tZSBFeHRlbnNpb25zXCIsIGxldmVsOiAxfSxcblx0XHR7bmFtZTogXCJTUUxcIiwgbGV2ZWw6IDF9LFxuXHRcdHtuYW1lOiBcIldlYlNvY2tldHNcIiwgbGV2ZWw6IDF9LFxuXHRcdHtuYW1lOiBcIk1JRElcIiwgbGV2ZWw6IDF9LFxuXHRcdHtuYW1lOiBcIkphdmFcIiwgbGV2ZWw6IDF9LFxuXHRcdHtuYW1lOiBcIkMrK1wiLCBsZXZlbDogMX0sXG5cdF07XG5cblx0JHNjb3BlLmNvbG9ycyA9IFtcblx0XHQnIzdGRkZENCcsXG5cdFx0JyNFMEZGRkYnLFxuXHRcdCcjMzNDQ0ZGJyxcblx0XHQnI0M2ODhFOCcsXG5cdFx0JyNGRjgwN0QnLFxuXHRcdCcjRkY4RUIyJ1xuXHRdO1xuXG5cdCRzY29wZS5za2lsbHMubWFwKGZ1bmN0aW9uKGUsaSl7XG5cdFx0ZS5jb2xvciA9ICRzY29wZS5jb2xvcnNbaSU2XTtcblx0fSk7XG5cbmZ1bmN0aW9uIGluaXRpYWxpemVTa2lsbHNDbG91ZCgpe1xuXHR2YXIgc2tpbGxzQ2xvdWQgPSAkKFwiI3NraWxscy1jbG91ZFwiKTtcblx0dmFyIHdpZHRoID0gc2tpbGxzQ2xvdWQud2lkdGgoKTtcblx0dmFyIGhlaWdodCA9IHNraWxsc0Nsb3VkLmhlaWdodCgpO1xuXHR2YXIgc3ZnID0gZDMuc2VsZWN0KFwiI3NraWxscy1jbG91ZFwiKS5hcHBlbmQoXCJzdmdcIik7XG5cblxuXHQvL2NyZWF0ZSBub2Rlc1xuXHR2YXIgbm9kZXMgPSBkMy5yYW5nZSgkc2NvcGUuc2tpbGxzLmxlbmd0aCkubWFwKGZ1bmN0aW9uKGkpIHtcblx0XHRyZXR1cm4ge1xuXHRcdFx0cmFkaXVzOiAkc2NvcGUuc2tpbGxzW2ldLmxldmVsKjE4ICsxNCxcblx0XHRcdGxhYmVsOiAkc2NvcGUuc2tpbGxzW2ldLm5hbWUsXG5cdFx0XHRza2lsbExldmVsOiAkc2NvcGUuc2tpbGxzW2ldLmxldmVsLFxuXHRcdFx0YmdDb2xvcjogJHNjb3BlLnNraWxsc1tpXS5jb2xvclxuXHRcdH07XG5cdH0pO1xuXG5cdHZhclx0cm9vdCA9IG5vZGVzWzBdO1xuXHRcdHJvb3QucmFkaXVzID0gMDtcblx0XHRyb290LmZpeGVkID0gdHJ1ZTtcblxuXHR2YXIgZ3JvdXBzID0gc3ZnLnNlbGVjdEFsbChcImdcIilcblx0XHQuZGF0YShub2Rlcy5zbGljZSgxKSlcblx0XHQuZW50ZXIoKVxuXHRcdC5hcHBlbmQoXCJnXCIpO1xuXG5cdHZhciBjaXJjbGVzID0gZ3JvdXBzLmFwcGVuZCgnY2lyY2xlJylcblx0XHQuZGF0YShub2Rlcy5zbGljZSgxKSlcblx0XHQuYXR0cihcInJcIiwgZnVuY3Rpb24oZCkgeyByZXR1cm4gZC5yYWRpdXM7IH0pXG5cdFx0LnN0eWxlKFwiZmlsbFwiLCBmdW5jdGlvbihkLCBpKSB7IHJldHVybiBkLmJnQ29sb3I7IH0pO1xuXG5cdHZhciBsYWJlbCA9IGdyb3Vwcy5hcHBlbmQoXCJ0ZXh0XCIpXG5cdFx0LnRleHQoZnVuY3Rpb24oZCl7IHJldHVybiBkLmxhYmVsOyB9KVxuXHRcdC5hdHRyKHtcblx0XHRcdFwiYWxpZ25tZW50LWJhc2VsaW5lXCI6IFwibWlkZGxlXCIsXG5cdFx0XHRcInRleHQtYW5jaG9yXCI6IFwibWlkZGxlXCIsXG5cdFx0fSk7XG5cblxuXHRmb3JjZS5ncmF2aXR5KDAuMDUpXG5cdC5jaGFyZ2UoZnVuY3Rpb24oZCwgaSkgeyByZXR1cm4gaSA/IDAgOiAtMzAwMDsgfSlcblx0Lm5vZGVzKG5vZGVzKTtcblxuXG5cdGlmIChuYXZpZ2F0b3IudXNlckFnZW50LnNwbGl0KFwiQ2hyb21lXCIpLmxlbmd0aCA8IDIpIHtcblx0XHRmb3JjZS5zaXplKFt3aWR0aC0xMDAsIGhlaWdodCs2MDBdKTsgLy9zYWZhcmlcblx0fSBlbHNlIHtcblx0XHRmb3JjZS5zaXplKFt3aWR0aC0yMDAsIGhlaWdodC0zMDBdKTsgLy9jaHJvbWVcblx0fVxuXG5cblx0Zm9yY2Uuc3RhcnQoKTtcblx0c3RvcHBlZCA9IGZhbHNlO1xuXG5cdGZvcmNlLm9uKFwidGlja1wiLCBmdW5jdGlvbihlKSB7XG5cdFx0dmFyIHEgPSBkMy5nZW9tLnF1YWR0cmVlKG5vZGVzKSxcblx0XHRcdGkgPSAwLFxuXHRcdFx0biA9IG5vZGVzLmxlbmd0aDtcblxuXHRcdHdoaWxlICgrK2kgPCBuKSBxLnZpc2l0KGNvbGxpZGUobm9kZXNbaV0pKTtcblxuXHRcdC8vbW92ZSBjaXJjbGVzXG5cdFx0c3ZnLnNlbGVjdEFsbChcImNpcmNsZVwiKVxuXHRcdFx0LmF0dHIoXCJjeFwiLCBmdW5jdGlvbihkKSB7IHJldHVybiBkLng7IH0pXG5cdFx0XHQuYXR0cihcImN5XCIsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGQueTsgfSk7XG5cblx0XHQvL21vdmUgbGFiZWxzXG5cdFx0c3ZnLnNlbGVjdEFsbChcInRleHRcIilcblx0XHRcdC5hdHRyKFwieFwiLCBmdW5jdGlvbihkKSB7IHJldHVybiBkLng7IH0pXG5cdFx0XHQuYXR0cihcInlcIiwgZnVuY3Rpb24oZCkgeyByZXR1cm4gZC55OyB9KTtcblx0fSk7XG5cblx0c3ZnLm9uKFwibW91c2Vtb3ZlXCIsIGZ1bmN0aW9uKCkge1xuXHRcdHZhciBwMSA9IGQzLm1vdXNlKHRoaXMpO1xuXHRcdHJvb3QucHggPSBwMVswXTtcblx0XHRyb290LnB5ID0gcDFbMV07XG5cdFx0Zm9yY2UucmVzdW1lKCk7XG5cdH0pO1xuXG4vL1NvIHRoZXkgZG9uJ3QgYWxsIHN0YXJ0IG91dCBpbiBhIHN0cmFpZ2h0IGxpbmVcblx0cm9vdC5weCA9IDE7XG5cdHJvb3QucHkgPSAxO1xuXG5cblx0ZnVuY3Rpb24gY29sbGlkZShub2RlKSB7XG5cdFx0dmFyIHIgPSBub2RlLnJhZGl1cyArIDE2LFxuXHRcdFx0bngxID0gbm9kZS54IC0gcixcblx0XHRcdG54MiA9IG5vZGUueCArIHIsXG5cdFx0XHRueTEgPSBub2RlLnkgLSByLFxuXHRcdFx0bnkyID0gbm9kZS55ICsgcjtcblx0XHRyZXR1cm4gZnVuY3Rpb24ocXVhZCwgeDEsIHkxLCB4MiwgeTIpIHtcblx0XHRcdGlmIChxdWFkLnBvaW50ICYmIChxdWFkLnBvaW50ICE9PSBub2RlKSkge1xuXHRcdFx0XHR2YXIgeCA9IG5vZGUueCAtIHF1YWQucG9pbnQueCxcblx0XHRcdFx0XHR5ID0gbm9kZS55IC0gcXVhZC5wb2ludC55LFxuXHRcdFx0XHRcdGwgPSBNYXRoLnNxcnQoeCAqIHggKyB5ICogeSksXG5cdFx0XHRcdFx0ciA9IG5vZGUucmFkaXVzICsgcXVhZC5wb2ludC5yYWRpdXM7XG5cblx0XHRcdFx0aWYgKGwgPCByKSB7XG5cdFx0XHRcdFx0bCA9IChsIC0gcikgLyBsICogMC41O1xuXHRcdFx0XHRcdG5vZGUueCAtPSB4ICo9IGw7XG5cdFx0XHRcdFx0bm9kZS55IC09IHkgKj0gbDtcblx0XHRcdFx0XHRxdWFkLnBvaW50LnggKz0geDtcblx0XHRcdFx0XHRxdWFkLnBvaW50LnkgKz0geTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIHgxID4gbngyIHx8IHgyIDwgbngxIHx8IHkxID4gbnkyIHx8IHkyIDwgbnkxO1xuXHRcdH07XG5cdH1cbn1cblx0Ly8gfSk7XG5cblx0dmFyIGZpcmVmb3g7XG5cdGlmIChuYXZpZ2F0b3IudXNlckFnZW50LnNwbGl0KFwiU2FmYXJpXCIpLmxlbmd0aCA8IDIgJiYgbmF2aWdhdG9yLnVzZXJBZ2VudC5zcGxpdChcIkNocm9tZVwiKS5sZW5ndGggPCAyKXtcblx0XHRmaXJlZm94ID0gdHJ1ZTtcblx0fVxuXG5cdGlmIChmaXJlZm94KXtcblx0XHQkKCcjc2tpbGxzLWNsb3VkJykuY3NzKHsnZGlzcGxheSc6J25vbmUnfSk7XG5cdFx0JCgnI3NraWxscy1tb2JpbGUnKS5jc3MoeydkaXNwbGF5JzogJ2Jsb2NrJywgJ21hcmdpbi10b3AnOiAnMjRweCcgLCdtYXJnaW4tYm90dG9tJzogJzQ0cHgnLCdoZWlnaHQnOiAnNzAwcHgnfSk7XG5cblx0XHRzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG5cdFx0XHQkKCcuc2tpbGwtY2lyY2xlJykuY3NzKHsncGFkZGluZyc6ICcxcHgnLCdwYWRkaW5nLXJpZ2h0JzogJzMyJScsICdmb250LWZhbWlseSc6ICdPeHlnZW4nLCAnZm9udC1zaXplJzogJzE5cHgnLCAnZm9udC13ZWlnaHQnOiczMDAnLCAnZmxvYXQnOidyaWdodCd9KTtcblx0XHR9LDUwMCk7XG5cdH1cblxuXHRpZiAodGhlV2luZG93LndpZHRoKCkgPiAxMDc0ICYmICFmaXJlZm94KSB7XG5cdFx0aW5pdGlhbGl6ZVNraWxsc0Nsb3VkKCk7XG5cdH1cblxuXHR0aGVXaW5kb3cucmVzaXplKGZ1bmN0aW9uKCkge1xuXHRcdGlmICh0aGVXaW5kb3cud2lkdGgoKSA+IDEwNzQgJiYgIWZpcmVmb3gpIHtcblx0XHRcdCQoJ2h0bWwsYm9keScpLnNjcm9sbFRvcCgwKTtcblx0XHRcdC8vc3RhcnQgLyByZXN0YXJ0IG1vdXNlb3ZlciBsaXN0ZW5lciBpZiBzdG9wcGVkXG5cdFx0XHRpZiAoc3RvcHBlZCkge1xuXHRcdFx0XHRpbml0aWFsaXplU2tpbGxzQ2xvdWQoKTtcblx0XHRcdH1cblx0XHR9IGVsc2Uge1xuXHRcdFx0Zm9yY2Uuc3RvcCgpO1xuXHRcdH1cblx0fSk7XG59KTtcbiIsImFwcC5jb250cm9sbGVyKCdjb250YWN0Q3RybCcsIGZ1bmN0aW9uKCRzY29wZSwgJGh0dHApe1xuXHQkc2NvcGUuZm9ybURhdGEgPSB7fTtcblxuXHQkc2NvcGUuc2VuZE1haWwgPSBmdW5jdGlvbigpe1xuXHRcdCRzY29wZS53YWl0aW5nID0gdHJ1ZTtcblx0XHQkc2NvcGUuc2VudCA9IGZhbHNlO1xuXHRcdCRzY29wZS5zdWNjZXNzID0gZmFsc2U7XG5cdFx0JGh0dHAucG9zdCgnL2FwaS9jb250YWN0JywgJHNjb3BlLmZvcm1EYXRhKVxuXHRcdC50aGVuKGZ1bmN0aW9uKHN1Y2Nlc3NSZXNwb25zZSl7XG5cdFx0XHQkc2NvcGUud2FpdGluZyA9IGZhbHNlO1xuXHRcdFx0JHNjb3BlLnNlbnQgPSB0cnVlO1xuXHRcdFx0JHNjb3BlLnN1Y2Nlc3MgPSBzdWNjZXNzUmVzcG9uc2UuZGF0YTtcblx0XHRcdCRzY29wZS5mb3JtRGF0YSA9IHt9O1xuXHRcdH0pO1xuXHR9O1xuXG5cdHZhciByZXN1bWVMYWJlbCA9ICQoJyNyZXN1bWUnKTtcblx0dmFyIG92ZXJsYXkgPSAkKCcjb3ZlcmxheScpO1xuXHR2YXIgcmVzdW1lID0gJCgnI3Jlc3VtZS1jb250YWluZXInKTtcblxuXHRyZXN1bWVMYWJlbC5jbGljayhmdW5jdGlvbigpe1xuXHRcdG92ZXJsYXkuY3NzKHsnb3BhY2l0eSc6ICcuNycsICd6LWluZGV4JzogJzEnfSk7XG5cdFx0cmVzdW1lLmNzcyh7J2Rpc3BsYXknOiAnYmxvY2snfSk7XG5cblx0fSk7XG5cdG92ZXJsYXkuY2xpY2soZnVuY3Rpb24oKXtcblx0XHRvdmVybGF5LmNzcyh7J29wYWNpdHknOiAnMCcsICd6LWluZGV4JzogJy0xJ30pO1xuXHRcdHJlc3VtZS5jc3MoeydkaXNwbGF5JzogJ25vbmUnfSk7XG5cdH0pO1xuXG5cdC8vIGZ1bmN0aW9uIGV4cGxvZGUoKSB7XG5cdC8vXG5cdC8vIFx0JCgnI2NhbnZhcycpLmNzcyh7J2Rpc3BsYXknIDogJ2luaXRpYWwnfSk7XG5cdC8vXG5cdC8vIFx0dmFyIHJlcXVlc3RJZDtcblx0Ly9cblx0Ly8gXHR2YXIgY2FudmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjYW52YXNcIiksXG5cdC8vIFx0XHRjb250ZXh0ID0gY2FudmFzLmdldENvbnRleHQoXCIyZFwiKSxcblx0Ly8gXHRcdHdpZHRoID0gY2FudmFzLndpZHRoID0gd2luZG93LmlubmVyV2lkdGgsXG5cdC8vIFx0XHRoZWlnaHQgPSBjYW52YXMuaGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0LFxuXHQvLyBcdFx0cGFydGljbGUgPSBbXSxcblx0Ly8gXHRcdHBhcnRpY2xlQ291bnQgPSAwLFxuXHQvLyBcdFx0Z3Jhdml0eSA9IDAuMyxcblx0Ly8gXHRcdGNvbG9ycyA9IFsnIzdGRkZENCcsJyNFMEZGRkYnLCcjMzNDQ0ZGJywnI0M2ODhFOCcsJyNGRjgwN0QnLCcjRkY4RUIyJ107XG5cdC8vXG5cdC8vIFx0Zm9yKCB2YXIgaSA9IDA7IGkgPCA1MDsgaSsrKXtcblx0Ly8gXHRcdHBhcnRpY2xlLnB1c2goe1xuXHQvLyBcdFx0XHR4IDogd2lkdGgvMixcblx0Ly8gXHRcdFx0eSA6IGhlaWdodC8yLFxuXHQvLyBcdFx0XHRib3hXIDogcmFuZG9tUmFuZ2UoNSwyMCksXG5cdC8vIFx0XHRcdGJveEggOiByYW5kb21SYW5nZSg1LDIwKSxcblx0Ly8gXHRcdFx0c2l6ZSA6IHJhbmRvbVJhbmdlKDIsOCksXG5cdC8vXG5cdC8vIFx0XHRcdHNwaWtlcmFuOnJhbmRvbVJhbmdlKDMsNSksXG5cdC8vXG5cdC8vIFx0XHRcdHZlbFggOnJhbmRvbVJhbmdlKC04LDgpLFxuXHQvLyBcdFx0XHR2ZWxZIDpyYW5kb21SYW5nZSgtNTAsLTEwKSxcblx0Ly9cblx0Ly8gXHRcdFx0YW5nbGUgOmNvbnZlcnRUb1JhZGlhbnMocmFuZG9tUmFuZ2UoMCwzNjApKSxcblx0Ly8gXHRcdFx0Y29sb3I6Y29sb3JzW01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGNvbG9ycy5sZW5ndGgpXSxcblx0Ly8gXHRcdFx0YW5nbGVzcGluOnJhbmRvbVJhbmdlKC0wLjIsMC4yKSxcblx0Ly9cblx0Ly8gXHRcdFx0ZHJhdyA6IGRyYXdcblx0Ly8gXHRcdH0pO1xuXHQvLyBcdH1cblx0Ly9cblx0Ly8gXHR2YXIgcjE9e1xuXHQvLyBcdFx0eDp3aWR0aC8yLTE1MCxcblx0Ly8gXHRcdHk6aGVpZ2h0LzItMTUwLFxuXHQvLyBcdFx0d2lkdGg6MzAwLFxuXHQvLyBcdFx0aGVpZ2h0OjMwMCxcblx0Ly8gXHRcdHZlbFggOjAsXG5cdC8vIFx0XHR2ZWxZIDotMTAsXG5cdC8vIFx0XHRhbHBoYXRvcDowXG5cdC8vIFx0fTtcblx0Ly9cblx0Ly9cblx0Ly8gXHRmdW5jdGlvbiBkcmF3U2NyZWVuKCl7XG5cdC8vIFx0XHR2YXIgc2l6ZSA9IDUwO1xuXHQvLyBcdFx0aWYgKHIxLmFscGhhdG9wIDwgMSl7XG5cdC8vIFx0XHRcdHIxLmFscGhhdG9wICs9IDAuMDE7XG5cdC8vIFx0XHR9IGVsc2V7XG5cdC8vIFx0XHRcdHIxLmFscGhhdG9wID0gMTtcblx0Ly8gXHRcdH1cblx0Ly8gXHRcdGNvbnRleHQuZ2xvYmFsQWxwaGEgPSByMS5hbHBoYXRvcDtcblx0Ly9cblx0Ly8gXHRcdGlmKHIxLmFscGhhdG9wID09PSAxKXtcblx0Ly8gXHRcdFx0cjEudmVsWSo9IDAuOTk5O1xuXHQvLyBcdFx0XHRyMS52ZWxZICs9IDAuMztcblx0Ly8gXHRcdFx0cjEueCArPSByMS52ZWxYO1xuXHQvLyBcdFx0XHRyMS55ICs9IHIxLnZlbFk7XG5cdC8vIFx0XHR9XG5cdC8vXG5cdC8vIFx0XHRpZihyMS55ICsgcjEuaGVpZ2h0ID4gaGVpZ2h0KXtcblx0Ly8gXHRcdFx0cjEuYW5nbGVzcGluID0gMDtcblx0Ly8gXHRcdFx0cjEueSA9IGhlaWdodCAtIHIxLmhlaWdodDtcblx0Ly8gXHRcdFx0cjEudmVsWSAqPSAtMC44O1xuXHQvLyBcdFx0XHRyMS52ZWxYICo9IDAuOTtcblx0Ly8gXHRcdH1cblx0Ly9cblx0Ly8gXHRcdGNvbnRleHQuZ2xvYmFsQWxwaGEgPSAxO1xuXHQvL1xuXHQvLyBcdFx0Zm9yKCB2YXIgaSA9IDA7IGkgPCBwYXJ0aWNsZS5sZW5ndGg7IGkrKyl7XG5cdC8vIFx0XHRcdHBhcnRpY2xlW2ldLmRyYXcoKTtcblx0Ly8gXHRcdH1cblx0Ly8gXHR9XG5cdC8vXG5cdC8vIFx0ZnVuY3Rpb24gdXBkYXRlKCl7XG5cdC8vIFx0XHRjb250ZXh0LmNsZWFyUmVjdCgwLDAsd2lkdGgsaGVpZ2h0KTtcblx0Ly8gXHRcdGRyYXdTY3JlZW4oKTtcblx0Ly8gXHRcdHJlcXVlc3RJZCA9IHJlcXVlc3RBbmltYXRpb25GcmFtZSh1cGRhdGUpO1xuXHQvLyBcdH1cblx0Ly9cblx0Ly8gXHR1cGRhdGUoKTtcblx0Ly9cblx0Ly8gXHRzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG5cdC8vIFx0XHR3aW5kb3cuY2FuY2VsQW5pbWF0aW9uRnJhbWUocmVxdWVzdElkKTtcblx0Ly8gXHRcdHJlcXVlc3RJZCA9IHVuZGVmaW5lZDtcblx0Ly8gXHR9LDUwMDApO1xuXHQvL1xuXHQvLyBcdGZ1bmN0aW9uIHJhbmRvbVJhbmdlKG1pbiwgbWF4KXtcblx0Ly8gXHRcdHJldHVybiBtaW4gKyBNYXRoLnJhbmRvbSgpICogKG1heCAtIG1pbiApO1xuXHQvLyBcdH1cblx0Ly9cblx0Ly8gXHRmdW5jdGlvbiByYW5kb21JbnQobWluLCBtYXgpe1xuXHQvLyBcdFx0cmV0dXJuIE1hdGguZmxvb3IobWluICsgTWF0aC5yYW5kb20oKSogKG1heCAtIG1pbiArIDEpKTtcblx0Ly8gXHR9XG5cdC8vXG5cdC8vIFx0ZnVuY3Rpb24gY29udmVydFRvUmFkaWFucyhkZWdyZWUpIHtcblx0Ly8gXHRcdHJldHVybiBkZWdyZWUqKE1hdGguUEkvMTgwKTtcblx0Ly8gXHR9XG5cdC8vXG5cdC8vIFx0ZnVuY3Rpb24gZHJhd1N0YXIoY3gsIGN5LCBzcGlrZXMsIG91dGVyUmFkaXVzLCBpbm5lclJhZGl1cyxjb2xvcikge1xuXHQvLyBcdFx0dmFyIHJvdCA9IE1hdGguUEkgLyAyICogMztcblx0Ly8gXHRcdHZhciB4ID0gY3g7XG5cdC8vIFx0XHR2YXIgeSA9IGN5O1xuXHQvLyBcdFx0dmFyIHN0ZXAgPSBNYXRoLlBJIC8gc3Bpa2VzO1xuXHQvL1xuXHQvLyBcdFx0Y29udGV4dC5zdHJva2VTeWxlID0gXCIjMDAwXCI7XG5cdC8vIFx0XHRjb250ZXh0LmJlZ2luUGF0aCgpO1xuXHQvLyBcdFx0Y29udGV4dC5tb3ZlVG8oY3gsIGN5IC0gb3V0ZXJSYWRpdXMpO1xuXHQvLyBcdFx0Zm9yIChpID0gMDsgaSA8IHNwaWtlczsgaSsrKSB7XG5cdC8vIFx0XHRcdHggPSBjeCArIE1hdGguY29zKHJvdCkgKiBvdXRlclJhZGl1cztcblx0Ly8gXHRcdFx0eSA9IGN5ICsgTWF0aC5zaW4ocm90KSAqIG91dGVyUmFkaXVzO1xuXHQvLyBcdFx0XHRjb250ZXh0LmxpbmVUbyh4LCB5KTtcblx0Ly8gXHRcdFx0cm90ICs9IHN0ZXA7XG5cdC8vXG5cdC8vIFx0XHRcdHggPSBjeCArIE1hdGguY29zKHJvdCkgKiBpbm5lclJhZGl1cztcblx0Ly8gXHRcdFx0eSA9IGN5ICsgTWF0aC5zaW4ocm90KSAqIGlubmVyUmFkaXVzO1xuXHQvLyBcdFx0XHRjb250ZXh0LmxpbmVUbyh4LCB5KTtcblx0Ly8gXHRcdFx0cm90ICs9IHN0ZXA7XG5cdC8vIFx0XHR9XG5cdC8vXG5cdC8vIFx0XHRjb250ZXh0LmxpbmVUbyhjeCwgY3kgLSBvdXRlclJhZGl1cyk7XG5cdC8vIFx0XHRjb250ZXh0LmNsb3NlUGF0aCgpO1xuXHQvLyBcdFx0Y29udGV4dC5maWxsU3R5bGU9Y29sb3I7XG5cdC8vIFx0XHRjb250ZXh0LmZpbGwoKTtcblx0Ly8gXHR9XG5cdC8vXG5cdC8vIFx0ZnVuY3Rpb24gZHJhdygpe1xuXHQvLyBcdFx0Y29udGV4dC5zYXZlKCk7XG5cdC8vIFx0XHRjb250ZXh0LnRyYW5zbGF0ZSh0aGlzLngsdGhpcy55KTtcblx0Ly8gXHRcdGNvbnRleHQucm90YXRlKHRoaXMuYW5nbGUpO1xuXHQvLyBcdFx0Y29udGV4dC5maWxsU3R5bGU9dGhpcy5jb2xvcjtcblx0Ly8gXHRcdGNvbnRleHQuYmVnaW5QYXRoKCk7XG5cdC8vIFx0XHQvLyBkcmF3U3RhcigwLCAwLCA1LCB0aGlzLmJveFcsIHRoaXMuYm94SCk7XG5cdC8vIFx0XHRjb250ZXh0LmZpbGxSZWN0KHRoaXMuYm94Vy8yKi0xLHRoaXMuYm94SC8yKi0xLHRoaXMuYm94Vyx0aGlzLmJveEgpO1xuXHQvLyBcdFx0Y29udGV4dC5maWxsKCk7XG5cdC8vIFx0XHRjb250ZXh0LmNsb3NlUGF0aCgpO1xuXHQvLyBcdFx0Y29udGV4dC5yZXN0b3JlKCk7XG5cdC8vIFx0XHR0aGlzLmFuZ2xlICs9IHRoaXMuYW5nbGVzcGluO1xuXHQvLyBcdFx0dGhpcy52ZWxZKj0gMC45OTk7XG5cdC8vIFx0XHR0aGlzLnZlbFkgKz0gMC4zO1xuXHQvLyBcdFx0dGhpcy54ICs9IHRoaXMudmVsWDtcblx0Ly8gXHRcdHRoaXMueSArPSB0aGlzLnZlbFk7XG5cdC8vXG5cdC8vIFx0XHRpZih0aGlzLnkgPCAwKXtcblx0Ly8gXHRcdFx0dGhpcy52ZWxZICo9IC0wLjI7XG5cdC8vIFx0XHRcdHRoaXMudmVsWCAqPSAwLjk7XG5cdC8vIFx0XHR9XG5cdC8vIFx0XHRpZiAodGhpcy55ID4gaGVpZ2h0KXtcblx0Ly8gXHRcdFx0dGhpcy5hbmdsZXNwaW4gPSAwO1xuXHQvLyBcdFx0XHR0aGlzLnkgPSBoZWlnaHQ7XG5cdC8vIFx0XHRcdHRoaXMudmVsWSAqPSAtMC4yO1xuXHQvLyBcdFx0XHR0aGlzLnZlbFggKj0gMC45O1xuXHQvLyBcdFx0fVxuXHQvLyBcdFx0aWYgKHRoaXMueCA+IHdpZHRoIHx8dGhpcy54PCAwKXtcblx0Ly8gXHRcdFx0dGhpcy52ZWxYICo9IC0wLjU7XG5cdC8vIFx0XHR9XG5cdC8vIFx0fVxuXHQvLyB9XG59KTtcbiIsImFwcC5jb25maWcoZnVuY3Rpb24oJHN0YXRlUHJvdmlkZXIpe1xuXHQkc3RhdGVQcm92aWRlclxuXHQuc3RhdGUoJ2hvbWUnLCB7XG5cdFx0dXJsOiAnLycsXG5cdFx0dGVtcGxhdGVVcmw6ICcvanMvdGVtcGxhdGVzL25ldy1ob21lLmh0bWwnLFxuXHRcdGNvbnRyb2xsZXI6ICdob21lQ3RybCdcblx0fSk7XG5cdC8vIC5zdGF0ZSgncHJvamVjdHMnLCB7XG5cdC8vIFx0dXJsOiAnL3Byb2plY3RzJyxcblx0Ly8gXHR0ZW1wbGF0ZVVybDogJy9qcy90ZW1wbGF0ZXMvcHJvamVjdHMuaHRtbCcsXG5cdC8vIFx0Y29udHJvbGxlcjogJ3Byb2plY3RDdHJsJ1xuXHQvLyB9KVxuXHQvLyAuc3RhdGUoJ2Fib3V0Jywge1xuXHQvLyBcdHVybDogJy9hYm91dCcsXG5cdC8vIFx0dGVtcGxhdGVVcmw6ICcvanMvdGVtcGxhdGVzL2Fib3V0Lmh0bWwnLFxuXHQvLyBcdGNvbnRyb2xsZXI6ICdhYm91dEN0cmwnXG5cdC8vIH0pXG5cdC8vIC5zdGF0ZSgnY29udGFjdCcsIHtcblx0Ly8gXHR1cmw6ICcvY29udGFjdCcsXG5cdC8vIFx0dGVtcGxhdGVVcmw6ICcvanMvdGVtcGxhdGVzL2NvbnRhY3QuaHRtbCcsXG5cdC8vIFx0Y29udHJvbGxlcjogJ2NvbnRhY3RDdHJsJ1xuXHQvLyB9KTtcbn0pO1xuXG5hcHAuZGlyZWN0aXZlKCdob21lJywgZnVuY3Rpb24oKXtcblx0cmV0dXJuIHtcblx0XHRyZXN0cmljdDogXCJFXCIsXG5cdFx0dGVtcGxhdGVVcmw6ICcvanMvdGVtcGxhdGVzL2hvbWUuaHRtbCdcblx0fTtcbn0pO1xuYXBwLmRpcmVjdGl2ZSgncHJvamVjdHMnLCBmdW5jdGlvbigpe1xuXHRyZXR1cm4ge1xuXHRcdHJlc3RyaWN0OiBcIkVcIixcblx0XHR0ZW1wbGF0ZVVybDogJy9qcy90ZW1wbGF0ZXMvcHJvamVjdHMuaHRtbCdcblx0fTtcbn0pO1xuYXBwLmRpcmVjdGl2ZSgnYWJvdXQnLCBmdW5jdGlvbigpe1xuXHRyZXR1cm4ge1xuXHRcdHJlc3RyaWN0OiBcIkVcIixcblx0XHR0ZW1wbGF0ZVVybDogJy9qcy90ZW1wbGF0ZXMvYWJvdXQuaHRtbCdcblx0fTtcbn0pO1xuYXBwLmRpcmVjdGl2ZSgnY29udGFjdCcsIGZ1bmN0aW9uKCl7XG5cdHJldHVybiB7XG5cdFx0cmVzdHJpY3Q6IFwiRVwiLFxuXHRcdHRlbXBsYXRlVXJsOiAnL2pzL3RlbXBsYXRlcy9jb250YWN0Lmh0bWwnXG5cdH07XG59KTtcblxuYXBwLmNvbnRyb2xsZXIoJ2hvbWVDdHJsJywgZnVuY3Rpb24oKXtcblx0JCh3aW5kb3cpLmxvYWQoZnVuY3Rpb24oKXtcblx0XHR2YXIgaW5jcmVtZW50ID0gMDtcblx0XHR2YXIgY2Fyb3VzZWwgPSAkKCcjY2Fyb3VzZWwnKTtcblx0XHR2YXIgY3VycmVudCA9ICcjZmlnLTEnO1xuXHRcdHZhciBwcmV2O1xuXHRcdHZhciB0aGVXaW5kb3cgPSAkKHdpbmRvdyk7XG5cdFx0dmFyIGludGVydmFsO1xuXHRcdHZhciBiYXJzID0gJCgnI3N0YXRpYy1iYXJzID4gbGknKTtcblx0XHR2YXIgYmFyQ29udGFpbmVyID0gJCgnI3N0YXRpYy1iYXJzJyk7XG5cdFx0dmFyIGhlYWRlciA9ICQoJy5tYWluLWhlYWRpbmcnKTtcblxuXHRcdGlmICh0aGVXaW5kb3cud2lkdGgoKSA+IDc2OCkge1xuXHRcdFx0aW50ZXJ2YWwgPSBzZXRJbnRlcnZhbChyb3RhdGUsMTUwMCk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHZhciBzcGVlZDtcblx0XHRcdGJhckNvbnRhaW5lci5jc3MoeydkaXNwbGF5JzogJ2Jsb2NrJ30pO1xuXHRcdFx0YmFycy5lYWNoKGZ1bmN0aW9uKGluZGV4KXtcblx0XHRcdFx0c3BlZWQgPSAoaW5kZXggKyAxKSAqIDAuMztcblx0XHRcdFx0JCh0aGlzKS5jc3MoeydhbmltYXRpb24nOidzbGlkZUluTGVmdCAnICsgc3BlZWQgKyAncyd9KTtcblx0XHRcdH0pO1xuXHRcdFx0aGVhZGVyLnJlbW92ZUNsYXNzKFwiYW5pbWF0ZWRcIikucmVtb3ZlQ2xhc3MoJ2ZsaXBJblgnKTtcblx0XHR9XG5cblx0XHQvLyB0aGVXaW5kb3cucmVzaXplKGZ1bmN0aW9uKCkge1xuXHRcdC8vIFx0Y2xlYXJJbnRlcnZhbChpbnRlcnZhbCk7XG5cdFx0Ly8gXHRpZiAodGhlV2luZG93LndpZHRoKCkgPiA3NjgpIHtcblx0XHQvLyBcdFx0JCgnaHRtbCxib2R5Jykuc2Nyb2xsVG9wKDApO1xuXHRcdC8vIFx0XHRpbnRlcnZhbCA9IHNldEludGVydmFsKHJvdGF0ZSwxNTAwKTtcblx0XHQvLyBcdH1cblx0XHQvLyB9KTtcblxuXHRcdGZ1bmN0aW9uIHJvdGF0ZSgpe1xuXHRcdFx0Y29uc29sZS5sb2coJ3JvdGF0aW5nJywgY2Fyb3VzZWwpO1xuXHRcdFx0aW5jcmVtZW50Kys7XG5cdFx0XHRjYXJvdXNlbC5jc3Moeyctd2Via2l0LXRyYW5zZm9ybSc6ICdyb3RhdGVYKCcgKyAoaW5jcmVtZW50ICogLTYwKSArICdkZWcpJ30pO1xuXHRcdFx0Y2Fyb3VzZWwuYXR0cignZGF0YS1zdGF0ZScsKGluY3JlbWVudCAlIDYpICsgMSk7XG5cdFx0XHRwcmV2ID0gY3VycmVudDtcblx0XHRcdGN1cnJlbnQgPSAnI2ZpZy0nICsgKChpbmNyZW1lbnQgJSA2KSArIDEpO1xuXHRcdH1cblx0fSk7XG59KTtcbiIsImFwcC5jb250cm9sbGVyKCdwcm9qZWN0Q3RybCcsIGZ1bmN0aW9uKCRzY29wZSl7XG5cdHZhciB0aGVXaW5kb3cgPSAkKHdpbmRvdyk7XG5cdHZhciBza2V3TW9kZSA9IGZhbHNlO1xuXHR2YXIgY3VyUGFnZTtcblx0ZnVuY3Rpb24gaW5pdGlhbGl6ZVNrZXcoKXtcblx0XHRza2V3TW9kZSA9IHRydWU7XG5cdFx0JChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKSB7XG5cblx0XHRcdHZhciBudW1PZlBhZ2VzID0gJChcIi5za3ctcGFnZVwiKS5sZW5ndGg7XG5cdFx0XHR2YXIgYW5pbVRpbWUgPSAxMDAwO1xuXHRcdFx0dmFyIHNjcm9sbGluZyA9IGZhbHNlO1xuXHRcdFx0dmFyIHBnUHJlZml4ID0gXCIuc2t3LXBhZ2UtXCI7XG5cdFx0XHQvLyB2YXIgcHJvZ1ByZWZpeCA9IFwiI3BcIjtcblxuXHRcdFx0Y3VyUGFnZSA9IHBhcnNlSW50KHdpbmRvdy5sb2NhdGlvbi5ocmVmLnNwbGl0KFwiI3BcIilbMV0pICsgMSB8fCAxO1xuXG5cdFx0XHRmb3IgKHZhciBpID0gMTsgaSA8PSBudW1PZlBhZ2VzOyBpKyspe1xuXHRcdFx0XHRpZiAoaSA8IGN1clBhZ2UpIHtcblx0XHRcdFx0XHQkKHBnUHJlZml4ICsgaSkuYWRkQ2xhc3MoXCJhY3RpdmVcIikuYWRkQ2xhc3MoXCJpbmFjdGl2ZVwiKTtcblx0XHRcdFx0fSBlbHNlIGlmIChpID09PSBjdXJQYWdlKXtcblx0XHRcdFx0XHQkKHBnUHJlZml4ICsgaSkuYWRkQ2xhc3MoXCJhY3RpdmVcIikucmVtb3ZlQ2xhc3MoXCJpbmFjdGl2ZVwiKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHQkKHBnUHJlZml4ICsgaSkucmVtb3ZlQ2xhc3MoXCJhY3RpdmVcIikucmVtb3ZlQ2xhc3MoXCJpbmFjdGl2ZVwiKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHRmdW5jdGlvbiBwYWdpbmF0aW9uKCl7XG5cdFx0XHRcdHNjcm9sbGluZyA9IHRydWU7XG5cblx0XHRcdFx0JChwZ1ByZWZpeCArIGN1clBhZ2UpLnJlbW92ZUNsYXNzKFwiaW5hY3RpdmVcIikuYWRkQ2xhc3MoXCJhY3RpdmVcIik7XG5cdFx0XHRcdC8vICQocHJvZ1ByZWZpeCArIGN1clBhZ2UpLmFkZENsYXNzKFwiY3VycmVudFwiKTtcblx0XHRcdFx0c2V0VGltZW91dChmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRzY3JvbGxpbmcgPSBmYWxzZTtcblx0XHRcdFx0fSwgYW5pbVRpbWUpO1xuXHRcdFx0fVxuXG5cdFx0XHRmdW5jdGlvbiBuYXZpZ2F0ZVVwKCkge1xuXHRcdFx0XHRpZiAoY3VyUGFnZSA9PT0gMSkgcmV0dXJuO1xuXHRcdFx0XHRjdXJQYWdlLS07XG5cdFx0XHRcdCQocGdQcmVmaXggKyAoY3VyUGFnZSArIDEpKS5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKTtcblx0XHRcdFx0Ly8gJChwcm9nUHJlZml4ICsgKGN1clBhZ2UgKyAxKSkucmVtb3ZlQ2xhc3MoXCJjdXJyZW50XCIpO1xuXHRcdFx0XHRwYWdpbmF0aW9uKCk7XG5cdFx0XHR9XG5cblx0XHRcdGZ1bmN0aW9uIG5hdmlnYXRlRG93bigpIHtcblx0XHRcdFx0aWYgKGN1clBhZ2UgPT09IG51bU9mUGFnZXMpIHJldHVybjtcblx0XHRcdFx0Y3VyUGFnZSsrO1xuXHRcdFx0XHQkKHBnUHJlZml4ICsgKGN1clBhZ2UgLSAxKSkuYWRkQ2xhc3MoXCJpbmFjdGl2ZVwiKTtcblx0XHRcdFx0Ly8gJChwcm9nUHJlZml4ICsgKGN1clBhZ2UgLTEpKS5yZW1vdmVDbGFzcyhcImN1cnJlbnRcIik7XG5cdFx0XHRcdHBhZ2luYXRpb24oKTtcblx0XHRcdH1cblxuXHRcdFx0JChkb2N1bWVudCkub2ZmKCk7IC8vcmVzZXQgZXZlbnQgbGlzdGVuZXJzXG5cblx0XHRcdCQoZG9jdW1lbnQpLm9uKFwibW91c2V3aGVlbCBET01Nb3VzZVNjcm9sbFwiLCBmdW5jdGlvbihlKSB7XG5cdFx0XHRcdGlmIChzY3JvbGxpbmcpIHJldHVybjtcblx0XHRcdFx0aWYgKGUub3JpZ2luYWxFdmVudC53aGVlbERlbHRhID4gMCAgfHwgZS5vcmlnaW5hbEV2ZW50LmRldGFpbCA8IDApIHtcblx0XHRcdFx0XHRuYXZpZ2F0ZVVwKCk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0bmF2aWdhdGVEb3duKCk7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXG5cdFx0XHQkKGRvY3VtZW50KS5vbihcImtleWRvd25cIiwgZnVuY3Rpb24oZSkge1xuXHRcdFx0XHRpZiAoc2Nyb2xsaW5nKSByZXR1cm47XG5cdFx0XHRcdGlmIChlLndoaWNoID09PSAzOCkge1xuXHRcdFx0XHRcdG5hdmlnYXRlVXAoKTtcblx0XHRcdFx0fSBlbHNlIGlmIChlLndoaWNoID09PSA0MCkge1xuXHRcdFx0XHRcdG5hdmlnYXRlRG93bigpO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHR9KTtcblx0fVxuXG5cdGlmICh0aGVXaW5kb3cud2lkdGgoKSA+IDc2OCkge1xuXHRcdGNvbnNvbGUubG9nKCdJTklUSUFMSVpJTkcgU0tFVycpO1xuXHRcdGluaXRpYWxpemVTa2V3KCk7XG5cdH1cblxuXHR0aGVXaW5kb3cucmVzaXplKGZ1bmN0aW9uKCkge1xuXHRcdGlmICh0aGVXaW5kb3cud2lkdGgoKSA+IDc2OCkge1xuXHRcdFx0Ly8gJCgnaHRtbCxib2R5Jykuc2Nyb2xsVG9wKDApO1xuXHRcdFx0Ly9zdGFydCAvIHJlc3RhcnQgbW91c2VvdmVyIGxpc3RlbmVyIGlmIHN0b3BwZWRcblx0XHRcdGlmICghc2tld01vZGUpIHtcblx0XHRcdFx0aW5pdGlhbGl6ZVNrZXcoKTtcblx0XHRcdH1cblx0XHR9XG5cdH0pO1xufSk7XG4iLCJhcHAuZGlyZWN0aXZlKCdwcm9qZWN0c01vYmlsZScsIGZ1bmN0aW9uKCl7XG5cdHJldHVybiB7XG5cdFx0cmVzdHJpY3Q6ICdFJyxcblx0XHR0ZW1wbGF0ZVVybDogJy9qcy9kaXJlY3RpdmVzL3Byb2plY3RzLW1vYmlsZS5odG1sJ1xuXHR9O1xufSk7XG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
