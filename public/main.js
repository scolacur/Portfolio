'use strict';

// window.app = angular.module('portfolio', ['ui.router', 'ngAnimate']);
window.app = angular.module('portfolio', ['ui.router']);

app.config(function ($urlRouterProvider, $locationProvider, $urlMatcherFactoryProvider) {

	// this makes the '/stores/' route correctly redirect to '/stores'
	$urlRouterProvider.rule(function ($injector, $location) {

		var re = /(.+)(\/+)(\?.*)?$/;
		var path = $location.url();

		if (re.test(path)) {
			return path.replace(re, '$1$3');
		}

		return false;
	});
	// This turns off hashbang urls (/#about) and changes it to something normal (/about)
	$locationProvider.html5Mode(true);
	$urlRouterProvider.when('/auth/:provider', function () {
		window.location.reload();
	});
	// If we go to a URL that ui-router doesn't have registered, go to the "/" url.
	$urlRouterProvider.otherwise('/');
});

app.controller('aboutCtrl', function ($scope) {
	var theWindow = $(window);
	var force = d3.layout.force();
	var stopped = true;

	// angular.element(document).ready(function(){
	$scope.skills = [{ name: "JavaScript", level: 3 }, { name: "MongoDB", level: 3 }, { name: "Express.js", level: 3 }, { name: "Angular.js", level: 3 }, { name: "Node.js", level: 3 }, { name: "Mongoose.js", level: 3 }, { name: "Git", level: 3 }, { name: "CSS3", level: 3 }, { name: "HTML5", level: 3 }, { name: "Resonsive Design", level: 2 }, { name: "Gulp", level: 2 }, { name: "Mocha & Chai", level: 2 }, { name: "jQuery", level: 2 }, { name: "Bootstrap", level: 2 }, { name: "Web-Audio", level: 2 }, { name: "Chrome Extensions", level: 1 }, { name: "SQL", level: 1 }, { name: "WebSockets", level: 1 }, { name: "MIDI", level: 1 }, { name: "Java", level: 1 }, { name: "C++", level: 1 }];

	$scope.colors = ['#7FFFD4', '#E0FFFF', '#33CCFF', '#C688E8', '#FF807D', '#FF8EB2'];

	$scope.skills.map(function (e, i) {
		e.color = $scope.colors[i % 6];
	});
	function initializeSkillsCloud() {
		var skillsCloud = $("#skills-cloud");
		var width = skillsCloud.width();
		var height = skillsCloud.height();
		var svg = d3.select("#skills-cloud").append("svg");

		//create nodes
		var nodes = d3.range($scope.skills.length).map(function (i) {
			return {
				radius: $scope.skills[i].level * 18 + 14,
				label: $scope.skills[i].name,
				skillLevel: $scope.skills[i].level,
				bgColor: $scope.skills[i].color
			};
		});

		var root = nodes[0];
		root.radius = 0;
		root.fixed = true;

		var groups = svg.selectAll("g").data(nodes.slice(1)).enter().append("g");

		var circles = groups.append('circle').data(nodes.slice(1)).attr("r", function (d) {
			return d.radius;
		}).style("fill", function (d, i) {
			return d.bgColor;
		});

		var label = groups.append("text").text(function (d) {
			return d.label;
		}).attr({
			"alignment-baseline": "middle",
			"text-anchor": "middle"
		});

		force.gravity(0.05).charge(function (d, i) {
			return i ? 0 : -3000;
		}).nodes(nodes).size([width - 200, height - 300]);

		force.start();
		stopped = false;

		force.on("tick", function (e) {
			var q = d3.geom.quadtree(nodes),
			    i = 0,
			    n = nodes.length;

			while (++i < n) q.visit(collide(nodes[i]));

			//move circles
			svg.selectAll("circle").attr("cx", function (d) {
				return d.x;
			}).attr("cy", function (d) {
				return d.y;
			});

			//move labels
			svg.selectAll("text").attr("x", function (d) {
				return d.x;
			}).attr("y", function (d) {
				return d.y;
			});
		});

		svg.on("mousemove", function () {
			var p1 = d3.mouse(this);
			root.px = p1[0];
			root.py = p1[1];
			force.resume();
		});

		//So they don't all start out in a straight line
		root.px = 1;
		root.py = 1;

		function collide(node) {
			var r = node.radius + 16,
			    nx1 = node.x - r,
			    nx2 = node.x + r,
			    ny1 = node.y - r,
			    ny2 = node.y + r;
			return function (quad, x1, y1, x2, y2) {
				if (quad.point && quad.point !== node) {
					var x = node.x - quad.point.x,
					    y = node.y - quad.point.y,
					    l = Math.sqrt(x * x + y * y),
					    r = node.radius + quad.point.radius;

					if (l < r) {
						l = (l - r) / l * 0.5;
						node.x -= x *= l;
						node.y -= y *= l;
						quad.point.x += x;
						quad.point.y += y;
					}
				}
				return x1 > nx2 || x2 < nx1 || y1 > ny2 || y2 < ny1;
			};
		}
	}
	// });

	if (theWindow.width() > 1074) {
		initializeSkillsCloud();
	}

	theWindow.resize(function () {
		if (theWindow.width() > 1074) {
			$('html,body').scrollTop(0);
			//start / restart mouseover listener if stopped
			if (stopped) {
				initializeSkillsCloud();
			}
		} else {
			force.stop();
		}
	});
});

app.controller('contactCtrl', function ($scope, $http) {
	$scope.formData = {};

	$scope.sendMail = function () {
		$scope.waiting = true;
		$scope.sent = false;
		$scope.success = false;
		$http.post('/api/contact', $scope.formData).then(function (successResponse) {
			$scope.waiting = false;
			$scope.sent = true;
			$scope.success = successResponse.data;
			$scope.formData = {};
		});
	};
	//
	var resumeLabel = $('#resume');
	var overlay = $('#overlay');
	var resume = $('#resume-container');

	resumeLabel.click(function () {
		overlay.css({ 'opacity': '.7', 'z-index': '1' });
		resume.css({ 'display': 'block' });
	});
	overlay.click(function () {
		overlay.css({ 'opacity': '0', 'z-index': '-1' });
		resume.css({ 'display': 'none' });
	});

	// var card = $('#card');
	// var note = $('.note');
	// var arrow = $('#arrow');
	// var toggle = true;

	// arrow.click(function(){
	// 	if (toggle){
	// 		card.removeClass('hidden').removeClass('initial').addClass('visible');
	// 		// arrow.css({'display' : 'none'});
	//
	//
	// 		// note.css({'display': 'initial'});
	// 		setTimeout(explode, 500);
	// 		setTimeout(function(){
	// 			$('#canvas').css({'display' : 'none'});
	// 			// arrow.css({'display' : 'initial'});
	//
	// 		}, 4000);
	// 	} else {
	// 		card.removeClass('visible').addClass('hidden');
	//
	//
	// 		// note.css({'display': 'none'});
	// 	}
	// 	toggle = !toggle;
	// });

	function explode() {

		$('#canvas').css({ 'display': 'initial' });

		var requestId;

		var canvas = document.getElementById("canvas"),
		    context = canvas.getContext("2d"),
		    width = canvas.width = window.innerWidth,
		    height = canvas.height = window.innerHeight,
		    particle = [],
		    particleCount = 0,
		    gravity = 0.3,
		    colors =
		// [
		// 	'#f44336', '#e91e63', '#9c27b0', '#673ab7', '#3f51b5',
		// 	'#2196f3', '#03a9f4', '#00bcd4', '#009688', '#4CAF50',
		// 	'#8BC34A', '#CDDC39', '#FFEB3B', '#FFC107', '#FF9800',
		// 	'#FF5722', '#795548'
		// ];
		['#7FFFD4', '#E0FFFF', '#33CCFF', '#C688E8', '#FF807D', '#FF8EB2'];

		for (var i = 0; i < 50; i++) {
			particle.push({
				x: width / 2,
				y: height / 2,
				boxW: randomRange(5, 20),
				boxH: randomRange(5, 20),
				size: randomRange(2, 8),

				spikeran: randomRange(3, 5),

				velX: randomRange(-8, 8),
				velY: randomRange(-50, -10),

				angle: convertToRadians(randomRange(0, 360)),
				color: colors[Math.floor(Math.random() * colors.length)],
				anglespin: randomRange(-0.2, 0.2),

				draw: draw
			});
		}

		var r1 = {
			x: width / 2 - 150,
			y: height / 2 - 150,
			width: 300,
			height: 300,
			velX: 0,
			velY: -10,
			alphatop: 0
		};

		function drawScreen() {
			var size = 50;
			if (r1.alphatop < 1) {
				r1.alphatop += 0.01;
			} else {
				r1.alphatop = 1;
			}
			context.globalAlpha = r1.alphatop;

			if (r1.alphatop === 1) {
				r1.velY *= 0.999;
				r1.velY += 0.3;
				r1.x += r1.velX;
				r1.y += r1.velY;
			}

			if (r1.y + r1.height > height) {
				r1.anglespin = 0;
				r1.y = height - r1.height;
				r1.velY *= -0.8;
				r1.velX *= 0.9;
			}

			context.globalAlpha = 1;

			for (var i = 0; i < particle.length; i++) {
				particle[i].draw();
			}
		}

		function update() {
			context.clearRect(0, 0, width, height);
			drawScreen();
			requestId = requestAnimationFrame(update);
		}

		update();

		setTimeout(function () {
			window.cancelAnimationFrame(requestId);
			requestId = undefined;
		}, 5000);

		function randomRange(min, max) {
			return min + Math.random() * (max - min);
		}

		function randomInt(min, max) {
			return Math.floor(min + Math.random() * (max - min + 1));
		}

		function convertToRadians(degree) {
			return degree * (Math.PI / 180);
		}

		function drawStar(cx, cy, spikes, outerRadius, innerRadius, color) {
			var rot = Math.PI / 2 * 3;
			var x = cx;
			var y = cy;
			var step = Math.PI / spikes;

			context.strokeSyle = "#000";
			context.beginPath();
			context.moveTo(cx, cy - outerRadius);
			for (i = 0; i < spikes; i++) {
				x = cx + Math.cos(rot) * outerRadius;
				y = cy + Math.sin(rot) * outerRadius;
				context.lineTo(x, y);
				rot += step;

				x = cx + Math.cos(rot) * innerRadius;
				y = cy + Math.sin(rot) * innerRadius;
				context.lineTo(x, y);
				rot += step;
			}

			context.lineTo(cx, cy - outerRadius);
			context.closePath();
			context.fillStyle = color;
			context.fill();
		}

		function draw() {
			context.save();
			context.translate(this.x, this.y);
			context.rotate(this.angle);
			context.fillStyle = this.color;
			context.beginPath();
			// drawStar(0, 0, 5, this.boxW, this.boxH);
			context.fillRect(this.boxW / 2 * -1, this.boxH / 2 * -1, this.boxW, this.boxH);
			context.fill();
			context.closePath();
			context.restore();
			this.angle += this.anglespin;
			this.velY *= 0.999;
			this.velY += 0.3;
			this.x += this.velX;
			this.y += this.velY;

			if (this.y < 0) {
				this.velY *= -0.2;
				this.velX *= 0.9;
			}
			if (this.y > height) {
				this.anglespin = 0;
				this.y = height;
				this.velY *= -0.2;
				this.velX *= 0.9;
			}
			if (this.x > width || this.x < 0) {
				this.velX *= -0.5;
			}
		}
	}
});

app.config(function ($stateProvider) {
	$stateProvider.state('home', {
		url: '/',
		templateUrl: '/js/templates/home.html',
		controller: 'homeCtrl'
	}).state('projects', {
		url: '/projects',
		templateUrl: '/js/templates/projects.html',
		controller: 'projectCtrl'
	}).state('about', {
		url: '/about',
		templateUrl: '/js/templates/about.html',
		controller: 'aboutCtrl'
	}).state('contact', {
		url: '/contact',
		templateUrl: '/js/templates/contact.html',
		controller: 'contactCtrl'
	});
});

app.controller('mainCtrl', function () {});

app.controller('homeCtrl', function () {
	var increment = 0;
	var carousel = $('#carousel');
	var current = '#fig-1';
	var prev;
	var theWindow = $(window);
	var interval;

	if (theWindow.width() > 768) {
		interval = setInterval(rotate, 1500);
	}
	theWindow.resize(function () {
		clearInterval(interval);
		if (theWindow.width() > 768) {
			$('html,body').scrollTop(0);
			interval = setInterval(rotate, 1500);
		}
	});

	function rotate() {
		increment++;
		carousel.css({ '-webkit-transform': 'rotateX(' + increment * -60 + 'deg)' });
		carousel.attr('data-state', increment % 6 + 1);
		prev = current;
		current = '#fig-' + (increment % 6 + 1);
	}
});

app.controller('projectCtrl', function ($scope) {
	var theWindow = $(window);

	function initializeSkew() {
		$(document).ready(function () {

			var curPage = 1;
			var numOfPages = $(".skw-page").length;
			var animTime = 1000;
			var scrolling = false;
			var pgPrefix = ".skw-page-";
			var progPrefix = "#p";

			function pagination() {
				scrolling = true;

				$(pgPrefix + curPage).removeClass("inactive").addClass("active");
				// $(progPrefix + curPage).addClass("current");
				setTimeout(function () {
					scrolling = false;
				}, animTime);
			}

			function navigateUp() {
				if (curPage === 1) return;
				curPage--;
				$(pgPrefix + (curPage + 1)).removeClass("active");
				// $(progPrefix + (curPage + 1)).removeClass("current");

				pagination();
			}

			function navigateDown() {
				if (curPage === numOfPages) return;
				curPage++;
				$(pgPrefix + (curPage - 1)).addClass("inactive");
				// $(progPrefix + (curPage -1)).removeClass("current");
				pagination();
			}

			$(document).on("mousewheel DOMMouseScroll", function (e) {
				if (scrolling) return;
				if (e.originalEvent.wheelDelta > 0 || e.originalEvent.detail < 0) {
					navigateUp();
				} else {
					navigateDown();
				}
			});

			$(document).on("keydown", function (e) {
				if (scrolling) return;
				if (e.which === 38) {
					navigateUp();
				} else if (e.which === 40) {
					navigateDown();
				}
			});
		});
	}
	if (theWindow.width() > 768) {
		initializeSkew();
	}
});

app.directive('projectsMobile', function () {
	return {
		restrict: 'E',
		templateUrl: '/js/directives/projects-mobile.html'
	};
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsImFib3V0LmpzIiwiY29udGFjdC5qcyIsImhvbWUuanMiLCJwcm9qZWN0LmpzIiwiZGlyZWN0aXZlcy9wcm9qZWN0cy1tb2JpbGUuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0FBQ0EsTUFBQSxDQUFBLEdBQUEsR0FBQSxPQUFBLENBQUEsTUFBQSxDQUFBLFdBQUEsRUFBQSxDQUFBLFdBQUEsQ0FBQSxDQUFBLENBQUE7O0FBR0EsR0FBQSxDQUFBLE1BQUEsQ0FBQSxVQUFBLGtCQUFBLEVBQUEsaUJBQUEsRUFBQSwwQkFBQSxFQUFBOzs7QUFHQSxtQkFBQSxDQUFBLElBQUEsQ0FBQSxVQUFBLFNBQUEsRUFBQSxTQUFBLEVBQUE7O0FBRUEsTUFBQSxFQUFBLEdBQUEsbUJBQUEsQ0FBQTtBQUNBLE1BQUEsSUFBQSxHQUFBLFNBQUEsQ0FBQSxHQUFBLEVBQUEsQ0FBQTs7QUFFQSxNQUFBLEVBQUEsQ0FBQSxJQUFBLENBQUEsSUFBQSxDQUFBLEVBQUE7QUFDQSxVQUFBLElBQUEsQ0FBQSxPQUFBLENBQUEsRUFBQSxFQUFBLE1BQUEsQ0FBQSxDQUFBO0dBQ0E7O0FBRUEsU0FBQSxLQUFBLENBQUE7RUFDQSxDQUFBOztBQUFBLEFBRUEsa0JBQUEsQ0FBQSxTQUFBLENBQUEsSUFBQSxDQUFBLENBQUE7QUFDQSxtQkFBQSxDQUFBLElBQUEsQ0FBQSxpQkFBQSxFQUFBLFlBQUE7QUFDQSxRQUFBLENBQUEsUUFBQSxDQUFBLE1BQUEsRUFBQSxDQUFBO0VBQ0EsQ0FBQTs7QUFBQSxBQUVBLG1CQUFBLENBQUEsU0FBQSxDQUFBLEdBQUEsQ0FBQSxDQUFBO0NBQ0EsQ0FBQSxDQUFBOztBQ3pCQSxHQUFBLENBQUEsVUFBQSxDQUFBLFdBQUEsRUFBQSxVQUFBLE1BQUEsRUFBQTtBQUNBLEtBQUEsU0FBQSxHQUFBLENBQUEsQ0FBQSxNQUFBLENBQUEsQ0FBQTtBQUNBLEtBQUEsS0FBQSxHQUFBLEVBQUEsQ0FBQSxNQUFBLENBQUEsS0FBQSxFQUFBLENBQUE7QUFDQSxLQUFBLE9BQUEsR0FBQSxJQUFBOzs7QUFBQSxBQUdBLE9BQUEsQ0FBQSxNQUFBLEdBQUEsQ0FDQSxFQUFBLElBQUEsRUFBQSxZQUFBLEVBQUEsS0FBQSxFQUFBLENBQUEsRUFBQSxFQUNBLEVBQUEsSUFBQSxFQUFBLFNBQUEsRUFBQSxLQUFBLEVBQUEsQ0FBQSxFQUFBLEVBQ0EsRUFBQSxJQUFBLEVBQUEsWUFBQSxFQUFBLEtBQUEsRUFBQSxDQUFBLEVBQUEsRUFDQSxFQUFBLElBQUEsRUFBQSxZQUFBLEVBQUEsS0FBQSxFQUFBLENBQUEsRUFBQSxFQUNBLEVBQUEsSUFBQSxFQUFBLFNBQUEsRUFBQSxLQUFBLEVBQUEsQ0FBQSxFQUFBLEVBQ0EsRUFBQSxJQUFBLEVBQUEsYUFBQSxFQUFBLEtBQUEsRUFBQSxDQUFBLEVBQUEsRUFDQSxFQUFBLElBQUEsRUFBQSxLQUFBLEVBQUEsS0FBQSxFQUFBLENBQUEsRUFBQSxFQUNBLEVBQUEsSUFBQSxFQUFBLE1BQUEsRUFBQSxLQUFBLEVBQUEsQ0FBQSxFQUFBLEVBQ0EsRUFBQSxJQUFBLEVBQUEsT0FBQSxFQUFBLEtBQUEsRUFBQSxDQUFBLEVBQUEsRUFDQSxFQUFBLElBQUEsRUFBQSxrQkFBQSxFQUFBLEtBQUEsRUFBQSxDQUFBLEVBQUEsRUFDQSxFQUFBLElBQUEsRUFBQSxNQUFBLEVBQUEsS0FBQSxFQUFBLENBQUEsRUFBQSxFQUNBLEVBQUEsSUFBQSxFQUFBLGNBQUEsRUFBQSxLQUFBLEVBQUEsQ0FBQSxFQUFBLEVBQ0EsRUFBQSxJQUFBLEVBQUEsUUFBQSxFQUFBLEtBQUEsRUFBQSxDQUFBLEVBQUEsRUFDQSxFQUFBLElBQUEsRUFBQSxXQUFBLEVBQUEsS0FBQSxFQUFBLENBQUEsRUFBQSxFQUNBLEVBQUEsSUFBQSxFQUFBLFdBQUEsRUFBQSxLQUFBLEVBQUEsQ0FBQSxFQUFBLEVBQ0EsRUFBQSxJQUFBLEVBQUEsbUJBQUEsRUFBQSxLQUFBLEVBQUEsQ0FBQSxFQUFBLEVBQ0EsRUFBQSxJQUFBLEVBQUEsS0FBQSxFQUFBLEtBQUEsRUFBQSxDQUFBLEVBQUEsRUFDQSxFQUFBLElBQUEsRUFBQSxZQUFBLEVBQUEsS0FBQSxFQUFBLENBQUEsRUFBQSxFQUNBLEVBQUEsSUFBQSxFQUFBLE1BQUEsRUFBQSxLQUFBLEVBQUEsQ0FBQSxFQUFBLEVBQ0EsRUFBQSxJQUFBLEVBQUEsTUFBQSxFQUFBLEtBQUEsRUFBQSxDQUFBLEVBQUEsRUFDQSxFQUFBLElBQUEsRUFBQSxLQUFBLEVBQUEsS0FBQSxFQUFBLENBQUEsRUFBQSxDQUNBLENBQUE7O0FBRUEsT0FBQSxDQUFBLE1BQUEsR0FBQSxDQUNBLFNBQUEsRUFDQSxTQUFBLEVBQ0EsU0FBQSxFQUNBLFNBQUEsRUFDQSxTQUFBLEVBQ0EsU0FBQSxDQUNBLENBQUE7O0FBRUEsT0FBQSxDQUFBLE1BQUEsQ0FBQSxHQUFBLENBQUEsVUFBQSxDQUFBLEVBQUEsQ0FBQSxFQUFBO0FBQ0EsR0FBQSxDQUFBLEtBQUEsR0FBQSxNQUFBLENBQUEsTUFBQSxDQUFBLENBQUEsR0FBQSxDQUFBLENBQUEsQ0FBQTtFQUNBLENBQUEsQ0FBQTtBQUNBLFVBQUEscUJBQUEsR0FBQTtBQUNBLE1BQUEsV0FBQSxHQUFBLENBQUEsQ0FBQSxlQUFBLENBQUEsQ0FBQTtBQUNBLE1BQUEsS0FBQSxHQUFBLFdBQUEsQ0FBQSxLQUFBLEVBQUEsQ0FBQTtBQUNBLE1BQUEsTUFBQSxHQUFBLFdBQUEsQ0FBQSxNQUFBLEVBQUEsQ0FBQTtBQUNBLE1BQUEsR0FBQSxHQUFBLEVBQUEsQ0FBQSxNQUFBLENBQUEsZUFBQSxDQUFBLENBQUEsTUFBQSxDQUFBLEtBQUEsQ0FBQTs7O0FBQUEsQUFJQSxNQUFBLEtBQUEsR0FBQSxFQUFBLENBQUEsS0FBQSxDQUFBLE1BQUEsQ0FBQSxNQUFBLENBQUEsTUFBQSxDQUFBLENBQUEsR0FBQSxDQUFBLFVBQUEsQ0FBQSxFQUFBO0FBQ0EsVUFBQTtBQUNBLFVBQUEsRUFBQSxNQUFBLENBQUEsTUFBQSxDQUFBLENBQUEsQ0FBQSxDQUFBLEtBQUEsR0FBQSxFQUFBLEdBQUEsRUFBQTtBQUNBLFNBQUEsRUFBQSxNQUFBLENBQUEsTUFBQSxDQUFBLENBQUEsQ0FBQSxDQUFBLElBQUE7QUFDQSxjQUFBLEVBQUEsTUFBQSxDQUFBLE1BQUEsQ0FBQSxDQUFBLENBQUEsQ0FBQSxLQUFBO0FBQ0EsV0FBQSxFQUFBLE1BQUEsQ0FBQSxNQUFBLENBQUEsQ0FBQSxDQUFBLENBQUEsS0FBQTtJQUNBLENBQUE7R0FDQSxDQUFBLENBQUE7O0FBRUEsTUFBQSxJQUFBLEdBQUEsS0FBQSxDQUFBLENBQUEsQ0FBQSxDQUFBO0FBQ0EsTUFBQSxDQUFBLE1BQUEsR0FBQSxDQUFBLENBQUE7QUFDQSxNQUFBLENBQUEsS0FBQSxHQUFBLElBQUEsQ0FBQTs7QUFFQSxNQUFBLE1BQUEsR0FBQSxHQUFBLENBQUEsU0FBQSxDQUFBLEdBQUEsQ0FBQSxDQUNBLElBQUEsQ0FBQSxLQUFBLENBQUEsS0FBQSxDQUFBLENBQUEsQ0FBQSxDQUFBLENBQ0EsS0FBQSxFQUFBLENBQ0EsTUFBQSxDQUFBLEdBQUEsQ0FBQSxDQUFBOztBQUVBLE1BQUEsT0FBQSxHQUFBLE1BQUEsQ0FBQSxNQUFBLENBQUEsUUFBQSxDQUFBLENBQ0EsSUFBQSxDQUFBLEtBQUEsQ0FBQSxLQUFBLENBQUEsQ0FBQSxDQUFBLENBQUEsQ0FDQSxJQUFBLENBQUEsR0FBQSxFQUFBLFVBQUEsQ0FBQSxFQUFBO0FBQUEsVUFBQSxDQUFBLENBQUEsTUFBQSxDQUFBO0dBQUEsQ0FBQSxDQUNBLEtBQUEsQ0FBQSxNQUFBLEVBQUEsVUFBQSxDQUFBLEVBQUEsQ0FBQSxFQUFBO0FBQUEsVUFBQSxDQUFBLENBQUEsT0FBQSxDQUFBO0dBQUEsQ0FBQSxDQUFBOztBQUVBLE1BQUEsS0FBQSxHQUFBLE1BQUEsQ0FBQSxNQUFBLENBQUEsTUFBQSxDQUFBLENBQ0EsSUFBQSxDQUFBLFVBQUEsQ0FBQSxFQUFBO0FBQUEsVUFBQSxDQUFBLENBQUEsS0FBQSxDQUFBO0dBQUEsQ0FBQSxDQUNBLElBQUEsQ0FBQTtBQUNBLHVCQUFBLEVBQUEsUUFBQTtBQUNBLGdCQUFBLEVBQUEsUUFBQTtHQUNBLENBQUEsQ0FBQTs7QUFHQSxPQUFBLENBQUEsT0FBQSxDQUFBLElBQUEsQ0FBQSxDQUNBLE1BQUEsQ0FBQSxVQUFBLENBQUEsRUFBQSxDQUFBLEVBQUE7QUFBQSxVQUFBLENBQUEsR0FBQSxDQUFBLEdBQUEsQ0FBQSxJQUFBLENBQUE7R0FBQSxDQUFBLENBQ0EsS0FBQSxDQUFBLEtBQUEsQ0FBQSxDQUNBLElBQUEsQ0FBQSxDQUFBLEtBQUEsR0FBQSxHQUFBLEVBQUEsTUFBQSxHQUFBLEdBQUEsQ0FBQSxDQUFBLENBQUE7O0FBRUEsT0FBQSxDQUFBLEtBQUEsRUFBQSxDQUFBO0FBQ0EsU0FBQSxHQUFBLEtBQUEsQ0FBQTs7QUFFQSxPQUFBLENBQUEsRUFBQSxDQUFBLE1BQUEsRUFBQSxVQUFBLENBQUEsRUFBQTtBQUNBLE9BQUEsQ0FBQSxHQUFBLEVBQUEsQ0FBQSxJQUFBLENBQUEsUUFBQSxDQUFBLEtBQUEsQ0FBQTtPQUNBLENBQUEsR0FBQSxDQUFBO09BQ0EsQ0FBQSxHQUFBLEtBQUEsQ0FBQSxNQUFBLENBQUE7O0FBRUEsVUFBQSxFQUFBLENBQUEsR0FBQSxDQUFBLEVBQUEsQ0FBQSxDQUFBLEtBQUEsQ0FBQSxPQUFBLENBQUEsS0FBQSxDQUFBLENBQUEsQ0FBQSxDQUFBLENBQUEsQ0FBQTs7O0FBQUEsQUFHQSxNQUFBLENBQUEsU0FBQSxDQUFBLFFBQUEsQ0FBQSxDQUNBLElBQUEsQ0FBQSxJQUFBLEVBQUEsVUFBQSxDQUFBLEVBQUE7QUFBQSxXQUFBLENBQUEsQ0FBQSxDQUFBLENBQUE7SUFBQSxDQUFBLENBQ0EsSUFBQSxDQUFBLElBQUEsRUFBQSxVQUFBLENBQUEsRUFBQTtBQUFBLFdBQUEsQ0FBQSxDQUFBLENBQUEsQ0FBQTtJQUFBLENBQUE7OztBQUFBLEFBR0EsTUFBQSxDQUFBLFNBQUEsQ0FBQSxNQUFBLENBQUEsQ0FDQSxJQUFBLENBQUEsR0FBQSxFQUFBLFVBQUEsQ0FBQSxFQUFBO0FBQUEsV0FBQSxDQUFBLENBQUEsQ0FBQSxDQUFBO0lBQUEsQ0FBQSxDQUNBLElBQUEsQ0FBQSxHQUFBLEVBQUEsVUFBQSxDQUFBLEVBQUE7QUFBQSxXQUFBLENBQUEsQ0FBQSxDQUFBLENBQUE7SUFBQSxDQUFBLENBQUE7R0FDQSxDQUFBLENBQUE7O0FBRUEsS0FBQSxDQUFBLEVBQUEsQ0FBQSxXQUFBLEVBQUEsWUFBQTtBQUNBLE9BQUEsRUFBQSxHQUFBLEVBQUEsQ0FBQSxLQUFBLENBQUEsSUFBQSxDQUFBLENBQUE7QUFDQSxPQUFBLENBQUEsRUFBQSxHQUFBLEVBQUEsQ0FBQSxDQUFBLENBQUEsQ0FBQTtBQUNBLE9BQUEsQ0FBQSxFQUFBLEdBQUEsRUFBQSxDQUFBLENBQUEsQ0FBQSxDQUFBO0FBQ0EsUUFBQSxDQUFBLE1BQUEsRUFBQSxDQUFBO0dBQ0EsQ0FBQTs7O0FBQUEsQUFHQSxNQUFBLENBQUEsRUFBQSxHQUFBLENBQUEsQ0FBQTtBQUNBLE1BQUEsQ0FBQSxFQUFBLEdBQUEsQ0FBQSxDQUFBOztBQUVBLFdBQUEsT0FBQSxDQUFBLElBQUEsRUFBQTtBQUNBLE9BQUEsQ0FBQSxHQUFBLElBQUEsQ0FBQSxNQUFBLEdBQUEsRUFBQTtPQUNBLEdBQUEsR0FBQSxJQUFBLENBQUEsQ0FBQSxHQUFBLENBQUE7T0FDQSxHQUFBLEdBQUEsSUFBQSxDQUFBLENBQUEsR0FBQSxDQUFBO09BQ0EsR0FBQSxHQUFBLElBQUEsQ0FBQSxDQUFBLEdBQUEsQ0FBQTtPQUNBLEdBQUEsR0FBQSxJQUFBLENBQUEsQ0FBQSxHQUFBLENBQUEsQ0FBQTtBQUNBLFVBQUEsVUFBQSxJQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBO0FBQ0EsUUFBQSxJQUFBLENBQUEsS0FBQSxJQUFBLElBQUEsQ0FBQSxLQUFBLEtBQUEsSUFBQSxFQUFBO0FBQ0EsU0FBQSxDQUFBLEdBQUEsSUFBQSxDQUFBLENBQUEsR0FBQSxJQUFBLENBQUEsS0FBQSxDQUFBLENBQUE7U0FDQSxDQUFBLEdBQUEsSUFBQSxDQUFBLENBQUEsR0FBQSxJQUFBLENBQUEsS0FBQSxDQUFBLENBQUE7U0FDQSxDQUFBLEdBQUEsSUFBQSxDQUFBLElBQUEsQ0FBQSxDQUFBLEdBQUEsQ0FBQSxHQUFBLENBQUEsR0FBQSxDQUFBLENBQUE7U0FDQSxDQUFBLEdBQUEsSUFBQSxDQUFBLE1BQUEsR0FBQSxJQUFBLENBQUEsS0FBQSxDQUFBLE1BQUEsQ0FBQTs7QUFFQSxTQUFBLENBQUEsR0FBQSxDQUFBLEVBQUE7QUFDQSxPQUFBLEdBQUEsQ0FBQSxDQUFBLEdBQUEsQ0FBQSxDQUFBLEdBQUEsQ0FBQSxHQUFBLEdBQUEsQ0FBQTtBQUNBLFVBQUEsQ0FBQSxDQUFBLElBQUEsQ0FBQSxJQUFBLENBQUEsQ0FBQTtBQUNBLFVBQUEsQ0FBQSxDQUFBLElBQUEsQ0FBQSxJQUFBLENBQUEsQ0FBQTtBQUNBLFVBQUEsQ0FBQSxLQUFBLENBQUEsQ0FBQSxJQUFBLENBQUEsQ0FBQTtBQUNBLFVBQUEsQ0FBQSxLQUFBLENBQUEsQ0FBQSxJQUFBLENBQUEsQ0FBQTtNQUNBO0tBQ0E7QUFDQSxXQUFBLEVBQUEsR0FBQSxHQUFBLElBQUEsRUFBQSxHQUFBLEdBQUEsSUFBQSxFQUFBLEdBQUEsR0FBQSxJQUFBLEVBQUEsR0FBQSxHQUFBLENBQUE7SUFDQSxDQUFBO0dBQ0E7RUFDQTs7O0FBQUEsQUFHQSxLQUFBLFNBQUEsQ0FBQSxLQUFBLEVBQUEsR0FBQSxJQUFBLEVBQUE7QUFDQSx1QkFBQSxFQUFBLENBQUE7RUFDQTs7QUFFQSxVQUFBLENBQUEsTUFBQSxDQUFBLFlBQUE7QUFDQSxNQUFBLFNBQUEsQ0FBQSxLQUFBLEVBQUEsR0FBQSxJQUFBLEVBQUE7QUFDQSxJQUFBLENBQUEsV0FBQSxDQUFBLENBQUEsU0FBQSxDQUFBLENBQUEsQ0FBQTs7QUFBQSxBQUVBLE9BQUEsT0FBQSxFQUFBO0FBQ0EseUJBQUEsRUFBQSxDQUFBO0lBQ0E7R0FDQSxNQUFBO0FBQ0EsUUFBQSxDQUFBLElBQUEsRUFBQSxDQUFBO0dBQ0E7RUFDQSxDQUFBLENBQUE7Q0FDQSxDQUFBLENBQUE7O0FDaEtBLEdBQUEsQ0FBQSxVQUFBLENBQUEsYUFBQSxFQUFBLFVBQUEsTUFBQSxFQUFBLEtBQUEsRUFBQTtBQUNBLE9BQUEsQ0FBQSxRQUFBLEdBQUEsRUFBQSxDQUFBOztBQUVBLE9BQUEsQ0FBQSxRQUFBLEdBQUEsWUFBQTtBQUNBLFFBQUEsQ0FBQSxPQUFBLEdBQUEsSUFBQSxDQUFBO0FBQ0EsUUFBQSxDQUFBLElBQUEsR0FBQSxLQUFBLENBQUE7QUFDQSxRQUFBLENBQUEsT0FBQSxHQUFBLEtBQUEsQ0FBQTtBQUNBLE9BQUEsQ0FBQSxJQUFBLENBQUEsY0FBQSxFQUFBLE1BQUEsQ0FBQSxRQUFBLENBQUEsQ0FDQSxJQUFBLENBQUEsVUFBQSxlQUFBLEVBQUE7QUFDQSxTQUFBLENBQUEsT0FBQSxHQUFBLEtBQUEsQ0FBQTtBQUNBLFNBQUEsQ0FBQSxJQUFBLEdBQUEsSUFBQSxDQUFBO0FBQ0EsU0FBQSxDQUFBLE9BQUEsR0FBQSxlQUFBLENBQUEsSUFBQSxDQUFBO0FBQ0EsU0FBQSxDQUFBLFFBQUEsR0FBQSxFQUFBLENBQUE7R0FDQSxDQUFBLENBQUE7RUFDQTs7QUFBQSxBQUVBLEtBQUEsV0FBQSxHQUFBLENBQUEsQ0FBQSxTQUFBLENBQUEsQ0FBQTtBQUNBLEtBQUEsT0FBQSxHQUFBLENBQUEsQ0FBQSxVQUFBLENBQUEsQ0FBQTtBQUNBLEtBQUEsTUFBQSxHQUFBLENBQUEsQ0FBQSxtQkFBQSxDQUFBLENBQUE7O0FBRUEsWUFBQSxDQUFBLEtBQUEsQ0FBQSxZQUFBO0FBQ0EsU0FBQSxDQUFBLEdBQUEsQ0FBQSxFQUFBLFNBQUEsRUFBQSxJQUFBLEVBQUEsU0FBQSxFQUFBLEdBQUEsRUFBQSxDQUFBLENBQUE7QUFDQSxRQUFBLENBQUEsR0FBQSxDQUFBLEVBQUEsU0FBQSxFQUFBLE9BQUEsRUFBQSxDQUFBLENBQUE7RUFFQSxDQUFBLENBQUE7QUFDQSxRQUFBLENBQUEsS0FBQSxDQUFBLFlBQUE7QUFDQSxTQUFBLENBQUEsR0FBQSxDQUFBLEVBQUEsU0FBQSxFQUFBLEdBQUEsRUFBQSxTQUFBLEVBQUEsSUFBQSxFQUFBLENBQUEsQ0FBQTtBQUNBLFFBQUEsQ0FBQSxHQUFBLENBQUEsRUFBQSxTQUFBLEVBQUEsTUFBQSxFQUFBLENBQUEsQ0FBQTtFQUNBLENBQUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsQUE4QkEsVUFBQSxPQUFBLEdBQUE7O0FBRUEsR0FBQSxDQUFBLFNBQUEsQ0FBQSxDQUFBLEdBQUEsQ0FBQSxFQUFBLFNBQUEsRUFBQSxTQUFBLEVBQUEsQ0FBQSxDQUFBOztBQUVBLE1BQUEsU0FBQSxDQUFBOztBQUVBLE1BQUEsTUFBQSxHQUFBLFFBQUEsQ0FBQSxjQUFBLENBQUEsUUFBQSxDQUFBO01BQ0EsT0FBQSxHQUFBLE1BQUEsQ0FBQSxVQUFBLENBQUEsSUFBQSxDQUFBO01BQ0EsS0FBQSxHQUFBLE1BQUEsQ0FBQSxLQUFBLEdBQUEsTUFBQSxDQUFBLFVBQUE7TUFDQSxNQUFBLEdBQUEsTUFBQSxDQUFBLE1BQUEsR0FBQSxNQUFBLENBQUEsV0FBQTtNQUNBLFFBQUEsR0FBQSxFQUFBO01BQ0EsYUFBQSxHQUFBLENBQUE7TUFDQSxPQUFBLEdBQUEsR0FBQTtNQUNBLE1BQUE7Ozs7Ozs7QUFPQSxHQUFBLFNBQUEsRUFBQSxTQUFBLEVBQUEsU0FBQSxFQUFBLFNBQUEsRUFBQSxTQUFBLEVBQUEsU0FBQSxDQUFBLENBQUE7O0FBRUEsT0FBQSxJQUFBLENBQUEsR0FBQSxDQUFBLEVBQUEsQ0FBQSxHQUFBLEVBQUEsRUFBQSxDQUFBLEVBQUEsRUFBQTtBQUNBLFdBQUEsQ0FBQSxJQUFBLENBQUE7QUFDQSxLQUFBLEVBQUEsS0FBQSxHQUFBLENBQUE7QUFDQSxLQUFBLEVBQUEsTUFBQSxHQUFBLENBQUE7QUFDQSxRQUFBLEVBQUEsV0FBQSxDQUFBLENBQUEsRUFBQSxFQUFBLENBQUE7QUFDQSxRQUFBLEVBQUEsV0FBQSxDQUFBLENBQUEsRUFBQSxFQUFBLENBQUE7QUFDQSxRQUFBLEVBQUEsV0FBQSxDQUFBLENBQUEsRUFBQSxDQUFBLENBQUE7O0FBRUEsWUFBQSxFQUFBLFdBQUEsQ0FBQSxDQUFBLEVBQUEsQ0FBQSxDQUFBOztBQUVBLFFBQUEsRUFBQSxXQUFBLENBQUEsQ0FBQSxDQUFBLEVBQUEsQ0FBQSxDQUFBO0FBQ0EsUUFBQSxFQUFBLFdBQUEsQ0FBQSxDQUFBLEVBQUEsRUFBQSxDQUFBLEVBQUEsQ0FBQTs7QUFFQSxTQUFBLEVBQUEsZ0JBQUEsQ0FBQSxXQUFBLENBQUEsQ0FBQSxFQUFBLEdBQUEsQ0FBQSxDQUFBO0FBQ0EsU0FBQSxFQUFBLE1BQUEsQ0FBQSxJQUFBLENBQUEsS0FBQSxDQUFBLElBQUEsQ0FBQSxNQUFBLEVBQUEsR0FBQSxNQUFBLENBQUEsTUFBQSxDQUFBLENBQUE7QUFDQSxhQUFBLEVBQUEsV0FBQSxDQUFBLENBQUEsR0FBQSxFQUFBLEdBQUEsQ0FBQTs7QUFFQSxRQUFBLEVBQUEsSUFBQTtJQUNBLENBQUEsQ0FBQTtHQUNBOztBQUVBLE1BQUEsRUFBQSxHQUFBO0FBQ0EsSUFBQSxFQUFBLEtBQUEsR0FBQSxDQUFBLEdBQUEsR0FBQTtBQUNBLElBQUEsRUFBQSxNQUFBLEdBQUEsQ0FBQSxHQUFBLEdBQUE7QUFDQSxRQUFBLEVBQUEsR0FBQTtBQUNBLFNBQUEsRUFBQSxHQUFBO0FBQ0EsT0FBQSxFQUFBLENBQUE7QUFDQSxPQUFBLEVBQUEsQ0FBQSxFQUFBO0FBQ0EsV0FBQSxFQUFBLENBQUE7R0FDQSxDQUFBOztBQUdBLFdBQUEsVUFBQSxHQUFBO0FBQ0EsT0FBQSxJQUFBLEdBQUEsRUFBQSxDQUFBO0FBQ0EsT0FBQSxFQUFBLENBQUEsUUFBQSxHQUFBLENBQUEsRUFBQTtBQUNBLE1BQUEsQ0FBQSxRQUFBLElBQUEsSUFBQSxDQUFBO0lBQ0EsTUFBQTtBQUNBLE1BQUEsQ0FBQSxRQUFBLEdBQUEsQ0FBQSxDQUFBO0lBQ0E7QUFDQSxVQUFBLENBQUEsV0FBQSxHQUFBLEVBQUEsQ0FBQSxRQUFBLENBQUE7O0FBRUEsT0FBQSxFQUFBLENBQUEsUUFBQSxLQUFBLENBQUEsRUFBQTtBQUNBLE1BQUEsQ0FBQSxJQUFBLElBQUEsS0FBQSxDQUFBO0FBQ0EsTUFBQSxDQUFBLElBQUEsSUFBQSxHQUFBLENBQUE7QUFDQSxNQUFBLENBQUEsQ0FBQSxJQUFBLEVBQUEsQ0FBQSxJQUFBLENBQUE7QUFDQSxNQUFBLENBQUEsQ0FBQSxJQUFBLEVBQUEsQ0FBQSxJQUFBLENBQUE7SUFDQTs7QUFFQSxPQUFBLEVBQUEsQ0FBQSxDQUFBLEdBQUEsRUFBQSxDQUFBLE1BQUEsR0FBQSxNQUFBLEVBQUE7QUFDQSxNQUFBLENBQUEsU0FBQSxHQUFBLENBQUEsQ0FBQTtBQUNBLE1BQUEsQ0FBQSxDQUFBLEdBQUEsTUFBQSxHQUFBLEVBQUEsQ0FBQSxNQUFBLENBQUE7QUFDQSxNQUFBLENBQUEsSUFBQSxJQUFBLENBQUEsR0FBQSxDQUFBO0FBQ0EsTUFBQSxDQUFBLElBQUEsSUFBQSxHQUFBLENBQUE7SUFDQTs7QUFFQSxVQUFBLENBQUEsV0FBQSxHQUFBLENBQUEsQ0FBQTs7QUFFQSxRQUFBLElBQUEsQ0FBQSxHQUFBLENBQUEsRUFBQSxDQUFBLEdBQUEsUUFBQSxDQUFBLE1BQUEsRUFBQSxDQUFBLEVBQUEsRUFBQTtBQUNBLFlBQUEsQ0FBQSxDQUFBLENBQUEsQ0FBQSxJQUFBLEVBQUEsQ0FBQTtJQUNBO0dBQ0E7O0FBRUEsV0FBQSxNQUFBLEdBQUE7QUFDQSxVQUFBLENBQUEsU0FBQSxDQUFBLENBQUEsRUFBQSxDQUFBLEVBQUEsS0FBQSxFQUFBLE1BQUEsQ0FBQSxDQUFBO0FBQ0EsYUFBQSxFQUFBLENBQUE7QUFDQSxZQUFBLEdBQUEscUJBQUEsQ0FBQSxNQUFBLENBQUEsQ0FBQTtHQUNBOztBQUVBLFFBQUEsRUFBQSxDQUFBOztBQUVBLFlBQUEsQ0FBQSxZQUFBO0FBQ0EsU0FBQSxDQUFBLG9CQUFBLENBQUEsU0FBQSxDQUFBLENBQUE7QUFDQSxZQUFBLEdBQUEsU0FBQSxDQUFBO0dBQ0EsRUFBQSxJQUFBLENBQUEsQ0FBQTs7QUFFQSxXQUFBLFdBQUEsQ0FBQSxHQUFBLEVBQUEsR0FBQSxFQUFBO0FBQ0EsVUFBQSxHQUFBLEdBQUEsSUFBQSxDQUFBLE1BQUEsRUFBQSxJQUFBLEdBQUEsR0FBQSxHQUFBLENBQUEsQ0FBQTtHQUNBOztBQUVBLFdBQUEsU0FBQSxDQUFBLEdBQUEsRUFBQSxHQUFBLEVBQUE7QUFDQSxVQUFBLElBQUEsQ0FBQSxLQUFBLENBQUEsR0FBQSxHQUFBLElBQUEsQ0FBQSxNQUFBLEVBQUEsSUFBQSxHQUFBLEdBQUEsR0FBQSxHQUFBLENBQUEsQ0FBQSxDQUFBLENBQUE7R0FDQTs7QUFFQSxXQUFBLGdCQUFBLENBQUEsTUFBQSxFQUFBO0FBQ0EsVUFBQSxNQUFBLElBQUEsSUFBQSxDQUFBLEVBQUEsR0FBQSxHQUFBLENBQUEsQ0FBQTtHQUNBOztBQUVBLFdBQUEsUUFBQSxDQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsTUFBQSxFQUFBLFdBQUEsRUFBQSxXQUFBLEVBQUEsS0FBQSxFQUFBO0FBQ0EsT0FBQSxHQUFBLEdBQUEsSUFBQSxDQUFBLEVBQUEsR0FBQSxDQUFBLEdBQUEsQ0FBQSxDQUFBO0FBQ0EsT0FBQSxDQUFBLEdBQUEsRUFBQSxDQUFBO0FBQ0EsT0FBQSxDQUFBLEdBQUEsRUFBQSxDQUFBO0FBQ0EsT0FBQSxJQUFBLEdBQUEsSUFBQSxDQUFBLEVBQUEsR0FBQSxNQUFBLENBQUE7O0FBRUEsVUFBQSxDQUFBLFVBQUEsR0FBQSxNQUFBLENBQUE7QUFDQSxVQUFBLENBQUEsU0FBQSxFQUFBLENBQUE7QUFDQSxVQUFBLENBQUEsTUFBQSxDQUFBLEVBQUEsRUFBQSxFQUFBLEdBQUEsV0FBQSxDQUFBLENBQUE7QUFDQSxRQUFBLENBQUEsR0FBQSxDQUFBLEVBQUEsQ0FBQSxHQUFBLE1BQUEsRUFBQSxDQUFBLEVBQUEsRUFBQTtBQUNBLEtBQUEsR0FBQSxFQUFBLEdBQUEsSUFBQSxDQUFBLEdBQUEsQ0FBQSxHQUFBLENBQUEsR0FBQSxXQUFBLENBQUE7QUFDQSxLQUFBLEdBQUEsRUFBQSxHQUFBLElBQUEsQ0FBQSxHQUFBLENBQUEsR0FBQSxDQUFBLEdBQUEsV0FBQSxDQUFBO0FBQ0EsV0FBQSxDQUFBLE1BQUEsQ0FBQSxDQUFBLEVBQUEsQ0FBQSxDQUFBLENBQUE7QUFDQSxPQUFBLElBQUEsSUFBQSxDQUFBOztBQUVBLEtBQUEsR0FBQSxFQUFBLEdBQUEsSUFBQSxDQUFBLEdBQUEsQ0FBQSxHQUFBLENBQUEsR0FBQSxXQUFBLENBQUE7QUFDQSxLQUFBLEdBQUEsRUFBQSxHQUFBLElBQUEsQ0FBQSxHQUFBLENBQUEsR0FBQSxDQUFBLEdBQUEsV0FBQSxDQUFBO0FBQ0EsV0FBQSxDQUFBLE1BQUEsQ0FBQSxDQUFBLEVBQUEsQ0FBQSxDQUFBLENBQUE7QUFDQSxPQUFBLElBQUEsSUFBQSxDQUFBO0lBQ0E7O0FBRUEsVUFBQSxDQUFBLE1BQUEsQ0FBQSxFQUFBLEVBQUEsRUFBQSxHQUFBLFdBQUEsQ0FBQSxDQUFBO0FBQ0EsVUFBQSxDQUFBLFNBQUEsRUFBQSxDQUFBO0FBQ0EsVUFBQSxDQUFBLFNBQUEsR0FBQSxLQUFBLENBQUE7QUFDQSxVQUFBLENBQUEsSUFBQSxFQUFBLENBQUE7R0FDQTs7QUFFQSxXQUFBLElBQUEsR0FBQTtBQUNBLFVBQUEsQ0FBQSxJQUFBLEVBQUEsQ0FBQTtBQUNBLFVBQUEsQ0FBQSxTQUFBLENBQUEsSUFBQSxDQUFBLENBQUEsRUFBQSxJQUFBLENBQUEsQ0FBQSxDQUFBLENBQUE7QUFDQSxVQUFBLENBQUEsTUFBQSxDQUFBLElBQUEsQ0FBQSxLQUFBLENBQUEsQ0FBQTtBQUNBLFVBQUEsQ0FBQSxTQUFBLEdBQUEsSUFBQSxDQUFBLEtBQUEsQ0FBQTtBQUNBLFVBQUEsQ0FBQSxTQUFBLEVBQUE7O0FBQUEsQUFFQSxVQUFBLENBQUEsUUFBQSxDQUFBLElBQUEsQ0FBQSxJQUFBLEdBQUEsQ0FBQSxHQUFBLENBQUEsQ0FBQSxFQUFBLElBQUEsQ0FBQSxJQUFBLEdBQUEsQ0FBQSxHQUFBLENBQUEsQ0FBQSxFQUFBLElBQUEsQ0FBQSxJQUFBLEVBQUEsSUFBQSxDQUFBLElBQUEsQ0FBQSxDQUFBO0FBQ0EsVUFBQSxDQUFBLElBQUEsRUFBQSxDQUFBO0FBQ0EsVUFBQSxDQUFBLFNBQUEsRUFBQSxDQUFBO0FBQ0EsVUFBQSxDQUFBLE9BQUEsRUFBQSxDQUFBO0FBQ0EsT0FBQSxDQUFBLEtBQUEsSUFBQSxJQUFBLENBQUEsU0FBQSxDQUFBO0FBQ0EsT0FBQSxDQUFBLElBQUEsSUFBQSxLQUFBLENBQUE7QUFDQSxPQUFBLENBQUEsSUFBQSxJQUFBLEdBQUEsQ0FBQTtBQUNBLE9BQUEsQ0FBQSxDQUFBLElBQUEsSUFBQSxDQUFBLElBQUEsQ0FBQTtBQUNBLE9BQUEsQ0FBQSxDQUFBLElBQUEsSUFBQSxDQUFBLElBQUEsQ0FBQTs7QUFFQSxPQUFBLElBQUEsQ0FBQSxDQUFBLEdBQUEsQ0FBQSxFQUFBO0FBQ0EsUUFBQSxDQUFBLElBQUEsSUFBQSxDQUFBLEdBQUEsQ0FBQTtBQUNBLFFBQUEsQ0FBQSxJQUFBLElBQUEsR0FBQSxDQUFBO0lBQ0E7QUFDQSxPQUFBLElBQUEsQ0FBQSxDQUFBLEdBQUEsTUFBQSxFQUFBO0FBQ0EsUUFBQSxDQUFBLFNBQUEsR0FBQSxDQUFBLENBQUE7QUFDQSxRQUFBLENBQUEsQ0FBQSxHQUFBLE1BQUEsQ0FBQTtBQUNBLFFBQUEsQ0FBQSxJQUFBLElBQUEsQ0FBQSxHQUFBLENBQUE7QUFDQSxRQUFBLENBQUEsSUFBQSxJQUFBLEdBQUEsQ0FBQTtJQUNBO0FBQ0EsT0FBQSxJQUFBLENBQUEsQ0FBQSxHQUFBLEtBQUEsSUFBQSxJQUFBLENBQUEsQ0FBQSxHQUFBLENBQUEsRUFBQTtBQUNBLFFBQUEsQ0FBQSxJQUFBLElBQUEsQ0FBQSxHQUFBLENBQUE7SUFDQTtHQUNBO0VBQ0E7Q0FDQSxDQUFBLENBQUE7O0FDbE9BLEdBQUEsQ0FBQSxNQUFBLENBQUEsVUFBQSxjQUFBLEVBQUE7QUFDQSxlQUFBLENBQ0EsS0FBQSxDQUFBLE1BQUEsRUFBQTtBQUNBLEtBQUEsRUFBQSxHQUFBO0FBQ0EsYUFBQSxFQUFBLHlCQUFBO0FBQ0EsWUFBQSxFQUFBLFVBQUE7RUFDQSxDQUFBLENBQ0EsS0FBQSxDQUFBLFVBQUEsRUFBQTtBQUNBLEtBQUEsRUFBQSxXQUFBO0FBQ0EsYUFBQSxFQUFBLDZCQUFBO0FBQ0EsWUFBQSxFQUFBLGFBQUE7RUFDQSxDQUFBLENBQ0EsS0FBQSxDQUFBLE9BQUEsRUFBQTtBQUNBLEtBQUEsRUFBQSxRQUFBO0FBQ0EsYUFBQSxFQUFBLDBCQUFBO0FBQ0EsWUFBQSxFQUFBLFdBQUE7RUFDQSxDQUFBLENBQ0EsS0FBQSxDQUFBLFNBQUEsRUFBQTtBQUNBLEtBQUEsRUFBQSxVQUFBO0FBQ0EsYUFBQSxFQUFBLDRCQUFBO0FBQ0EsWUFBQSxFQUFBLGFBQUE7RUFDQSxDQUFBLENBQUE7Q0FDQSxDQUFBLENBQUE7O0FBRUEsR0FBQSxDQUFBLFVBQUEsQ0FBQSxVQUFBLEVBQUEsWUFBQSxFQUVBLENBQUEsQ0FBQTs7QUFFQSxHQUFBLENBQUEsVUFBQSxDQUFBLFVBQUEsRUFBQSxZQUFBO0FBQ0EsS0FBQSxTQUFBLEdBQUEsQ0FBQSxDQUFBO0FBQ0EsS0FBQSxRQUFBLEdBQUEsQ0FBQSxDQUFBLFdBQUEsQ0FBQSxDQUFBO0FBQ0EsS0FBQSxPQUFBLEdBQUEsUUFBQSxDQUFBO0FBQ0EsS0FBQSxJQUFBLENBQUE7QUFDQSxLQUFBLFNBQUEsR0FBQSxDQUFBLENBQUEsTUFBQSxDQUFBLENBQUE7QUFDQSxLQUFBLFFBQUEsQ0FBQTs7QUFFQSxLQUFBLFNBQUEsQ0FBQSxLQUFBLEVBQUEsR0FBQSxHQUFBLEVBQUE7QUFDQSxVQUFBLEdBQUEsV0FBQSxDQUFBLE1BQUEsRUFBQSxJQUFBLENBQUEsQ0FBQTtFQUNBO0FBQ0EsVUFBQSxDQUFBLE1BQUEsQ0FBQSxZQUFBO0FBQ0EsZUFBQSxDQUFBLFFBQUEsQ0FBQSxDQUFBO0FBQ0EsTUFBQSxTQUFBLENBQUEsS0FBQSxFQUFBLEdBQUEsR0FBQSxFQUFBO0FBQ0EsSUFBQSxDQUFBLFdBQUEsQ0FBQSxDQUFBLFNBQUEsQ0FBQSxDQUFBLENBQUEsQ0FBQTtBQUNBLFdBQUEsR0FBQSxXQUFBLENBQUEsTUFBQSxFQUFBLElBQUEsQ0FBQSxDQUFBO0dBQ0E7RUFDQSxDQUFBLENBQUE7O0FBRUEsVUFBQSxNQUFBLEdBQUE7QUFDQSxXQUFBLEVBQUEsQ0FBQTtBQUNBLFVBQUEsQ0FBQSxHQUFBLENBQUEsRUFBQSxtQkFBQSxFQUFBLFVBQUEsR0FBQSxTQUFBLEdBQUEsQ0FBQSxFQUFBLEdBQUEsTUFBQSxFQUFBLENBQUEsQ0FBQTtBQUNBLFVBQUEsQ0FBQSxJQUFBLENBQUEsWUFBQSxFQUFBLFNBQUEsR0FBQSxDQUFBLEdBQUEsQ0FBQSxDQUFBLENBQUE7QUFDQSxNQUFBLEdBQUEsT0FBQSxDQUFBO0FBQ0EsU0FBQSxHQUFBLE9BQUEsSUFBQSxTQUFBLEdBQUEsQ0FBQSxHQUFBLENBQUEsQ0FBQSxDQUFBO0VBQ0E7Q0FDQSxDQUFBLENBQUE7O0FDdERBLEdBQUEsQ0FBQSxVQUFBLENBQUEsYUFBQSxFQUFBLFVBQUEsTUFBQSxFQUFBO0FBQ0EsS0FBQSxTQUFBLEdBQUEsQ0FBQSxDQUFBLE1BQUEsQ0FBQSxDQUFBOztBQUVBLFVBQUEsY0FBQSxHQUFBO0FBQ0EsR0FBQSxDQUFBLFFBQUEsQ0FBQSxDQUFBLEtBQUEsQ0FBQSxZQUFBOztBQUVBLE9BQUEsT0FBQSxHQUFBLENBQUEsQ0FBQTtBQUNBLE9BQUEsVUFBQSxHQUFBLENBQUEsQ0FBQSxXQUFBLENBQUEsQ0FBQSxNQUFBLENBQUE7QUFDQSxPQUFBLFFBQUEsR0FBQSxJQUFBLENBQUE7QUFDQSxPQUFBLFNBQUEsR0FBQSxLQUFBLENBQUE7QUFDQSxPQUFBLFFBQUEsR0FBQSxZQUFBLENBQUE7QUFDQSxPQUFBLFVBQUEsR0FBQSxJQUFBLENBQUE7O0FBRUEsWUFBQSxVQUFBLEdBQUE7QUFDQSxhQUFBLEdBQUEsSUFBQSxDQUFBOztBQUVBLEtBQUEsQ0FBQSxRQUFBLEdBQUEsT0FBQSxDQUFBLENBQUEsV0FBQSxDQUFBLFVBQUEsQ0FBQSxDQUFBLFFBQUEsQ0FBQSxRQUFBLENBQUE7O0FBQUEsQUFFQSxjQUFBLENBQUEsWUFBQTtBQUNBLGNBQUEsR0FBQSxLQUFBLENBQUE7S0FDQSxFQUFBLFFBQUEsQ0FBQSxDQUFBO0lBQ0E7O0FBRUEsWUFBQSxVQUFBLEdBQUE7QUFDQSxRQUFBLE9BQUEsS0FBQSxDQUFBLEVBQUEsT0FBQTtBQUNBLFdBQUEsRUFBQSxDQUFBO0FBQ0EsS0FBQSxDQUFBLFFBQUEsSUFBQSxPQUFBLEdBQUEsQ0FBQSxDQUFBLENBQUEsQ0FBQSxXQUFBLENBQUEsUUFBQSxDQUFBOzs7QUFBQSxBQUdBLGNBQUEsRUFBQSxDQUFBO0lBQ0E7O0FBRUEsWUFBQSxZQUFBLEdBQUE7QUFDQSxRQUFBLE9BQUEsS0FBQSxVQUFBLEVBQUEsT0FBQTtBQUNBLFdBQUEsRUFBQSxDQUFBO0FBQ0EsS0FBQSxDQUFBLFFBQUEsSUFBQSxPQUFBLEdBQUEsQ0FBQSxDQUFBLENBQUEsQ0FBQSxRQUFBLENBQUEsVUFBQSxDQUFBOztBQUFBLEFBRUEsY0FBQSxFQUFBLENBQUE7SUFDQTs7QUFFQSxJQUFBLENBQUEsUUFBQSxDQUFBLENBQUEsRUFBQSxDQUFBLDJCQUFBLEVBQUEsVUFBQSxDQUFBLEVBQUE7QUFDQSxRQUFBLFNBQUEsRUFBQSxPQUFBO0FBQ0EsUUFBQSxDQUFBLENBQUEsYUFBQSxDQUFBLFVBQUEsR0FBQSxDQUFBLElBQUEsQ0FBQSxDQUFBLGFBQUEsQ0FBQSxNQUFBLEdBQUEsQ0FBQSxFQUFBO0FBQ0EsZUFBQSxFQUFBLENBQUE7S0FDQSxNQUFBO0FBQ0EsaUJBQUEsRUFBQSxDQUFBO0tBQ0E7SUFDQSxDQUFBLENBQUE7O0FBRUEsSUFBQSxDQUFBLFFBQUEsQ0FBQSxDQUFBLEVBQUEsQ0FBQSxTQUFBLEVBQUEsVUFBQSxDQUFBLEVBQUE7QUFDQSxRQUFBLFNBQUEsRUFBQSxPQUFBO0FBQ0EsUUFBQSxDQUFBLENBQUEsS0FBQSxLQUFBLEVBQUEsRUFBQTtBQUNBLGVBQUEsRUFBQSxDQUFBO0tBQ0EsTUFBQSxJQUFBLENBQUEsQ0FBQSxLQUFBLEtBQUEsRUFBQSxFQUFBO0FBQ0EsaUJBQUEsRUFBQSxDQUFBO0tBQ0E7SUFDQSxDQUFBLENBQUE7R0FDQSxDQUFBLENBQUE7RUFDQTtBQUNBLEtBQUEsU0FBQSxDQUFBLEtBQUEsRUFBQSxHQUFBLEdBQUEsRUFBQTtBQUNBLGdCQUFBLEVBQUEsQ0FBQTtFQUNBO0NBQ0EsQ0FBQSxDQUFBOztBQzlEQSxHQUFBLENBQUEsU0FBQSxDQUFBLGdCQUFBLEVBQUEsWUFBQTtBQUNBLFFBQUE7QUFDQSxVQUFBLEVBQUEsR0FBQTtBQUNBLGFBQUEsRUFBQSxxQ0FBQTtFQUNBLENBQUE7Q0FDQSxDQUFBLENBQUEiLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vIHdpbmRvdy5hcHAgPSBhbmd1bGFyLm1vZHVsZSgncG9ydGZvbGlvJywgWyd1aS5yb3V0ZXInLCAnbmdBbmltYXRlJ10pO1xud2luZG93LmFwcCA9IGFuZ3VsYXIubW9kdWxlKCdwb3J0Zm9saW8nLCBbJ3VpLnJvdXRlciddKTtcblxuXG5hcHAuY29uZmlnKGZ1bmN0aW9uICgkdXJsUm91dGVyUHJvdmlkZXIsICRsb2NhdGlvblByb3ZpZGVyLCAkdXJsTWF0Y2hlckZhY3RvcnlQcm92aWRlcikge1xuXG5cdC8vIHRoaXMgbWFrZXMgdGhlICcvc3RvcmVzLycgcm91dGUgY29ycmVjdGx5IHJlZGlyZWN0IHRvICcvc3RvcmVzJ1xuXHQkdXJsUm91dGVyUHJvdmlkZXIucnVsZShmdW5jdGlvbiAoJGluamVjdG9yLCAkbG9jYXRpb24pIHtcblxuXHRcdHZhciByZSA9IC8oLispKFxcLyspKFxcPy4qKT8kLztcblx0XHR2YXIgcGF0aCA9ICRsb2NhdGlvbi51cmwoKTtcblxuXHRcdGlmKHJlLnRlc3QocGF0aCkpIHtcblx0XHRcdHJldHVybiBwYXRoLnJlcGxhY2UocmUsICckMSQzJyk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9KTtcblx0Ly8gVGhpcyB0dXJucyBvZmYgaGFzaGJhbmcgdXJscyAoLyNhYm91dCkgYW5kIGNoYW5nZXMgaXQgdG8gc29tZXRoaW5nIG5vcm1hbCAoL2Fib3V0KVxuXHQkbG9jYXRpb25Qcm92aWRlci5odG1sNU1vZGUodHJ1ZSk7XG5cdCR1cmxSb3V0ZXJQcm92aWRlci53aGVuKCcvYXV0aC86cHJvdmlkZXInLCBmdW5jdGlvbiAoKSB7XG5cdFx0d2luZG93LmxvY2F0aW9uLnJlbG9hZCgpO1xuXHR9KTtcblx0Ly8gSWYgd2UgZ28gdG8gYSBVUkwgdGhhdCB1aS1yb3V0ZXIgZG9lc24ndCBoYXZlIHJlZ2lzdGVyZWQsIGdvIHRvIHRoZSBcIi9cIiB1cmwuXG5cdCR1cmxSb3V0ZXJQcm92aWRlci5vdGhlcndpc2UoJy8nKTtcbn0pO1xuIiwiYXBwLmNvbnRyb2xsZXIoJ2Fib3V0Q3RybCcsIGZ1bmN0aW9uKCRzY29wZSl7XG5cdHZhciB0aGVXaW5kb3cgPSAkKHdpbmRvdyk7XG5cdHZhciBmb3JjZSA9IGQzLmxheW91dC5mb3JjZSgpO1xuXHR2YXIgc3RvcHBlZCA9IHRydWU7XG5cblx0Ly8gYW5ndWxhci5lbGVtZW50KGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpe1xuXHQkc2NvcGUuc2tpbGxzID0gW1xuXHRcdHtuYW1lOiBcIkphdmFTY3JpcHRcIiwgbGV2ZWw6IDN9LFxuXHRcdHtuYW1lOiBcIk1vbmdvREJcIiwgbGV2ZWw6IDN9LFxuXHRcdHtuYW1lOiBcIkV4cHJlc3MuanNcIiwgbGV2ZWw6IDN9LFxuXHRcdHtuYW1lOiBcIkFuZ3VsYXIuanNcIiwgbGV2ZWw6IDN9LFxuXHRcdHtuYW1lOiBcIk5vZGUuanNcIiwgbGV2ZWw6IDN9LFxuXHRcdHtuYW1lOiBcIk1vbmdvb3NlLmpzXCIsIGxldmVsOiAzfSxcblx0XHR7bmFtZTogXCJHaXRcIiwgbGV2ZWw6IDN9LFxuXHRcdHtuYW1lOiBcIkNTUzNcIiwgbGV2ZWw6IDN9LFxuXHRcdHtuYW1lOiBcIkhUTUw1XCIsIGxldmVsOiAzfSxcblx0XHR7bmFtZTogXCJSZXNvbnNpdmUgRGVzaWduXCIsIGxldmVsOiAyfSxcblx0XHR7bmFtZTogXCJHdWxwXCIsIGxldmVsOiAyfSxcblx0XHR7bmFtZTogXCJNb2NoYSAmIENoYWlcIiwgbGV2ZWw6IDJ9LFxuXHRcdHtuYW1lOiBcImpRdWVyeVwiLCBsZXZlbDogMn0sXG5cdFx0e25hbWU6IFwiQm9vdHN0cmFwXCIsIGxldmVsOiAyfSxcblx0XHR7bmFtZTogXCJXZWItQXVkaW9cIiwgbGV2ZWw6IDJ9LFxuXHRcdHtuYW1lOiBcIkNocm9tZSBFeHRlbnNpb25zXCIsIGxldmVsOiAxfSxcblx0XHR7bmFtZTogXCJTUUxcIiwgbGV2ZWw6IDF9LFxuXHRcdHtuYW1lOiBcIldlYlNvY2tldHNcIiwgbGV2ZWw6IDF9LFxuXHRcdHtuYW1lOiBcIk1JRElcIiwgbGV2ZWw6IDF9LFxuXHRcdHtuYW1lOiBcIkphdmFcIiwgbGV2ZWw6IDF9LFxuXHRcdHtuYW1lOiBcIkMrK1wiLCBsZXZlbDogMX0sXG5cdF07XG5cblx0JHNjb3BlLmNvbG9ycyA9IFtcblx0XHQnIzdGRkZENCcsXG5cdFx0JyNFMEZGRkYnLFxuXHRcdCcjMzNDQ0ZGJyxcblx0XHQnI0M2ODhFOCcsXG5cdFx0JyNGRjgwN0QnLFxuXHRcdCcjRkY4RUIyJ1xuXHRdO1xuXG5cdCRzY29wZS5za2lsbHMubWFwKGZ1bmN0aW9uKGUsaSl7XG5cdFx0ZS5jb2xvciA9ICRzY29wZS5jb2xvcnNbaSU2XTtcblx0fSk7XG5mdW5jdGlvbiBpbml0aWFsaXplU2tpbGxzQ2xvdWQoKXtcblx0dmFyIHNraWxsc0Nsb3VkID0gJChcIiNza2lsbHMtY2xvdWRcIik7XG5cdHZhciB3aWR0aCA9IHNraWxsc0Nsb3VkLndpZHRoKCk7XG5cdHZhciBoZWlnaHQgPSBza2lsbHNDbG91ZC5oZWlnaHQoKTtcblx0dmFyIHN2ZyA9IGQzLnNlbGVjdChcIiNza2lsbHMtY2xvdWRcIikuYXBwZW5kKFwic3ZnXCIpO1xuXG5cblx0Ly9jcmVhdGUgbm9kZXNcblx0dmFyIG5vZGVzID0gZDMucmFuZ2UoJHNjb3BlLnNraWxscy5sZW5ndGgpLm1hcChmdW5jdGlvbihpKSB7XG5cdFx0cmV0dXJuIHtcblx0XHRcdHJhZGl1czogJHNjb3BlLnNraWxsc1tpXS5sZXZlbCoxOCArMTQsXG5cdFx0XHRsYWJlbDogJHNjb3BlLnNraWxsc1tpXS5uYW1lLFxuXHRcdFx0c2tpbGxMZXZlbDogJHNjb3BlLnNraWxsc1tpXS5sZXZlbCxcblx0XHRcdGJnQ29sb3I6ICRzY29wZS5za2lsbHNbaV0uY29sb3Jcblx0XHR9O1xuXHR9KTtcblxuXHR2YXJcdHJvb3QgPSBub2Rlc1swXTtcblx0XHRyb290LnJhZGl1cyA9IDA7XG5cdFx0cm9vdC5maXhlZCA9IHRydWU7XG5cblx0dmFyIGdyb3VwcyA9IHN2Zy5zZWxlY3RBbGwoXCJnXCIpXG5cdFx0LmRhdGEobm9kZXMuc2xpY2UoMSkpXG5cdFx0LmVudGVyKClcblx0XHQuYXBwZW5kKFwiZ1wiKTtcblxuXHR2YXIgY2lyY2xlcyA9IGdyb3Vwcy5hcHBlbmQoJ2NpcmNsZScpXG5cdFx0LmRhdGEobm9kZXMuc2xpY2UoMSkpXG5cdFx0LmF0dHIoXCJyXCIsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGQucmFkaXVzOyB9KVxuXHRcdC5zdHlsZShcImZpbGxcIiwgZnVuY3Rpb24oZCwgaSkgeyByZXR1cm4gZC5iZ0NvbG9yOyB9KTtcblxuXHR2YXIgbGFiZWwgPSBncm91cHMuYXBwZW5kKFwidGV4dFwiKVxuXHRcdC50ZXh0KGZ1bmN0aW9uKGQpeyByZXR1cm4gZC5sYWJlbDsgfSlcblx0XHQuYXR0cih7XG5cdFx0XHRcImFsaWdubWVudC1iYXNlbGluZVwiOiBcIm1pZGRsZVwiLFxuXHRcdFx0XCJ0ZXh0LWFuY2hvclwiOiBcIm1pZGRsZVwiLFxuXHRcdH0pO1xuXG5cblx0XHRmb3JjZS5ncmF2aXR5KDAuMDUpXG5cdFx0LmNoYXJnZShmdW5jdGlvbihkLCBpKSB7IHJldHVybiBpID8gMCA6IC0zMDAwOyB9KVxuXHRcdC5ub2Rlcyhub2Rlcylcblx0XHQuc2l6ZShbd2lkdGgtMjAwLCBoZWlnaHQtMzAwXSk7XG5cblx0Zm9yY2Uuc3RhcnQoKTtcblx0c3RvcHBlZCA9IGZhbHNlO1xuXG5cdGZvcmNlLm9uKFwidGlja1wiLCBmdW5jdGlvbihlKSB7XG5cdFx0dmFyIHEgPSBkMy5nZW9tLnF1YWR0cmVlKG5vZGVzKSxcblx0XHRcdGkgPSAwLFxuXHRcdFx0biA9IG5vZGVzLmxlbmd0aDtcblxuXHRcdHdoaWxlICgrK2kgPCBuKSBxLnZpc2l0KGNvbGxpZGUobm9kZXNbaV0pKTtcblxuXHRcdC8vbW92ZSBjaXJjbGVzXG5cdFx0c3ZnLnNlbGVjdEFsbChcImNpcmNsZVwiKVxuXHRcdFx0LmF0dHIoXCJjeFwiLCBmdW5jdGlvbihkKSB7IHJldHVybiBkLng7IH0pXG5cdFx0XHQuYXR0cihcImN5XCIsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGQueTsgfSk7XG5cblx0XHQvL21vdmUgbGFiZWxzXG5cdFx0c3ZnLnNlbGVjdEFsbChcInRleHRcIilcblx0XHRcdC5hdHRyKFwieFwiLCBmdW5jdGlvbihkKSB7IHJldHVybiBkLng7IH0pXG5cdFx0XHQuYXR0cihcInlcIiwgZnVuY3Rpb24oZCkgeyByZXR1cm4gZC55OyB9KTtcblx0fSk7XG5cblx0c3ZnLm9uKFwibW91c2Vtb3ZlXCIsIGZ1bmN0aW9uKCkge1xuXHRcdHZhciBwMSA9IGQzLm1vdXNlKHRoaXMpO1xuXHRcdHJvb3QucHggPSBwMVswXTtcblx0XHRyb290LnB5ID0gcDFbMV07XG5cdFx0Zm9yY2UucmVzdW1lKCk7XG5cdH0pO1xuXG4vL1NvIHRoZXkgZG9uJ3QgYWxsIHN0YXJ0IG91dCBpbiBhIHN0cmFpZ2h0IGxpbmVcblx0cm9vdC5weCA9IDE7XG5cdHJvb3QucHkgPSAxO1xuXG5cdGZ1bmN0aW9uIGNvbGxpZGUobm9kZSkge1xuXHRcdHZhciByID0gbm9kZS5yYWRpdXMgKyAxNixcblx0XHRcdG54MSA9IG5vZGUueCAtIHIsXG5cdFx0XHRueDIgPSBub2RlLnggKyByLFxuXHRcdFx0bnkxID0gbm9kZS55IC0gcixcblx0XHRcdG55MiA9IG5vZGUueSArIHI7XG5cdFx0cmV0dXJuIGZ1bmN0aW9uKHF1YWQsIHgxLCB5MSwgeDIsIHkyKSB7XG5cdFx0XHRpZiAocXVhZC5wb2ludCAmJiAocXVhZC5wb2ludCAhPT0gbm9kZSkpIHtcblx0XHRcdFx0dmFyIHggPSBub2RlLnggLSBxdWFkLnBvaW50LngsXG5cdFx0XHRcdFx0eSA9IG5vZGUueSAtIHF1YWQucG9pbnQueSxcblx0XHRcdFx0XHRsID0gTWF0aC5zcXJ0KHggKiB4ICsgeSAqIHkpLFxuXHRcdFx0XHRcdHIgPSBub2RlLnJhZGl1cyArIHF1YWQucG9pbnQucmFkaXVzO1xuXG5cdFx0XHRcdGlmIChsIDwgcikge1xuXHRcdFx0XHRcdGwgPSAobCAtIHIpIC8gbCAqIDAuNTtcblx0XHRcdFx0XHRub2RlLnggLT0geCAqPSBsO1xuXHRcdFx0XHRcdG5vZGUueSAtPSB5ICo9IGw7XG5cdFx0XHRcdFx0cXVhZC5wb2ludC54ICs9IHg7XG5cdFx0XHRcdFx0cXVhZC5wb2ludC55ICs9IHk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdHJldHVybiB4MSA+IG54MiB8fCB4MiA8IG54MSB8fCB5MSA+IG55MiB8fCB5MiA8IG55MTtcblx0XHR9O1xuXHR9XG59XG5cdC8vIH0pO1xuXG5cdGlmICh0aGVXaW5kb3cud2lkdGgoKSA+IDEwNzQpIHtcblx0XHRpbml0aWFsaXplU2tpbGxzQ2xvdWQoKTtcblx0fVxuXG5cdHRoZVdpbmRvdy5yZXNpemUoZnVuY3Rpb24oKSB7XG5cdFx0aWYgKHRoZVdpbmRvdy53aWR0aCgpID4gMTA3NCkge1xuXHRcdFx0JCgnaHRtbCxib2R5Jykuc2Nyb2xsVG9wKDApO1xuXHRcdFx0Ly9zdGFydCAvIHJlc3RhcnQgbW91c2VvdmVyIGxpc3RlbmVyIGlmIHN0b3BwZWRcblx0XHRcdGlmIChzdG9wcGVkKSB7XG5cdFx0XHRcdGluaXRpYWxpemVTa2lsbHNDbG91ZCgpO1xuXHRcdFx0fVxuXHRcdH0gZWxzZSB7XG5cdFx0XHRmb3JjZS5zdG9wKCk7XG5cdFx0fVxuXHR9KTtcbn0pO1xuIiwiYXBwLmNvbnRyb2xsZXIoJ2NvbnRhY3RDdHJsJywgZnVuY3Rpb24oJHNjb3BlLCAkaHR0cCl7XG5cdCRzY29wZS5mb3JtRGF0YSA9IHt9O1xuXG5cdCRzY29wZS5zZW5kTWFpbCA9IGZ1bmN0aW9uKCl7XG5cdFx0JHNjb3BlLndhaXRpbmcgPSB0cnVlO1xuXHRcdCRzY29wZS5zZW50ID0gZmFsc2U7XG5cdFx0JHNjb3BlLnN1Y2Nlc3MgPSBmYWxzZTtcblx0XHQkaHR0cC5wb3N0KCcvYXBpL2NvbnRhY3QnLCAkc2NvcGUuZm9ybURhdGEpXG5cdFx0LnRoZW4oZnVuY3Rpb24oc3VjY2Vzc1Jlc3BvbnNlKXtcblx0XHRcdCRzY29wZS53YWl0aW5nID0gZmFsc2U7XG5cdFx0XHQkc2NvcGUuc2VudCA9IHRydWU7XG5cdFx0XHQkc2NvcGUuc3VjY2VzcyA9IHN1Y2Nlc3NSZXNwb25zZS5kYXRhO1xuXHRcdFx0JHNjb3BlLmZvcm1EYXRhID0ge307XG5cdFx0fSk7XG5cdH07XG5cdC8vXG5cdHZhciByZXN1bWVMYWJlbCA9ICQoJyNyZXN1bWUnKTtcblx0dmFyIG92ZXJsYXkgPSAkKCcjb3ZlcmxheScpO1xuXHR2YXIgcmVzdW1lID0gJCgnI3Jlc3VtZS1jb250YWluZXInKTtcblxuXHRyZXN1bWVMYWJlbC5jbGljayhmdW5jdGlvbigpe1xuXHRcdG92ZXJsYXkuY3NzKHsnb3BhY2l0eSc6ICcuNycsICd6LWluZGV4JzogJzEnfSk7XG5cdFx0cmVzdW1lLmNzcyh7J2Rpc3BsYXknOiAnYmxvY2snfSk7XG5cblx0fSk7XG5cdG92ZXJsYXkuY2xpY2soZnVuY3Rpb24oKXtcblx0XHRvdmVybGF5LmNzcyh7J29wYWNpdHknOiAnMCcsICd6LWluZGV4JzogJy0xJ30pO1xuXHRcdHJlc3VtZS5jc3MoeydkaXNwbGF5JzogJ25vbmUnfSk7XG5cdH0pO1xuXG5cdC8vIHZhciBjYXJkID0gJCgnI2NhcmQnKTtcblx0Ly8gdmFyIG5vdGUgPSAkKCcubm90ZScpO1xuXHQvLyB2YXIgYXJyb3cgPSAkKCcjYXJyb3cnKTtcblx0Ly8gdmFyIHRvZ2dsZSA9IHRydWU7XG5cblx0Ly8gYXJyb3cuY2xpY2soZnVuY3Rpb24oKXtcblx0Ly8gXHRpZiAodG9nZ2xlKXtcblx0Ly8gXHRcdGNhcmQucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpLnJlbW92ZUNsYXNzKCdpbml0aWFsJykuYWRkQ2xhc3MoJ3Zpc2libGUnKTtcblx0Ly8gXHRcdC8vIGFycm93LmNzcyh7J2Rpc3BsYXknIDogJ25vbmUnfSk7XG5cdC8vXG5cdC8vXG5cdC8vIFx0XHQvLyBub3RlLmNzcyh7J2Rpc3BsYXknOiAnaW5pdGlhbCd9KTtcblx0Ly8gXHRcdHNldFRpbWVvdXQoZXhwbG9kZSwgNTAwKTtcblx0Ly8gXHRcdHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcblx0Ly8gXHRcdFx0JCgnI2NhbnZhcycpLmNzcyh7J2Rpc3BsYXknIDogJ25vbmUnfSk7XG5cdC8vIFx0XHRcdC8vIGFycm93LmNzcyh7J2Rpc3BsYXknIDogJ2luaXRpYWwnfSk7XG5cdC8vXG5cdC8vIFx0XHR9LCA0MDAwKTtcblx0Ly8gXHR9IGVsc2Uge1xuXHQvLyBcdFx0Y2FyZC5yZW1vdmVDbGFzcygndmlzaWJsZScpLmFkZENsYXNzKCdoaWRkZW4nKTtcblx0Ly9cblx0Ly9cblx0Ly8gXHRcdC8vIG5vdGUuY3NzKHsnZGlzcGxheSc6ICdub25lJ30pO1xuXHQvLyBcdH1cblx0Ly8gXHR0b2dnbGUgPSAhdG9nZ2xlO1xuXHQvLyB9KTtcblxuXG5cdGZ1bmN0aW9uIGV4cGxvZGUoKSB7XG5cblx0XHQkKCcjY2FudmFzJykuY3NzKHsnZGlzcGxheScgOiAnaW5pdGlhbCd9KTtcblxuXHRcdHZhciByZXF1ZXN0SWQ7XG5cblx0XHR2YXIgY2FudmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjYW52YXNcIiksXG5cdFx0XHRjb250ZXh0ID0gY2FudmFzLmdldENvbnRleHQoXCIyZFwiKSxcblx0XHRcdHdpZHRoID0gY2FudmFzLndpZHRoID0gd2luZG93LmlubmVyV2lkdGgsXG5cdFx0XHRoZWlnaHQgPSBjYW52YXMuaGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0LFxuXHRcdFx0cGFydGljbGUgPSBbXSxcblx0XHRcdHBhcnRpY2xlQ291bnQgPSAwLFxuXHRcdFx0Z3Jhdml0eSA9IDAuMyxcblx0XHRcdGNvbG9ycyA9XG5cdFx0XHQvLyBbXG5cdFx0XHQvLyBcdCcjZjQ0MzM2JywgJyNlOTFlNjMnLCAnIzljMjdiMCcsICcjNjczYWI3JywgJyMzZjUxYjUnLFxuXHRcdFx0Ly8gXHQnIzIxOTZmMycsICcjMDNhOWY0JywgJyMwMGJjZDQnLCAnIzAwOTY4OCcsICcjNENBRjUwJyxcblx0XHRcdC8vIFx0JyM4QkMzNEEnLCAnI0NEREMzOScsICcjRkZFQjNCJywgJyNGRkMxMDcnLCAnI0ZGOTgwMCcsXG5cdFx0XHQvLyBcdCcjRkY1NzIyJywgJyM3OTU1NDgnXG5cdFx0XHQvLyBdO1xuXHRcdFx0WycjN0ZGRkQ0JywnI0UwRkZGRicsJyMzM0NDRkYnLCcjQzY4OEU4JywnI0ZGODA3RCcsJyNGRjhFQjInXTtcblxuXHRcdGZvciggdmFyIGkgPSAwOyBpIDwgNTA7IGkrKyl7XG5cdFx0XHRwYXJ0aWNsZS5wdXNoKHtcblx0XHRcdFx0eCA6IHdpZHRoLzIsXG5cdFx0XHRcdHkgOiBoZWlnaHQvMixcblx0XHRcdFx0Ym94VyA6IHJhbmRvbVJhbmdlKDUsMjApLFxuXHRcdFx0XHRib3hIIDogcmFuZG9tUmFuZ2UoNSwyMCksXG5cdFx0XHRcdHNpemUgOiByYW5kb21SYW5nZSgyLDgpLFxuXG5cdFx0XHRcdHNwaWtlcmFuOnJhbmRvbVJhbmdlKDMsNSksXG5cblx0XHRcdFx0dmVsWCA6cmFuZG9tUmFuZ2UoLTgsOCksXG5cdFx0XHRcdHZlbFkgOnJhbmRvbVJhbmdlKC01MCwtMTApLFxuXG5cdFx0XHRcdGFuZ2xlIDpjb252ZXJ0VG9SYWRpYW5zKHJhbmRvbVJhbmdlKDAsMzYwKSksXG5cdFx0XHRcdGNvbG9yOmNvbG9yc1tNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBjb2xvcnMubGVuZ3RoKV0sXG5cdFx0XHRcdGFuZ2xlc3BpbjpyYW5kb21SYW5nZSgtMC4yLDAuMiksXG5cblx0XHRcdFx0ZHJhdyA6IGRyYXdcblx0XHRcdH0pO1xuXHRcdH1cblxuXHRcdHZhciByMT17XG5cdFx0XHR4OndpZHRoLzItMTUwLFxuXHRcdFx0eTpoZWlnaHQvMi0xNTAsXG5cdFx0XHR3aWR0aDozMDAsXG5cdFx0XHRoZWlnaHQ6MzAwLFxuXHRcdFx0dmVsWCA6MCxcblx0XHRcdHZlbFkgOi0xMCxcblx0XHRcdGFscGhhdG9wOjBcblx0XHR9O1xuXG5cblx0XHRmdW5jdGlvbiBkcmF3U2NyZWVuKCl7XG5cdFx0XHR2YXIgc2l6ZSA9IDUwO1xuXHRcdFx0aWYgKHIxLmFscGhhdG9wIDwgMSl7XG5cdFx0XHRcdHIxLmFscGhhdG9wICs9IDAuMDE7XG5cdFx0XHR9IGVsc2V7XG5cdFx0XHRcdHIxLmFscGhhdG9wID0gMTtcblx0XHRcdH1cblx0XHRcdGNvbnRleHQuZ2xvYmFsQWxwaGEgPSByMS5hbHBoYXRvcDtcblxuXHRcdFx0aWYocjEuYWxwaGF0b3AgPT09IDEpe1xuXHRcdFx0XHRyMS52ZWxZKj0gMC45OTk7XG5cdFx0XHRcdHIxLnZlbFkgKz0gMC4zO1xuXHRcdFx0XHRyMS54ICs9IHIxLnZlbFg7XG5cdFx0XHRcdHIxLnkgKz0gcjEudmVsWTtcblx0XHRcdH1cblxuXHRcdFx0aWYocjEueSArIHIxLmhlaWdodCA+IGhlaWdodCl7XG5cdFx0XHRcdHIxLmFuZ2xlc3BpbiA9IDA7XG5cdFx0XHRcdHIxLnkgPSBoZWlnaHQgLSByMS5oZWlnaHQ7XG5cdFx0XHRcdHIxLnZlbFkgKj0gLTAuODtcblx0XHRcdFx0cjEudmVsWCAqPSAwLjk7XG5cdFx0XHR9XG5cblx0XHRcdGNvbnRleHQuZ2xvYmFsQWxwaGEgPSAxO1xuXG5cdFx0XHRmb3IoIHZhciBpID0gMDsgaSA8IHBhcnRpY2xlLmxlbmd0aDsgaSsrKXtcblx0XHRcdFx0cGFydGljbGVbaV0uZHJhdygpO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIHVwZGF0ZSgpe1xuXHRcdFx0Y29udGV4dC5jbGVhclJlY3QoMCwwLHdpZHRoLGhlaWdodCk7XG5cdFx0XHRkcmF3U2NyZWVuKCk7XG5cdFx0XHRyZXF1ZXN0SWQgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUodXBkYXRlKTtcblx0XHR9XG5cblx0XHR1cGRhdGUoKTtcblxuXHRcdHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcblx0XHRcdHdpbmRvdy5jYW5jZWxBbmltYXRpb25GcmFtZShyZXF1ZXN0SWQpO1xuXHRcdFx0cmVxdWVzdElkID0gdW5kZWZpbmVkO1xuXHRcdH0sNTAwMCk7XG5cblx0XHRmdW5jdGlvbiByYW5kb21SYW5nZShtaW4sIG1heCl7XG5cdFx0XHRyZXR1cm4gbWluICsgTWF0aC5yYW5kb20oKSAqIChtYXggLSBtaW4gKTtcblx0XHR9XG5cblx0XHRmdW5jdGlvbiByYW5kb21JbnQobWluLCBtYXgpe1xuXHRcdFx0cmV0dXJuIE1hdGguZmxvb3IobWluICsgTWF0aC5yYW5kb20oKSogKG1heCAtIG1pbiArIDEpKTtcblx0XHR9XG5cblx0XHRmdW5jdGlvbiBjb252ZXJ0VG9SYWRpYW5zKGRlZ3JlZSkge1xuXHRcdFx0cmV0dXJuIGRlZ3JlZSooTWF0aC5QSS8xODApO1xuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIGRyYXdTdGFyKGN4LCBjeSwgc3Bpa2VzLCBvdXRlclJhZGl1cywgaW5uZXJSYWRpdXMsY29sb3IpIHtcblx0XHRcdHZhciByb3QgPSBNYXRoLlBJIC8gMiAqIDM7XG5cdFx0XHR2YXIgeCA9IGN4O1xuXHRcdFx0dmFyIHkgPSBjeTtcblx0XHRcdHZhciBzdGVwID0gTWF0aC5QSSAvIHNwaWtlcztcblxuXHRcdFx0Y29udGV4dC5zdHJva2VTeWxlID0gXCIjMDAwXCI7XG5cdFx0XHRjb250ZXh0LmJlZ2luUGF0aCgpO1xuXHRcdFx0Y29udGV4dC5tb3ZlVG8oY3gsIGN5IC0gb3V0ZXJSYWRpdXMpO1xuXHRcdFx0Zm9yIChpID0gMDsgaSA8IHNwaWtlczsgaSsrKSB7XG5cdFx0XHRcdHggPSBjeCArIE1hdGguY29zKHJvdCkgKiBvdXRlclJhZGl1cztcblx0XHRcdFx0eSA9IGN5ICsgTWF0aC5zaW4ocm90KSAqIG91dGVyUmFkaXVzO1xuXHRcdFx0XHRjb250ZXh0LmxpbmVUbyh4LCB5KTtcblx0XHRcdFx0cm90ICs9IHN0ZXA7XG5cblx0XHRcdFx0eCA9IGN4ICsgTWF0aC5jb3Mocm90KSAqIGlubmVyUmFkaXVzO1xuXHRcdFx0XHR5ID0gY3kgKyBNYXRoLnNpbihyb3QpICogaW5uZXJSYWRpdXM7XG5cdFx0XHRcdGNvbnRleHQubGluZVRvKHgsIHkpO1xuXHRcdFx0XHRyb3QgKz0gc3RlcDtcblx0XHRcdH1cblxuXHRcdFx0Y29udGV4dC5saW5lVG8oY3gsIGN5IC0gb3V0ZXJSYWRpdXMpO1xuXHRcdFx0Y29udGV4dC5jbG9zZVBhdGgoKTtcblx0XHRcdGNvbnRleHQuZmlsbFN0eWxlPWNvbG9yO1xuXHRcdFx0Y29udGV4dC5maWxsKCk7XG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gZHJhdygpe1xuXHRcdFx0Y29udGV4dC5zYXZlKCk7XG5cdFx0XHRjb250ZXh0LnRyYW5zbGF0ZSh0aGlzLngsdGhpcy55KTtcblx0XHRcdGNvbnRleHQucm90YXRlKHRoaXMuYW5nbGUpO1xuXHRcdFx0Y29udGV4dC5maWxsU3R5bGU9dGhpcy5jb2xvcjtcblx0XHRcdGNvbnRleHQuYmVnaW5QYXRoKCk7XG5cdFx0XHQvLyBkcmF3U3RhcigwLCAwLCA1LCB0aGlzLmJveFcsIHRoaXMuYm94SCk7XG5cdFx0XHRjb250ZXh0LmZpbGxSZWN0KHRoaXMuYm94Vy8yKi0xLHRoaXMuYm94SC8yKi0xLHRoaXMuYm94Vyx0aGlzLmJveEgpO1xuXHRcdFx0Y29udGV4dC5maWxsKCk7XG5cdFx0XHRjb250ZXh0LmNsb3NlUGF0aCgpO1xuXHRcdFx0Y29udGV4dC5yZXN0b3JlKCk7XG5cdFx0XHR0aGlzLmFuZ2xlICs9IHRoaXMuYW5nbGVzcGluO1xuXHRcdFx0dGhpcy52ZWxZKj0gMC45OTk7XG5cdFx0XHR0aGlzLnZlbFkgKz0gMC4zO1xuXHRcdFx0dGhpcy54ICs9IHRoaXMudmVsWDtcblx0XHRcdHRoaXMueSArPSB0aGlzLnZlbFk7XG5cblx0XHRcdGlmKHRoaXMueSA8IDApe1xuXHRcdFx0XHR0aGlzLnZlbFkgKj0gLTAuMjtcblx0XHRcdFx0dGhpcy52ZWxYICo9IDAuOTtcblx0XHRcdH1cblx0XHRcdGlmICh0aGlzLnkgPiBoZWlnaHQpe1xuXHRcdFx0XHR0aGlzLmFuZ2xlc3BpbiA9IDA7XG5cdFx0XHRcdHRoaXMueSA9IGhlaWdodDtcblx0XHRcdFx0dGhpcy52ZWxZICo9IC0wLjI7XG5cdFx0XHRcdHRoaXMudmVsWCAqPSAwLjk7XG5cdFx0XHR9XG5cdFx0XHRpZiAodGhpcy54ID4gd2lkdGggfHx0aGlzLng8IDApe1xuXHRcdFx0XHR0aGlzLnZlbFggKj0gLTAuNTtcblx0XHRcdH1cblx0XHR9XG5cdH1cbn0pO1xuIiwiYXBwLmNvbmZpZyhmdW5jdGlvbigkc3RhdGVQcm92aWRlcil7XG5cdCRzdGF0ZVByb3ZpZGVyXG5cdC5zdGF0ZSgnaG9tZScsIHtcblx0XHR1cmw6ICcvJyxcblx0XHR0ZW1wbGF0ZVVybDogJy9qcy90ZW1wbGF0ZXMvaG9tZS5odG1sJyxcblx0XHRjb250cm9sbGVyOiAnaG9tZUN0cmwnXG5cdH0pXG5cdC5zdGF0ZSgncHJvamVjdHMnLCB7XG5cdFx0dXJsOiAnL3Byb2plY3RzJyxcblx0XHR0ZW1wbGF0ZVVybDogJy9qcy90ZW1wbGF0ZXMvcHJvamVjdHMuaHRtbCcsXG5cdFx0Y29udHJvbGxlcjogJ3Byb2plY3RDdHJsJ1xuXHR9KVxuXHQuc3RhdGUoJ2Fib3V0Jywge1xuXHRcdHVybDogJy9hYm91dCcsXG5cdFx0dGVtcGxhdGVVcmw6ICcvanMvdGVtcGxhdGVzL2Fib3V0Lmh0bWwnLFxuXHRcdGNvbnRyb2xsZXI6ICdhYm91dEN0cmwnXG5cdH0pXG5cdC5zdGF0ZSgnY29udGFjdCcsIHtcblx0XHR1cmw6ICcvY29udGFjdCcsXG5cdFx0dGVtcGxhdGVVcmw6ICcvanMvdGVtcGxhdGVzL2NvbnRhY3QuaHRtbCcsXG5cdFx0Y29udHJvbGxlcjogJ2NvbnRhY3RDdHJsJ1xuXHR9KTtcbn0pO1xuXG5hcHAuY29udHJvbGxlcignbWFpbkN0cmwnLCBmdW5jdGlvbigpe1xuXG59KTtcblxuYXBwLmNvbnRyb2xsZXIoJ2hvbWVDdHJsJywgZnVuY3Rpb24oKXtcblx0XHR2YXIgaW5jcmVtZW50ID0gMDtcblx0XHR2YXIgY2Fyb3VzZWwgPSAkKCcjY2Fyb3VzZWwnKTtcblx0XHR2YXIgY3VycmVudCA9ICcjZmlnLTEnO1xuXHRcdHZhciBwcmV2O1xuXHRcdHZhciB0aGVXaW5kb3cgPSAkKHdpbmRvdyk7XG5cdFx0dmFyIGludGVydmFsO1xuXG5cdFx0aWYgKHRoZVdpbmRvdy53aWR0aCgpID4gNzY4KSB7XG5cdFx0XHRpbnRlcnZhbCA9IHNldEludGVydmFsKHJvdGF0ZSwxNTAwKTtcblx0XHR9XG5cdFx0dGhlV2luZG93LnJlc2l6ZShmdW5jdGlvbigpIHtcblx0XHRcdGNsZWFySW50ZXJ2YWwoaW50ZXJ2YWwpO1xuXHRcdFx0aWYgKHRoZVdpbmRvdy53aWR0aCgpID4gNzY4KSB7XG5cdFx0XHRcdCQoJ2h0bWwsYm9keScpLnNjcm9sbFRvcCgwKTtcblx0XHRcdFx0aW50ZXJ2YWwgPSBzZXRJbnRlcnZhbChyb3RhdGUsMTUwMCk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0XHRmdW5jdGlvbiByb3RhdGUoKXtcblx0XHRcdGluY3JlbWVudCsrO1xuXHRcdFx0Y2Fyb3VzZWwuY3NzKHsnLXdlYmtpdC10cmFuc2Zvcm0nOiAncm90YXRlWCgnICsgKGluY3JlbWVudCAqIC02MCkgKyAnZGVnKSd9KTtcblx0XHRcdGNhcm91c2VsLmF0dHIoJ2RhdGEtc3RhdGUnLChpbmNyZW1lbnQgJSA2KSArIDEpO1xuXHRcdFx0cHJldiA9IGN1cnJlbnQ7XG5cdFx0XHRjdXJyZW50ID0gJyNmaWctJyArICgoaW5jcmVtZW50ICUgNikgKyAxKTtcblx0XHR9XG59KTtcbiIsImFwcC5jb250cm9sbGVyKCdwcm9qZWN0Q3RybCcsIGZ1bmN0aW9uKCRzY29wZSl7XG5cdHZhciB0aGVXaW5kb3cgPSAkKHdpbmRvdyk7XG5cblx0ZnVuY3Rpb24gaW5pdGlhbGl6ZVNrZXcoKXtcblx0XHQkKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpIHtcblxuXHRcdFx0dmFyIGN1clBhZ2UgPSAxO1xuXHRcdFx0dmFyIG51bU9mUGFnZXMgPSAkKFwiLnNrdy1wYWdlXCIpLmxlbmd0aDtcblx0XHRcdHZhciBhbmltVGltZSA9IDEwMDA7XG5cdFx0XHR2YXIgc2Nyb2xsaW5nID0gZmFsc2U7XG5cdFx0XHR2YXIgcGdQcmVmaXggPSBcIi5za3ctcGFnZS1cIjtcblx0XHRcdHZhciBwcm9nUHJlZml4ID0gXCIjcFwiO1xuXG5cdFx0XHRmdW5jdGlvbiBwYWdpbmF0aW9uKCkge1xuXHRcdFx0XHRzY3JvbGxpbmcgPSB0cnVlO1xuXG5cdFx0XHRcdCQocGdQcmVmaXggKyBjdXJQYWdlKS5yZW1vdmVDbGFzcyhcImluYWN0aXZlXCIpLmFkZENsYXNzKFwiYWN0aXZlXCIpO1xuXHRcdFx0XHQvLyAkKHByb2dQcmVmaXggKyBjdXJQYWdlKS5hZGRDbGFzcyhcImN1cnJlbnRcIik7XG5cdFx0XHRcdHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0c2Nyb2xsaW5nID0gZmFsc2U7XG5cdFx0XHRcdH0sIGFuaW1UaW1lKTtcblx0XHRcdH1cblxuXHRcdFx0ZnVuY3Rpb24gbmF2aWdhdGVVcCgpIHtcblx0XHRcdFx0aWYgKGN1clBhZ2UgPT09IDEpIHJldHVybjtcblx0XHRcdFx0Y3VyUGFnZS0tO1xuXHRcdFx0XHQkKHBnUHJlZml4ICsgKGN1clBhZ2UgKyAxKSkucmVtb3ZlQ2xhc3MoXCJhY3RpdmVcIik7XG5cdFx0XHRcdC8vICQocHJvZ1ByZWZpeCArIChjdXJQYWdlICsgMSkpLnJlbW92ZUNsYXNzKFwiY3VycmVudFwiKTtcblxuXHRcdFx0XHRwYWdpbmF0aW9uKCk7XG5cdFx0XHR9XG5cblx0XHRcdGZ1bmN0aW9uIG5hdmlnYXRlRG93bigpIHtcblx0XHRcdFx0aWYgKGN1clBhZ2UgPT09IG51bU9mUGFnZXMpIHJldHVybjtcblx0XHRcdFx0Y3VyUGFnZSsrO1xuXHRcdFx0XHQkKHBnUHJlZml4ICsgKGN1clBhZ2UgLSAxKSkuYWRkQ2xhc3MoXCJpbmFjdGl2ZVwiKTtcblx0XHRcdFx0Ly8gJChwcm9nUHJlZml4ICsgKGN1clBhZ2UgLTEpKS5yZW1vdmVDbGFzcyhcImN1cnJlbnRcIik7XG5cdFx0XHRcdHBhZ2luYXRpb24oKTtcblx0XHRcdH1cblxuXHRcdFx0JChkb2N1bWVudCkub24oXCJtb3VzZXdoZWVsIERPTU1vdXNlU2Nyb2xsXCIsIGZ1bmN0aW9uKGUpIHtcblx0XHRcdFx0aWYgKHNjcm9sbGluZykgcmV0dXJuO1xuXHRcdFx0XHRpZiAoZS5vcmlnaW5hbEV2ZW50LndoZWVsRGVsdGEgPiAwICB8fCBlLm9yaWdpbmFsRXZlbnQuZGV0YWlsIDwgMCkge1xuXHRcdFx0XHRcdG5hdmlnYXRlVXAoKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRuYXZpZ2F0ZURvd24oKTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cblx0XHRcdCQoZG9jdW1lbnQpLm9uKFwia2V5ZG93blwiLCBmdW5jdGlvbihlKSB7XG5cdFx0XHRcdGlmIChzY3JvbGxpbmcpIHJldHVybjtcblx0XHRcdFx0aWYgKGUud2hpY2ggPT09IDM4KSB7XG5cdFx0XHRcdFx0bmF2aWdhdGVVcCgpO1xuXHRcdFx0XHR9IGVsc2UgaWYgKGUud2hpY2ggPT09IDQwKSB7XG5cdFx0XHRcdFx0bmF2aWdhdGVEb3duKCk7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdH0pO1xuXHR9XG5cdGlmICh0aGVXaW5kb3cud2lkdGgoKSA+IDc2OCkge1xuXHRcdGluaXRpYWxpemVTa2V3KCk7XG5cdH1cbn0pO1xuIiwiYXBwLmRpcmVjdGl2ZSgncHJvamVjdHNNb2JpbGUnLCBmdW5jdGlvbigpe1xuXHRyZXR1cm4ge1xuXHRcdHJlc3RyaWN0OiAnRScsXG5cdFx0dGVtcGxhdGVVcmw6ICcvanMvZGlyZWN0aXZlcy9wcm9qZWN0cy1tb2JpbGUuaHRtbCdcblx0fTtcbn0pO1xuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
